{% import "../../setup/html/_macros.html.twig" as _macro %}

{# {% spaceless %} #}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Avatar API</title>
		
	</head>
	<body>

		{# Main Components #}
		
		<div class="document">

			<h1>Avatar API</h1>

			<h2>Cài đặt</h2>
			
			<p>- Clone project: <code class="language-powershell">https://github.com/truongvithien/threed</code>  </p>
			<p>- Install node packages: </p>
			<pre><code class="language-powershell">{% spaceless %}
			npm i
{% endspaceless %}
</code></pre>
			<p>- Run development mode (watch): </p>
			<pre><code class="language-powershell">{% spaceless %}
			npm run dev
{% endspaceless %} 
</code></pre>
			<p>- Chỉnh sửa HTML Dom trong <code class="language-powershell">/src/avatar/html/index.html.twig</code></p>
			<p>- Chỉnh sửa Javascript code trong <code class="language-powershell">/src/avatar/js/index.js</code></p>

			<h2>Khởi tạo </h2>

			<p><strong>HTML</strong></p>

			<p>Cài đặt HTML vị trí để render hình ảnh avatar 3D và 2D: </p>

<pre><code class="language-markup">{% spaceless %}
&lt;div id="rendered_avatar" class="rendered_avatar">
	&lt;!-- Canvas 3D sẽ được render tại đây -->
&lt;/div>
&lt;div id="layered_avatar" class="layered_avatar">
	&lt;!-- Hình ảnh 2D sẽ được xếp chồng lên nhau tại đây -->
&lt;/div>
{% endspaceless %}
</code></pre>

			<p><strong>JS</strong></p>

			<p>Gọi hàm khởi tạo khu vực render hình ảnh avatar 3D và 2D:</p>
<pre><code class="language-js">{% spaceless %}
// Khởi tạo khu vực render với các giá trị mặc định 
avatar.init();

// Khởi tạo khu vực render với các giá trị tuỳ biến
avatar.init(options);
{% endspaceless %}
</code></pre>

			<div class="table">
				<table>
					<thead>
						<tr>
							<th>Tham số</th>
							<th>Kiểu</th>
							<th>Mặc định</th>
							<th>Giải thích</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>options {</td>
							<td>object</td>
							<td></td>
							<td>Các thuộc tính tuỳ chỉnh khác (không bắt buộc)</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;rendered_element</td>
							<td>string</td>
							<td>"#rendered_avatar"</td>
							<td>
							Selector để render hình ảnh 3D.
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;layered_element</td>
							<td>string</td>
							<td>"#layered_avatar"</td>
							<td>
							Selector để render hình ảnh 2D.
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;switch_element</td>
							<td>string</td>
							<td>"#switch_dimension"</td>
							<td>
							Selector <mark>input:checkbox</mark> để cài đặt chuyển đổi 2D/ 3D.
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;asset_dir</td>
							<td>string</td>
							<td>"assets/avatar/"</td>
							<td>
							Địa chỉ thư mục để asset 2d, 3d (.glb, .png, ...)
							</td>
						</tr>
						<tr>
							<td>}</td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>

			<h2>SMT</h2>

			<p>Gọi hàm này để render avatar SMT.</p>

<pre><code class="language-js">{% spaceless %}
var <mark>smt_code</mark> = "SMT1";

// Gọi hàm render avatar SMT với các giá trị mặc định
avatar.loadSMT(<mark>smt_code</mark>);

// Khởi tạo khu vực render với các giá trị tuỳ biến
avatar.loadSMT(<mark>smt_code</mark>, options);
{% endspaceless %}
</code></pre>

			<div class="table">
				<table>
					<thead>
						<tr>
							<th>Tham số</th>
							<th>Kiểu</th>
							<th>Mặc định</th>
							<th>Giải thích</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td>smt_code</td>
							<td>string</td>
							<td><em>null</em></td>
							<td>Mã định danh avatar của SMT <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">SMT1 | SMT2 | SMT3 | ... | SMT9</code></pre><br>	
							</td>
						</tr>
						<tr>
							<td>options {</td>
							<td>object</td>
							<td></td>
							<td>Các thuộc tính tuỳ chỉnh khác (không bắt buộc)</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;asset_dir</td>
							<td>string</td>
							<td>"assets/avatar/"</td>
							<td>
							Địa chỉ thư mục để asset 3d (.glb, .png, ...)
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_options</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Tuỳ biến thêm cho từng texture <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	smt_skin: {
		aoMapIntensity: .1,
	},
	smt_outfit: {
		aoMapIntensity: .1,
		emissiveIntensity: 2,
		normalScale: new THREE.Vector2(1.5, 1.5)
	},
	smt_teeth: {
		aoMapIntensity: .1,
		emissiveIntensity: 2,
		normalScale: new THREE.Vector2(1.5, 1.5),
		roughness: 3
	},
	smt_hair: {
		aoMap: null,
		aoMapIntensity: .1,
		normalScale: new THREE.Vector2(-1, -1)
	},
	st_background: {},
	st_face: {},
	st_hair: {},
	st_outfit: {},
	st_asset: {},
	st_eyewear: {}
}{% endspaceless %}
</code></pre>	
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;model_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của modal <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	smt: ".fbx",
	st: ".glb",
	twod: ".png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của các texture. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	base_color: "_SHD_BaseColor.png",
	metallic: "_SHD_Metallic.png",
	normal: "_SHD_Normal.png",
	roughness: "_SHD_Roughness.png",
	ambient_occlusion: "_SHD_AmbientOcclusion.png",
	emissive: "_SHD_Emissive.png",
	alpha: "_SHD_Opacity.png",

	scattering: "_SHD_Scattering.png",
	thickness: "_SHD_Thickness.png",
	sss: "_SHD_SSS.png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_skin_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của các texture cho thuộc tính các mesh chỉ da người. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	base_color: "_Skin_SHD_BaseColor.png",
	metallic: "_Skin_SHD_Metallic.png",
	normal: "_Skin_SHD_Normal.png",
	roughness: "_Skin_SHD_Roughness.png",
	ambient_occlusion: "_Skin_SHD_AmbientOcclusion.png",

	scattering: "_Skin_SHD_Scattering.png",
	thickness: "_Skin_SHD_Thickness.png",
	sss: "_Skin_SHD_SSS.png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;scale</td>
							<td>object</td>
							<td></td>
							<td>Thuộc tính scale cho model. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	x: .1, 
	y: .1, 
	z: .1
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>}</td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>

			{# <div class="grid_code">
				{% for item in 1..9 %}	
{% spaceless %}
<pre><code class="language-js">avatar.loadSMT('SMT_{{"0" ~ item}}');
</code></pre>
{% endspaceless %}
				{% endfor %}
			
			</div> #}

			<h2>STARTER</h2>

			<p>Gọi hàm này để render avatar SMT.</p>

<pre><code class="language-js">{% spaceless %}
var <mark>st_code</mark> = "HM3-EM3-FM3-OM2-A1-T3";

// Gọi hàm render avatar SMT với các giá trị mặc định
avatar.loadST(<mark>st_code</mark>);

// Khởi tạo khu vực render với các giá trị tuỳ biến
avatar.loadST(<mark>st_code</mark>, options);
{% endspaceless %}
</code></pre>


			<div class="table">
				<table>
					<thead>
						<tr>
							<th>Tham số</th>
							<th>Kiểu</th>
							<th>Mặc định</th>
							<th>Giải thích</th>
						</tr>
					</thead>
					<tbody>
						<tr class="no-border-bottom">
							<td>st_code</td>
							<td>string</td>
							<td><em>null</em></td>
							<td>Chuỗi định danh các thuộc tính starter theo cấu trúc:
								<strong class="attribute_structure">
									<span>AA0</span>-<span>BB0</span>-<span>CC0</span>-<span>DD0</span>-<span>E0</span>-<span>F0</span>
								</strong>
								<br> <br>
								<em>Trong đó:</em> <br> <br>
								<strong>AA0</strong>: 
								Chuỗi định danh <strong>tóc</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">Nam: HM1 | HM2 | HM3 | HM4
Nữ: HF1 | HF2 | HF3 | HF4</code></pre><br>	
								<strong>BB0</strong>: 
								Chuỗi định danh <strong>phụ kiện mắt</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">Nam: EM1 | EM2 | EM3 | EM4
Nữ: EF1 | EF2 | EF3 | EF4</code></pre><br>
								<strong>CC0</strong>: 
								Chuỗi định danh <strong>khuôn mặt</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">Nam: FM1 | FM2 | FM3 | FM4
Nữ: FF1 | FF2 | FF3 | FF4</code></pre><br>		
								<strong>DD0</strong>: 
								Chuỗi định danh <strong>trang phục</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
								
<pre><code class="language-markup">Nam: OM1 | OM2 | OM3 | OM4
Nữ: OF1 | OF2 | OF3 | OF4</code></pre><br>
								<strong>E0</strong>: 
								Chuỗi định danh <strong>phụ kiện</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">Nam/ Nữ: A1 | A2 | A3</code></pre><br>
								<strong>F0</strong>: 
								Chuỗi định danh <strong>hình nền</strong> của avatar Starter. <br>
								<em>Các giá trị có thể:  </em> <br><br>
<pre><code class="language-markup">Nam/ Nữ: T1 | T2 | T3 | ... | T28</code></pre>				
							</td>
						</tr>
						<tr class="no-border-bottom">
							<td></td>
							<td></td>
							<td colspan="2">hoặc</td>
						</tr>
						<tr>
							<td>st_code</td>
							<td>object</td>
							<td><em>undefined</em></td>
							<td>st_code cũng có thể là object, khi đó có thể khai báo riêng biệt từng thuộc tính:
<pre><code class="language-js">{
	"hair": "HM1",
	"eyewear": "EM2",
	"face": "FM3",
	"outfit": "OM1",
	"asset": "A2",
	"background_text": "T6"
}
</code></pre>	
								<em>Các giá trị có thể có ở từng trường thông tin tương tự như trên.</em>
							</td>
						</tr>
						<tr>
							<td>options {</td>
							<td>object</td>
							<td></td>
							<td>Các thuộc tính tuỳ chỉnh khác (không bắt buộc)</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;asset_dir</td>
							<td>string</td>
							<td>"assets/avatar/"</td>
							<td>
							Địa chỉ thư mục để asset 3d (.glb, .png, ...)
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_options</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Tuỳ biến thêm cho từng texture <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	smt_skin: {
		aoMapIntensity: .1,
	},
	smt_outfit: {
		aoMapIntensity: .1,
		emissiveIntensity: 2,
		normalScale: new THREE.Vector2(1.5, 1.5)
	},
	smt_teeth: {
		aoMapIntensity: .1,
		emissiveIntensity: 2,
		normalScale: new THREE.Vector2(1.5, 1.5),
		roughness: 3
	},
	smt_hair: {
		aoMap: null,
		aoMapIntensity: .1,
		normalScale: new THREE.Vector2(-1, -1)
	},
	st_background: {},
	st_face: {},
	st_hair: {},
	st_outfit: {},
	st_asset: {},
	st_eyewear: {}
}{% endspaceless %}
</code></pre>	
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;model_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của modal <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	smt: ".fbx",
	st: ".glb",
	twod: ".png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của các texture. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	base_color: "_SHD_BaseColor.png",
	metallic: "_SHD_Metallic.png",
	normal: "_SHD_Normal.png",
	roughness: "_SHD_Roughness.png",
	ambient_occlusion: "_SHD_AmbientOcclusion.png",
	emissive: "_SHD_Emissive.png",
	alpha: "_SHD_Opacity.png",

	scattering: "_SHD_Scattering.png",
	thickness: "_SHD_Thickness.png",
	sss: "_SHD_SSS.png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;texture_skin_suffix</td>
							<td>object</td>
							<td><em>&rarr;</em></td>
							<td>Phần sau tên của các texture cho thuộc tính các mesh chỉ da người. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	base_color: "_Skin_SHD_BaseColor.png",
	metallic: "_Skin_SHD_Metallic.png",
	normal: "_Skin_SHD_Normal.png",
	roughness: "_Skin_SHD_Roughness.png",
	ambient_occlusion: "_Skin_SHD_AmbientOcclusion.png",

	scattering: "_Skin_SHD_Scattering.png",
	thickness: "_Skin_SHD_Thickness.png",
	sss: "_Skin_SHD_SSS.png"
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>&nbsp;&nbsp;scale</td>
							<td>object</td>
							<td></td>
							<td>Thuộc tính scale cho model. <br>
								Mặc định: 
<pre><code class="language-js">{% spaceless %}
{
	x: .08, 
	y: .08, 
	z: .08
}{% endspaceless %}
</code></pre>
							</td>
						</tr>
						<tr>
							<td>}</td>
							<td></td>
							<td></td>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>

{% set asset = ["A1", "A2", "A3"] %}
{% set background_text = [
		"T1", "T2", "T3", "T4", "T5", "T6", "T7", "T8", "T9", "T10",
		"T11", "T12", "T13", "T14", "T15", "T16", "T17", "T18", "T19", "T20",
		"T21", "T22", "T23", "T24", "T25", "T26", "T27", "T28"
] %}

{% set hair_male = ["HM1", "HM2", "HM3", "HM4"] %}
{% set eyewear_male = ["EM1", "EM2", "EM3", "EM4"] %}
{% set face_male = ["FM1", "FM2", "FM3", "FM4"] %}
{% set outfit_male = ["OM1", "OM2", "OM3", "OM4", "OM5", "OM6"] %}

{% set hair_female = ["HF1", "HF2", "HF3", "HF4"] %}
{% set eyewear_female = ["EF1", "EF2", "EF3", "EF4"] %}
{% set face_female = ["FF1", "FF2", "FF3", "FF4"] %}
{% set outfit_female = ["OF1", "OF2", "OF3", "OF4", "OF5", "OF6"] %} 

{# {
	"hair": "{{item_hair}}",
	"eyewear": "{{item_eyewear}}",
	"face": "{{item_face}}",
	"outfit": "{{item_outfit}}",
	"asset": "{{item_asset}}",
	"background_text": "{{item_background_text}}"
} #}
			<h2>TẤT CẢ TRƯỜNG HỢP: </h2>

			<p>
				<strong>SMT</strong> (9)
			</p>

			<div class="grid_starter">
<pre><code class="language-markup">{% spaceless %}
{% for item in 1..9 %}SMT{{item}}&#9; {% endfor %}
{% endspaceless %}
</code></pre>
			</div>

			<p>
				<strong>Starter Nam</strong> (32,256)
			</p>

			<div class="grid_starter">
<pre><code class="language-markup">
{% for item_hair in hair_male %}{% for item_eyewear in eyewear_male %}{% for item_face in face_male %}{% for item_outfit in outfit_male %}{% for item_asset in asset %}{% for item_background_text in background_text %}{% spaceless %}
{{item_hair}}-{{item_eyewear}}-{{item_face}}-{{item_outfit}}-{{item_asset}}-{{item_background_text}}&#9;
{% endspaceless %}{% endfor %}{% endfor %}{% endfor %}{% endfor %}{% endfor %}
{% endfor %}
</code></pre>
			</div>

			<p>
				<strong>Starter Nữ</strong> (32,256)
			</p>

			<div class="grid_starter">
<pre><code class="language-markup">
{% for item_hair in hair_female %}{% for item_eyewear in eyewear_female %}{% for item_face in face_female %}{% for item_outfit in outfit_female %}{% for item_asset in asset %}{% for item_background_text in background_text %}{% spaceless %}
{{item_hair}}-{{item_eyewear}}-{{item_face}}-{{item_outfit}}-{{item_asset}}-{{item_background_text}}&#9;
{% endspaceless %}{% endfor %}{% endfor %}{% endfor %}{% endfor %}{% endfor %}
{% endfor %}
</code></pre>
			</div>


		</div>




		{# Shader #}

		{# Add - on scripts #}
		{% include "../../setup/html/_livereload.html.twig" %}
		
		<script>

	</script>

</body>
</html>
{# {% endspaceless %} #}
