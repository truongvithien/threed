!function(e){function a(a){for(var s,r,n=a[0],d=a[1],l=a[2],c=0,u=[];c<n.length;c++)r=n[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(s in d)Object.prototype.hasOwnProperty.call(d,s)&&(e[s]=d[s]);for(_&&_(a);u.length;)u.shift()();return i.push.apply(i,l||[]),t()}function t(){for(var e,a=0;a<i.length;a++){for(var t=i[a],s=!0,n=1;n<t.length;n++){var d=t[n];0!==o[d]&&(s=!1)}s&&(i.splice(a--,1),e=r(r.s=t[0]))}return e}var s={},o={1:0},i=[];function r(a){if(s[a])return s[a].exports;var t=s[a]={i:a,l:!1,exports:{}};return e[a].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=s,r.d=function(e,a,t){r.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,a){if(1&a&&(e=r(e)),8&a)return e;if(4&a&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&a&&"string"!=typeof e)for(var s in e)r.d(t,s,function(a){return e[a]}.bind(null,s));return t},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="";var n=window.webpackJsonp=window.webpackJsonp||[],d=n.push.bind(n);n.push=a,n=n.slice();for(var l=0;l<n.length;l++)a(n[l]);var _=d;i.push([18,0]),t()}({1:function(e,a,t){"use strict";(function(e){var s=t(0),o={create_light:{environment_light:function(a){var t=e.extend({enable:!0,options:{dir:"assets/hdr/",hdri_file:"provence_studio_1k_edit.hdr",enable_background:!1,intensity:1}},a);(new s.RGBELoader).setPath(t.dir).load(t.hdri_file,(function(e){e.mapping=s.EquirectangularReflectionMapping,t.enable_background&&(scene.background=e),scene.environment=e}))},point_light:function(a){var t=e.extend({enable:!0,helper:!1,options:{debug_color:16711680,color:16777215,decay:1,distance:100,intensity:.6,physically_correct:0,power:0,shadow_bias:-.01,map_size_width:1e3,map_size_height:2e3,camera_near:.5,camera_far:500,position:{x:4,y:4,z:4}}},a),o=new s.SphereGeometry(.2,32,32);if(t.options){var i=new s.PointLight(t.options.color,t.options.intensity,t.options.distance,t.options.decay,t.options.physically_correct);return t.helper&&i.add(new s.Mesh(o,new s.MeshBasicMaterial({color:t.options.debug_color}))),i.castShadow=!0,i.shadow.bias=t.options.shadow_bias,i.position.set(t.options.position.x,t.options.position.y,t.options.position.z),i}},dir_light:function(a){var t=e.extend({enable:!0,helper:!1,options:{debug_color:16711680,color:16777215,decay:1,distance:100,intensity:.6,physically_correct:0,power:0,shadow_bias:-.01,map_size_width:1e3,map_size_height:2e3,camera_near:.5,camera_far:500,position:{x:4,y:4,z:4}}},a);if(t.enable){light_dir=new s.DirectionalLight(16777215,.8),light_dir.color.setHSL(.1,1,.95),light_dir.position.set(-1,1.75,1),light_dir.position.multiplyScalar(100),t.light_dir&&scene.add(light_dir),light_dir.castShadow=!0,light_dir.shadow.mapSize.width=2048,light_dir.shadow.mapSize.height=2048;const e=50;if(light_dir.shadow.camera.left=-e,light_dir.shadow.camera.right=e,light_dir.shadow.camera.top=e,light_dir.shadow.camera.bottom=-e,light_dir.shadow.camera.far=3500,light_dir.shadow.bias=-1e-4,t.light_dir&&web3d.helper){const e=new s.DirectionalLightHelper(light_dir,10);scene.add(e)}}},amb_light:function(a){var t=e.extend({enable:!0,helper:!1,options:{color:4210752,intensity:.1}},a);if(t.enable)return new s.AmbientLight(t.options.color,t.options.intensity)},spot_light:function(a){var t={enable:!0,helper:!1,options:{debug_color:16711680,color:16777215,decay:1,distance:0,intensity:.6,angle:Math.PI/3,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:1,position:{x:4,y:4,z:4},target:{x:4,y:4,z:4}}},o=e.extend(t,a);if(o.enable){var i=new s.SpotLight(o.options.color,o.options.intensity,o.options.distance,o.options.angle,o.options.penumbra,o.options.decay);if(i.position.set(o.options.position.x,o.options.position.y,o.options.position.z),i.angle=o.options.angle,i.penumbra=o.options.penumbra,i.decay=o.options.decay,i.distance=o.options.distance,i.castShadow=o.options.cast_shadow,i.shadow.camera.near=o.options.shadow_camera_near,i.shadow.camera.far=o.options.shadow_camera_far,i.shadow.focus=o.options.shadow_focus,i.receiveShadow=!0,i.castShadow=!0,i.target.position.set(o.options.target.x,o.options.target.y,o.options.target.z),o.helper){var r=new s.SpotLightHelper(i),n=new s.CameraHelper(i.shadow.camera);i.add(r),i.add(n)}return i}}},loading:function(a,t){var s=e.extend({rendered_element:"#rendered_avatar",className:"loading"},t);a?(e(s.rendered_element).addClass(s.className),e(s.rendered_element+" canvas").css({opacity:0})):(e(s.rendered_element).removeClass(s.className),e(s.rendered_element+" canvas").css({opacity:1}))},clean:function(a,t){e.extend({},t)}};a.a=o}).call(this,t(6))},18:function(e,a,t){e.exports=t(27)},19:function(e,a,t){"use strict";(function(e){t(23),t(26);var a=t(4);e((function(){a.a.init()})),window.addEventListener("load",(function(){var t=new URL(window.location.href),s=t.searchParams.get("load_smt");void 0!==s&&null!=s&&(0==s.length&&(s="SMT1"),a.a.loadSMT(s));var o=t.searchParams.get("load_st");if(void 0!==o&&null!=o){0==o.length&&(o="HM3-EM3-FM3-OM2-A1-T2");var i=t.searchParams.get("anim");void 0!==i&&null!=i?(0==i.length&&(i="ST_Walk"),a.a.loadSTDEMO(o,i)):a.a.loadST(o)}var r=t.searchParams.get("load_stdemo");void 0!==r&&null!=r&&(0==r.length&&(r="HM3-EM3-FM3-OM2-A1-T1"),a.a.loadSTDEMO(r));var n=t.searchParams.get("load_stfpx");switch(void 0!==n&&null!=n&&(0==n.length&&(n="HM3-EM3-FM3-OM2-A1-T1"),a.a.loadSTFPX(n)),t.searchParams.get("dim")){case"3":e("#rendered_avatar").length>0&&(e("#rendered_avatar").addClass("active"),e("#switch_avatar").prop("checked",!1),e("#switch_avatar + label .dim").html(2));break;case"2":default:e("#layered_avatar").length>0&&(e("#layered_avatar").addClass("active"),e("#switch_avatar").prop("checked",!0),e("#switch_avatar + label .dim").html(3))}})),window.debug=a.b}).call(this,t(6))},23:function(e,a,t){"use strict";(function(e){}).call(this,t(6))},27:function(e,a,t){"use strict";t.r(a);t(19)},4:function(e,a,t){"use strict";(function(e){t.d(a,"a",(function(){return s})),t.d(a,"b",(function(){return se}));var s,o,i,r,n,d,l,_,c,u,h,f,m,p=t(0),x=t(9),g=t(10),w=t(5),b=t(7),y=t(17),M=t(11),k=t(12),S=t(2),v=t(13),z=t(14),P=t(15),D=t(16),A=(t(24),t(25),t(1)),H={hemi:{},dir:{},key:{},fill:{},back:{},top:{},top2:{},bottom:{},hand:{}};const O=new p.Clock;var B,E,T,L,$,j,C,R,I,F,G,W,N,V,q,U,J,X,K,Q,Y,Z,ee,ae;const te={rendered_element:"#rendered_avatar",layered_element:"#layered_avatar",switch_element:"#switch_avatar",asset_dir:"assets/avatar/",asset_dir_fbx:"assets/avatar-fbx/",asset_dir_anim:"assets/avatar-fbx/anim/",background:"assets/bg-default.glb",scale:{smt:{x:.1,y:.1,z:.1},st:{x:.08,y:.08,z:.08}},texture_options:{smt_skin:{aoMapIntensity:.1},smt_outfit:{aoMapIntensity:.1,emissiveIntensity:2,normalScale:new p.Vector2(1.5,1.5)},smt_teeth:{aoMapIntensity:.1,emissiveIntensity:2,normalScale:new p.Vector2(1.5,1.5),roughness:3},smt_hair:{aoMap:null,aoMapIntensity:.1,normalScale:new p.Vector2(1,1),roughness:1.5},st_background:{},st_text:{},st_face:{aoMap:null},st_skin:{aoMap:null,envMapIntensity:.3},st_hair:{aoMap:null,roughness:1.5},st_outfit:{aoMap:null,normalScale:new p.Vector2(2,2),envMapIntensity:.3,roughness:1.4},st_asset:{aoMap:null},st_eyewear:{aoMap:null,transparent:!0}},model_suffix:{smt:".fbx",st:".glb",st_fbx:".fbx",st_fbx_anim:"_G_Skin.fbx",twod:".png"},texture_suffix:{base_color:"_SHD_BaseColor.png",metallic:"_SHD_Metallic.png",normal:"_SHD_Normal.png",roughness:"_SHD_Roughness.png",ambient_occlusion:"_SHD_AmbientOcclusion.png",emissive:"_SHD_Emissive.png",alpha:"_SHD_Opacity.png",scattering:"_SHD_Scattering.png",thickness:"_SHD_Thickness.png",sss:"_SHD_SSS.png"},texture_skin_suffix:{base_color:"_Skin_SHD_BaseColor.png",metallic:"_Skin_SHD_Metallic.png",normal:"_Skin_SHD_Normal.png",roughness:"_Skin_SHD_Roughness.png",ambient_occlusion:"_Skin_SHD_AmbientOcclusion.png",scattering:"_Skin_SHD_Scattering.png",thickness:"_Skin_SHD_Thickness.png",sss:"_Skin_SHD_SSS.png"},texture_text_suffix:{base_color:"_Text_SHD_BaseColor.png"},post_processing:{lut_asset:"assets/lut/",lut_file:"Warm_1.siona_gut.cube",lutPass_options:{enable:!0,intensity:.3}},light_options:{environment_light:{enable:1,options:{dir:"assets/hdr/",hdri_file:"provence_studio_1k_edit.hdr",enable_background:!1}},ambient_light:{enable:1,options:{color:16777215,intensity:.8}},hemisphere_light:{enable:1,options:{skyColor:16777215,groundColor:16777215,intensity:.025,position:{x:0,y:50,z:0}}},directional_light:{enable:!1,options:{}},key_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:.9,angle:Math.PI/2,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:0,shadow_camera_far:500,shadow_focus:1,position:{x:4,y:3,z:4},target:{x:0,y:2,z:0}}},fill_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:.7,angle:Math.PI/3,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:1,position:{x:-7,y:3,z:6},target:{x:0,y:4,z:0}}},back_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:1,angle:Math.PI/3,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:1,position:{x:0,y:2,z:-4},target:{x:0,y:2,z:0}}},top_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:1.2,angle:Math.PI/5,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:1,position:{x:0,y:7,z:3},target:{x:0,y:4,z:1}}},top2_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:.4,angle:Math.PI/5,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:1,position:{x:0,y:8,z:-3},target:{x:0,y:4,z:1}}},bottom_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:.15,angle:Math.PI/3,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:0,y:-1,z:2},target:{x:0,y:3,z:0}}},hand_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:.1,angle:Math.PI/3,penumbra:0,cast_shadow:!1,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:2,position:{x:3.5,y:.5,z:0},target:{x:0,y:1,z:0}}}}};s={rendered_element:te.rendered_element,layered_element:te.layered_element,switch_element:te.switch_element,rendered_element:te.rendered_element,layered_element:te.layered_element,switch_element:te.switch_element,default_bg:te.background,dom_width:100,dom_height:100,asset_dir:te.asset_dir,asset_dir_fbx:te.asset_dir_fbx,asset_dir_anim:te.asset_dir_anim,init:function(a){var t={rendered_element:te.rendered_element,layered_element:te.layered_element,switch_element:te.switch_element,asset_dir:te.asset_dir},o=e.extend(t,a);s.rendered_element=o.rendered_element,s.asset_dir=o.asset_dir,s.dom_width=e(s.rendered_element).innerWidth(),s.dom_height=e(s.rendered_element).innerHeight(),s.setup.all(),s.setup.post_renderer(),s.setup.helpers()},loadSMT:async function(a,t={}){var i={asset_dir:s.asset_dir,texture_options:te.texture_options,model_suffix:te.model_suffix,texture_suffix:te.texture_suffix,texture_skin_suffix:te.texture_skin_suffix,texture_text_suffix:te.texture_text_suffix,scale:te.scale.smt},r=e.extend(i,t);L=r.asset_dir+a+"/"+a+r.model_suffix.twod,e(s.layered_element).empty(),e(s.layered_element).append(`\n            <img src="${L}" alt="${a}">\n        `);const n=new b.a,l=new p.TextureLoader;A.a.loading(!0,{rendered_element:s.rendered_element}),A.a.clean(o),[T]=await Promise.all([n.loadAsync(r.asset_dir+a+"/"+a+r.model_suffix.smt)]);const _={map:l.load(r.asset_dir+a+"/"+a+r.texture_skin_suffix.base_color),metalnessMap:l.load(r.asset_dir+a+"/"+a+r.texture_skin_suffix.metallic),normalMap:l.load(r.asset_dir+a+"/"+a+r.texture_skin_suffix.normal),roughnessMap:l.load(r.asset_dir+a+"/"+a+r.texture_skin_suffix.roughness),aoMap:l.load(r.asset_dir+a+"/"+a+r.texture_skin_suffix.ambient_occlusion)},c={map:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.roughness),aoMap:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.ambient_occlusion),emissiveMap:l.load(r.asset_dir+a+"/"+a+r.texture_suffix.emissive)};(d=new p.AnimationMixer(T)).clipAction(T.animations[0]).play(),T.scale.set(r.scale.x,r.scale.y,r.scale.z),T.receiveShadow=!0,T.castShadow=!0;var u=new p.MeshStandardMaterial({..._,...r.texture_options.smt_skin}),h=new p.MeshStandardMaterial({...c,...r.texture_options.smt_outfit}),f=new p.MeshStandardMaterial({...c,...r.texture_options.smt_teeth}),m=new p.MeshStandardMaterial({...c,...r.texture_options.smt_hair});T.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0),e.isMesh&&["mesh_6","mesh_7","mesh_8","neck_low","hand_low","Face_low"].indexOf(e.name)>-1?e.material=u:e.isMesh&&(e.material=h),e.isMesh&&["mesh_3","Hair_low"].indexOf(e.name)>-1&&(e.material=m),e.isMesh&&"Teeth_low"==e.name&&(e.material=f)}),o.add(T),A.a.loading(!1,{rendered_element:s.rendered_element})},loadST:async function(a,t){var i={asset_dir:s.asset_dir,texture_options:te.texture_options,model_suffix:te.model_suffix,texture_suffix:te.texture_suffix,texture_skin_suffix:te.texture_skin_suffix,texture_text_suffix:te.texture_text_suffix,scale:te.scale.st},r=e.extend(i,t),n={};switch(typeof a){case"object":n=a;break;case"string":default:let e=a.split("-");n={hair:e[0],eyewear:e[1],face:e[2],outfit:e[3],asset:e[4],background_text:e[5]}}I=r.asset_dir+n.background_text+"/"+n.background_text+r.model_suffix.twod,W=r.asset_dir+n.face+"/"+n.face+r.model_suffix.twod,q=r.asset_dir+n.hair+"/"+n.hair+r.model_suffix.twod,X=r.asset_dir+n.outfit+"/"+n.outfit+r.model_suffix.twod,Y=r.asset_dir+n.asset+"/"+n.asset+r.model_suffix.twod,ae=r.asset_dir+n.eyewear+"/"+n.eyewear+r.model_suffix.twod,e(s.layered_element).empty(),e(s.layered_element).append(`\n            <img src="${I}" alt="background_text">\n            <img src="${W}" alt="face">\n            <img src="${q}" alt="hair">\n            <img src="${X}" alt="outfit">\n            <img src="${Y}" alt="asset">\n            <img src="${ae}" alt="eyewear">\n        `);const d=new w.a,l=new p.TextureLoader;A.a.loading(!0,{rendered_element:s.rendered_element}),A.a.clean(o),[C,F,N,U,K,Z]=await Promise.all([d.loadAsync(r.asset_dir+n.background_text+"/"+n.background_text+r.model_suffix.st),d.loadAsync(r.asset_dir+n.face+"/"+n.face+r.model_suffix.st),d.loadAsync(r.asset_dir+n.hair+"/"+n.hair+r.model_suffix.st),d.loadAsync(r.asset_dir+n.outfit+"/"+n.outfit+r.model_suffix.st),d.loadAsync(r.asset_dir+n.asset+"/"+n.asset+r.model_suffix.st),d.loadAsync(r.asset_dir+n.eyewear+"/"+n.eyewear+r.model_suffix.st)]),R=C.scene.children[0],G=F.scene.children[0],V=N.scene.children[0],J=U.scene.children[0],Q=K.scene.children[0],ee=Z.scene.children[0];const _={map:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.roughness)},c={map:l.load(r.asset_dir+n.face+"/"+n.face+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.face+"/"+n.face+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.face+"/"+n.face+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.face+"/"+n.face+r.texture_suffix.roughness)},u={map:l.load(r.asset_dir+n.hair+"/"+n.hair+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.hair+"/"+n.hair+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.hair+"/"+n.hair+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.hair+"/"+n.hair+r.texture_suffix.roughness),aoMap:l.load(r.asset_dir+n.hair+"/"+n.hair+r.texture_suffix.ambient_occlusion)},h={map:l.load(r.asset_dir+n.outfit+"/"+n.outfit+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.outfit+"/"+n.outfit+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.outfit+"/"+n.outfit+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.outfit+"/"+n.outfit+r.texture_suffix.roughness)},f={map:l.load(r.asset_dir+"Bodybase/Bodybase"+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+"Bodybase/Bodybase"+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+"Bodybase/Bodybase"+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+"Bodybase/Bodybase"+r.texture_suffix.roughness)},m={map:l.load(r.asset_dir+n.asset+"/"+n.asset+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.asset+"/"+n.asset+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.asset+"/"+n.asset+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.asset+"/"+n.asset+r.texture_suffix.roughness)},x={map:l.load(r.asset_dir+n.eyewear+"/"+n.eyewear+r.texture_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.eyewear+"/"+n.eyewear+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.eyewear+"/"+n.eyewear+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.eyewear+"/"+n.eyewear+r.texture_suffix.roughness),alphaMap:l.load(r.asset_dir+n.eyewear+"/"+n.eyewear+r.texture_suffix.alpha)},g={map:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_text_suffix.base_color),metalnessMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.metallic),normalMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.normal),roughnessMap:l.load(r.asset_dir+n.background_text+"/"+n.background_text+r.texture_suffix.roughness)};R.scale.set(r.scale.x,r.scale.y,r.scale.z),R.receiveShadow=!1,R.castShadow=!1;var b=new p.MeshBasicMaterial({..._,...r.texture_options.st_background}),y=new p.MeshStandardMaterial({...g,...r.texture_options.st_background});R.traverse(e=>{e.isMesh&&"mesh_0"==e.name?(e.castShadow=!0,e.receiveShadow=!0,e.material=b):e.isMesh&&(e.castShadow=!1,e.receiveShadow=!1,e.material=y)}),console.log("BG/Text: "),console.log(R),G.scale.set(r.scale.x,r.scale.y,r.scale.z),G.receiveShadow=!0,G.castShadow=!0;var M=new p.MeshStandardMaterial({...c,...r.texture_options.st_face});G.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=M)}),console.log("Face: "),console.log(G),V.scale.set(r.scale.x,r.scale.y,r.scale.z),V.receiveShadow=!0,V.castShadow=!0;var k=new p.MeshStandardMaterial({...u,...r.texture_options.st_hair});V.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=k)}),console.log("Hair: "),console.log(V),J.scale.set(r.scale.x,r.scale.y,r.scale.z),J.receiveShadow=!0,J.castShadow=!0;var S=new p.MeshStandardMaterial({...h,...r.texture_options.st_outfit}),v=new p.MeshStandardMaterial({...f,...r.texture_options.st_skin});J.children[1].traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=S)}),J.children[0].traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=v)}),console.log("Outfit: "),console.log(J),Q.scale.set(r.scale.x,r.scale.y,r.scale.z),Q.receiveShadow=!0,Q.castShadow=!0;var z=new p.MeshStandardMaterial({...m,...r.texture_options.st_asset});v=new p.MeshStandardMaterial({...f,...r.texture_options.st_skin});Q.traverse(e=>{e.isMesh&&["mesh_1"].indexOf(e.name)>-1?(e.castShadow=!0,e.receiveShadow=!0,e.material=z):(e.castShadow=!0,e.receiveShadow=!0,e.material=v)}),console.log("Asset: "),console.log(Q),ee.scale.set(r.scale.x,r.scale.y,r.scale.z),ee.receiveShadow=!0,ee.castShadow=!0;var P=new p.MeshStandardMaterial({...x,...r.texture_options.st_eyewear});ee.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=P)}),console.log("Eyewear: "),console.log(ee),($=new p.Object3D).add(R),$.add(G),$.add(V),$.add(J),$.add(Q),$.add(ee),console.log("All: "),console.log($),o.add($),A.a.loading(!1,{rendered_element:s.rendered_element})},loadSTDEMO:async function(a,t="ST_Walk",i){var r={asset_dir:s.asset_dir,texture_options:te.texture_options,model_suffix:te.model_suffix,texture_suffix:te.texture_suffix,texture_skin_suffix:te.texture_skin_suffix,texture_text_suffix:te.texture_text_suffix,scale:te.scale.st},n=e.extend(r,i),l={};switch(typeof a){case"object":l=a;break;case"string":default:let e=a.split("-");l={hair:e[0],eyewear:e[1],face:e[2],outfit:e[3],asset:e[4],background_text:e[5]}}I=n.asset_dir+l.background_text+"/"+l.background_text+n.model_suffix.twod,W=n.asset_dir+l.face+"/"+l.face+n.model_suffix.twod,q=n.asset_dir+l.hair+"/"+l.hair+n.model_suffix.twod,X=n.asset_dir+l.outfit+"/"+l.outfit+n.model_suffix.twod,Y=n.asset_dir+l.asset+"/"+l.asset+n.model_suffix.twod,ae=n.asset_dir+l.eyewear+"/"+l.eyewear+n.model_suffix.twod,e(s.layered_element).empty(),e(s.layered_element).append(`\n            <img src="${I}" alt="background_text">\n            <img src="${W}" alt="face">\n            <img src="${q}" alt="hair">\n            <img src="${X}" alt="outfit">\n            <img src="${Y}" alt="asset"> \n            <img src="${ae}" alt="eyewear">\n        `);const _=new w.a,c=new b.a,u=new p.TextureLoader;A.a.loading(!0,{rendered_element:s.rendered_element}),A.a.clean(o),[C,j]=await Promise.all([_.loadAsync(n.asset_dir+l.background_text+"/"+l.background_text+n.model_suffix.st),c.loadAsync(n.asset_dir+"DEMO/"+t+n.model_suffix.smt)]),R=C.scene.children[0];const h={map:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.base_color),metalnessMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.metallic),normalMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.normal),roughnessMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.roughness)},f={map:u.load(n.asset_dir+"DEMO/Body"+n.texture_suffix.base_color),metalnessMap:u.load(n.asset_dir+"DEMO/Body"+n.texture_suffix.metallic),normalMap:u.load(n.asset_dir+"DEMO/Body"+n.texture_suffix.normal),roughnessMap:u.load(n.asset_dir+"DEMO/Body"+n.texture_suffix.roughness)},m={map:u.load(n.asset_dir+"DEMO/"+l.hair+n.texture_suffix.base_color),metalnessMap:u.load(n.asset_dir+"DEMO/"+l.hair+n.texture_suffix.metallic),normalMap:u.load(n.asset_dir+"DEMO/"+l.hair+n.texture_suffix.normal),roughnessMap:u.load(n.asset_dir+"DEMO/"+l.hair+n.texture_suffix.roughness),aoMap:u.load(n.asset_dir+"DEMO/"+l.hair+n.texture_suffix.ambient_occlusion)},x={map:u.load(n.asset_dir+"DEMO/"+l.outfit+n.texture_suffix.base_color),metalnessMap:u.load(n.asset_dir+"DEMO/"+l.outfit+n.texture_suffix.metallic),normalMap:u.load(n.asset_dir+"DEMO/"+l.outfit+n.texture_suffix.normal),roughnessMap:u.load(n.asset_dir+"DEMO/"+l.outfit+n.texture_suffix.roughness)},g={map:u.load(n.asset_dir+"DEMO/"+l.eyewear+n.texture_suffix.base_color)},y={map:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_text_suffix.base_color),metalnessMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.metallic),normalMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.normal),roughnessMap:u.load(n.asset_dir+l.background_text+"/"+l.background_text+n.texture_suffix.roughness)};(d=new p.AnimationMixer(j)).clipAction(j.animations[0]).play(),R.scale.set(n.scale.x,n.scale.y,n.scale.z),R.receiveShadow=!1,R.castShadow=!1;var M=new p.MeshBasicMaterial({...h,...n.texture_options.st_background}),k=new p.MeshStandardMaterial({...y,...n.texture_options.st_background});R.traverse(e=>{e.isMesh&&"mesh_0"==e.name?(e.castShadow=!0,e.receiveShadow=!0,e.material=M):e.isMesh&&(e.castShadow=!1,e.receiveShadow=!1,e.material=k)}),console.log("BG/Text: "),console.log(R),R.scale.set(.06,.06,.06),j.scale.set(n.scale.x,n.scale.y,n.scale.z),j.receiveShadow=!1,j.castShadow=!1;M=new p.MeshBasicMaterial({...h,...n.texture_options.st_background}),k=new p.MeshStandardMaterial({...y,...n.texture_options.st_background});var S=new p.MeshStandardMaterial({...f,...n.texture_options.st_face}),v=new p.MeshStandardMaterial({...f,...n.texture_options.st_skin}),z=new p.MeshStandardMaterial({...x,...n.texture_options.st_outfit}),P=new p.MeshStandardMaterial({...m,...n.texture_options.st_hair}),D=new p.MeshStandardMaterial({...g,...n.texture_options.st_eyewear});j.traverse(e=>{if(e.isMesh)switch(e.castShadow=!1,e.receiveShadow=!1,e.name){case"Body":case"Head_low":case"eye_low":e.material=S;break;case"Body_low":e.material=v;break;case"OM2dsdas":e.material=z;break;case"E3_low":case"eyewear":e.material=D;break;case"H3":case"hair01_low":case"hair02_low":e.material=P;break;default:e.material=v}}),console.log("Anim ST: "),console.log(j),o.add(R),o.add(j),A.a.loading(!1,{rendered_element:s.rendered_element})},loadSTFPX:async function(a,t="Walk",i){var r={asset_dir:s.asset_dir_fbx,asset_dir_anim:s.asset_dir_anim,texture_options:te.texture_options,model_suffix:te.model_suffix,texture_suffix:te.texture_suffix,texture_skin_suffix:te.texture_skin_suffix,texture_text_suffix:te.texture_text_suffix,scale:te.scale.st},n=e.extend(r,i),d={};switch(typeof a){case"object":d=a;break;case"string":default:let e=a.split("-");d={hair:e[0],eyewear:e[1],face:e[2],outfit:e[3],asset:e[4],background_text:e[5]}}I=n.asset_dir+d.background_text+"/"+d.background_text+n.model_suffix.twod,W=n.asset_dir+d.face+"/"+d.face+n.model_suffix.twod,q=n.asset_dir+d.hair+"/"+d.hair+n.model_suffix.twod,X=n.asset_dir+d.outfit+"/"+d.outfit+n.model_suffix.twod,Y=n.asset_dir+d.asset+"/"+d.asset+n.model_suffix.twod,ae=n.asset_dir+d.eyewear+"/"+d.eyewear+n.model_suffix.twod,e(s.layered_element).empty(),e(s.layered_element).append(`\n            <img src="${I}" alt="background_text">\n            <img src="${W}" alt="face">\n            <img src="${q}" alt="hair">\n            <img src="${X}" alt="outfit">\n            <img src="${Y}" alt="asset"> \n            <img src="${ae}" alt="eyewear">\n        `),e(s.rendered_element).css({backgroundImage:`url(${ae}),url(${Y}),url(${X}),url(${q}),url(${W}),url(${I})`});new w.a;const l=new b.a,_=new p.TextureLoader;A.a.loading(!0,{rendered_element:s.rendered_element}),A.a.clean(o),[G,V,J,Q,ee,j]=await Promise.all([l.loadAsync(n.asset_dir+d.face+"/"+d.face+n.model_suffix.st_fbx_anim),l.loadAsync(n.asset_dir+d.hair+"/"+d.hair+n.model_suffix.st_fbx_anim),l.loadAsync(n.asset_dir+d.outfit+"/"+d.outfit+n.model_suffix.st_fbx_anim),l.loadAsync(n.asset_dir+d.asset+"/"+d.asset+n.model_suffix.st_fbx),l.loadAsync(n.asset_dir+d.eyewear+"/"+d.eyewear+n.model_suffix.st_fbx_anim),l.loadAsync(n.asset_dir_anim+t+n.model_suffix.st_fbx)]),console.log([R,G,V,J,Q,ee,j]);const c={map:_.load(n.asset_dir+d.face+"/"+d.face+n.texture_suffix.base_color),metalnessMap:_.load(n.asset_dir+d.face+"/"+d.face+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+d.face+"/"+d.face+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+d.face+"/"+d.face+n.texture_suffix.roughness)},x={map:_.load(n.asset_dir+d.hair+"/"+d.hair+n.texture_suffix.base_color),metalnessMap:_.load(n.asset_dir+d.hair+"/"+d.hair+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+d.hair+"/"+d.hair+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+d.hair+"/"+d.hair+n.texture_suffix.roughness),aoMap:_.load(n.asset_dir+d.hair+"/"+d.hair+n.texture_suffix.ambient_occlusion)},g={map:_.load(n.asset_dir+d.outfit+"/"+d.outfit+n.texture_suffix.base_color),metalnessMap:_.load(n.asset_dir+d.outfit+"/"+d.outfit+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+d.outfit+"/"+d.outfit+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+d.outfit+"/"+d.outfit+n.texture_suffix.roughness)},y={map:_.load(n.asset_dir+"Bodybase/Bodybase"+n.texture_suffix.base_color),metalnessMap:_.load(n.asset_dir+"Bodybase/Bodybase"+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+"Bodybase/Bodybase"+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+"Bodybase/Bodybase"+n.texture_suffix.roughness)},M=(_.load(n.asset_dir+d.asset+"/"+d.asset+n.texture_suffix.base_color),_.load(n.asset_dir+d.asset+"/"+d.asset+n.texture_suffix.metallic),_.load(n.asset_dir+d.asset+"/"+d.asset+n.texture_suffix.normal),_.load(n.asset_dir+d.asset+"/"+d.asset+n.texture_suffix.roughness),{map:_.load(n.asset_dir+d.eyewear+"/"+d.eyewear+n.texture_suffix.base_color),metalnessMap:_.load(n.asset_dir+d.eyewear+"/"+d.eyewear+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+d.eyewear+"/"+d.eyewear+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+d.eyewear+"/"+d.eyewear+n.texture_suffix.roughness),alphaMap:_.load(n.asset_dir+d.eyewear+"/"+d.eyewear+n.texture_suffix.alpha)}),k={map:_.load(n.asset_dir+d.background_text+"/"+d.background_text+n.texture_text_suffix.base_color),metalnessMap:_.load(n.asset_dir+d.background_text+"/"+d.background_text+n.texture_suffix.metallic),normalMap:_.load(n.asset_dir+d.background_text+"/"+d.background_text+n.texture_suffix.normal),roughnessMap:_.load(n.asset_dir+d.background_text+"/"+d.background_text+n.texture_suffix.roughness)};var S=new p.Object3D;S.add(G),S.add(V),S.add(J),S.add(ee),S.add(j),console.log("All objs: (face, hair, outfit, eye, anim)"),console.log(S),S.scale.set(n.scale.x,n.scale.y,n.scale.z);(u=new p.AnimationMixer(G)).clipAction(j.animations[0]).play();(h=new p.AnimationMixer(V)).clipAction(j.animations[0]).play();(f=new p.AnimationMixer(J)).clipAction(j.animations[0]).play();(m=new p.AnimationMixer(ee)).clipAction(j.animations[0]).play(),j.scale.set(n.scale.x,n.scale.y,n.scale.z),j.receiveShadow=!1,j.castShadow=!1,S.receiveShadow=!0,S.castShadow=!0;new p.MeshStandardMaterial({...k,...n.texture_options.st_background});var v=new p.MeshStandardMaterial({...c,...n.texture_options.st_face}),z=new p.MeshStandardMaterial({...y,...n.texture_options.st_skin}),P=new p.MeshStandardMaterial({...g,...n.texture_options.st_outfit}),D=new p.MeshStandardMaterial({...x,...n.texture_options.st_hair}),H=new p.MeshStandardMaterial({...M,...n.texture_options.st_eyewear});S.traverse(e=>{if(e.castShadow=!0,e.receiveShadow=!0,e.isMesh)switch(e.castShadow=!0,e.receiveShadow=!0,e.name){case"face":case"head":e.material=v;break;case"body":e.material=z;break;case"outfit":e.material=P;break;case"eyewear":e.material=H;break;case"hair":case"hair_bot":case"hair_top":e.material=D,e.material.side=p.DoubleSide;break;default:e.material=z}}),console.log("Anim ST: "),console.log(j),o.add(S),setTimeout((function(){e(s.rendered_element).css({backgroundImage:`url(${I})`}),A.a.loading(!1,{rendered_element:s.rendered_element})}),800)},loadDefaultBg:async function(a){e.extend({},a);const t=new w.a;[B]=await Promise.all([t.loadAsync(s.default_bg)]),E=B.scene.children[0],o.add(E),E.receiveShadow=!1,E.castShadow=!0,E.scale.set(10,10,10),E.position.set(0,5,0),E.material=new p.MeshLambertMaterial({color:33709,emissive:33709,emissiveIntensity:1}),console.log(E)},setup:{all:function(a){e.extend({},a);s.setup.renderer(),s.setup.scene(),s.setup.camera(),s.setup.post_processing(),s.setup.controls(),s.setup.lights(te.light_options)},lights:function(a){var t={environment_light:{enable:!0,options:{dir:"assets/hdr/",hdri_file:"provence_studio_1k_edit.hdr",enable_background:!1,intensity:1}},ambient_light:{enable:!0,options:{color:16777215,intensity:.1}},hemisphere_light:{enable:!1,options:{skyColor:16777215,groundColor:16777215,intensity:1,position:{x:0,y:50,z:0}}},directional_light:{enable:!1,options:{}},key_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:0,intensity:1.95,angle:Math.PI/2,penumbra:0,cast_shadow:!0,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:4,y:3,z:4},target:{x:0,y:2,z:0}}},fill_light:{enable:1,helper:0,options:{debug_color:16711680,color:16769193,decay:0,distance:50,intensity:.5,angle:Math.PI/3,penumbra:0,cast_shadow:!0,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:-7,y:3,z:6},target:{x:0,y:4,z:0}}},back_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:50,intensity:.9,angle:Math.PI/3,penumbra:0,cast_shadow:!0,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:0,y:2,z:-4},target:{x:0,y:2,z:0}}},top_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:50,intensity:.4,angle:Math.PI/5,penumbra:0,cast_shadow:!0,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:0,y:8,z:3},target:{x:0,y:4,z:1}}},bottom_light:{enable:1,helper:0,options:{debug_color:16711680,color:16777215,decay:0,distance:50,intensity:.4,angle:Math.PI/3,penumbra:0,cast_shadow:!0,shadow_map_size_width:512,shadow_map_size_height:512,shadow_camera_near:10,shadow_camera_far:200,shadow_focus:.2,position:{x:0,y:-1,z:2},target:{x:0,y:3,z:0}}}},i=e.extend(t,a);if(i.environment_light.enable&&(new g.a).setPath(i.environment_light.options.dir).load(i.environment_light.options.hdri_file,(function(e){e.mapping=p.EquirectangularReflectionMapping,i.environment_light.options.enable_background&&(o.background=e),o.environment=e})),H.ambient=A.a.create_light.amb_light(i.ambient_light),i.ambient_light.enable&&o.add(H.ambient),H.key=A.a.create_light.spot_light(i.key_light),i.key_light.enable&&(o.add(H.key),o.add(H.key.target),i.key_light.helper&&console.log(H.key)),H.fill=A.a.create_light.spot_light(i.fill_light),i.fill_light.enable&&(o.add(H.fill),o.add(H.fill.target),i.fill_light.helper&&console.log(H.fill)),H.back=A.a.create_light.spot_light(i.back_light),i.back_light.enable&&(o.add(H.back),o.add(H.back.target),i.back_light.helper&&console.log(H.back)),H.top=A.a.create_light.spot_light(i.top_light),i.top_light.enable&&(o.add(H.top),o.add(H.top.target),i.top_light.helper&&console.log(H.top)),H.top2=A.a.create_light.spot_light(i.top2_light),i.top2_light.enable&&(o.add(H.top2),o.add(H.top2.target),i.top2_light.helper&&console.log(H.top2)),H.bottom=A.a.create_light.spot_light(i.bottom_light),i.bottom_light.enable&&(o.add(H.bottom),o.add(H.bottom.target),i.bottom_light.helper&&console.log(H.bottom)),H.hand=A.a.create_light.spot_light(i.hand_light),i.hand_light.enable&&(o.add(H.hand),o.add(H.hand.target),i.hand_light.helper&&console.log(H.hand)),i.hemisphere_light.enable&&(H.hemi=new p.HemisphereLight(16777215,16777215,i.hemisphere_light.options.intensity),H.hemi.position.set(0,50,0),o.add(H.hemi),s.helper)){const e=new p.HemisphereLightHelper(H.hemi,10);o.add(e)}if(i.directional_light.enable){H.dir=new p.DirectionalLight(16777215,.8),H.dir.color.setHSL(.1,1,.95),H.dir.position.set(-1,1.75,1),H.dir.position.multiplyScalar(100),i.light.dir&&o.add(H.dir),H.dir.castShadow=!0,H.dir.shadow.mapSize.width=2048,H.dir.shadow.mapSize.height=2048;const e=50;if(H.dir.shadow.camera.left=-e,H.dir.shadow.camera.right=e,H.dir.shadow.camera.top=e,H.dir.shadow.camera.bottom=-e,H.dir.shadow.camera.far=3500,H.dir.shadow.bias=-1e-4,i.light.dir&&s.helper){const e=new p.DirectionalLightHelper(H.dir,10);o.add(e)}}},scene:function(a){e.extend({},a);(o=new p.Scene).fog=new p.FogExp2(16777215,0)},renderer:function(a){e.extend({},a);(r=new p.WebGLRenderer({alpha:!0,antialias:!0,powerPreference:"default"})).setPixelRatio(window.devicePixelRatio),r.setSize(s.dom_width,s.dom_height),r.shadowMap.enabled=!0,r.shadowMap.type=p.PCFSoftShadowMap,r.physicallyCorrectLights=!0,r.outputEncoding=p.sRGBEncoding,e(s.rendered_element).append(r.domElement),window.addEventListener("resize",s.setup.onWindowResize)},post_processing:function(a){var t={lut_asset:te.post_processing.lut_asset,lut_file:te.post_processing.lut_file},n=e.extend(t,a);const d=new p.WebGLRenderTarget({minFilter:p.LinearFilter,magFilter:p.LinearFilter,format:p.RGBAFormat,encoding:p.sRGBEncoding});(l=new y.a(r,d)).setPixelRatio(window.devicePixelRatio),l.setSize(s.dom_width,s.dom_height);const u=new M.a(o,i),h=new S.a(k.a);new S.a(D.a);l.addPass(u),l.addPass(h),_=new v.a,l.addPass(_);const f=new z.a,m=new P.a;/\.CUBE$/i.test(n.lut_file)?f.load(n.lut_asset+n.lut_file,(function(e){c=e})):m.load(n.lut_asset+n.lut_file,(function(e){c=e}))},onWindowResize:function(a){e.extend({},a);i.aspect=s.dom_width/s.dom_height,i.updateProjectionMatrix(),r.setSize(s.dom_width,s.dom_height),l&&l.setSize(s.dom_width,s.dom_height),s.setup.animate()},camera:function(a){e.extend({},a);(i=new p.PerspectiveCamera(85,s.dom_width/s.dom_height,.01,1e3)).position.set(1.42,1.47,5.05),i.lookAt(0,12,0)},controls:function(a){var t=e.extend({minDistance:4,maxDistance:9,zoomSpeed:1,rotateSpeed:1,enableDamping:!0,enablePan:!1,dampingFactor:.1,autoRotate:!0,autoRotateSpeed:.5,minPolarAngle:.8,maxPolarAngle:1.8,target:{x:0,y:3,z:0}},a);(n=new x.a(i,r.domElement)).minDistance=t.minDistance,n.maxDistance=t.maxDistance,n.zoomSpeed=t.zoomSpeed,n.rotateSpeed=t.rotateSpeed,n.enableDamping=t.enableDamping,n.enablePan=t.enablePan,n.dampingFactor=t.dampingFactor,n.autoRotate=t.autoRotate,n.autoRotateSpeed=t.autoRotateSpeed,n.minPolarAngle=t.minPolarAngle,n.maxPolarAngle=t.maxPolarAngle,n.target.set(t.target.x,t.target.y,t.target.z)},helpers:function(a){var t=e.extend({gridHelper:{enable:!1,size:100,divisions:100,colorCenterLine:255,colorGrid:8421504}},a);if(t.gridHelper.enable){const e=new p.GridHelper(t.gridHelper.size,t.gridHelper.divisions,t.gridHelper.colorCenterLine,t.gridHelper.colorGrid);o.add(e)}},post_renderer:function(a){e.extend({},a);s.setup.animate(),n.addEventListener("change",(function(){s.setup.render()})),n.update()},render:function(a){e.extend({},a);l?l.render(o,i):r.render(o,i)},animate:function(e){requestAnimationFrame(s.setup.animate);const a=O.getDelta();R&&R.lookAt(i.position.x+1.5,i.position.y-3.5,i.position.z+.5),d&&d.update(a),u&&u.update(a),f&&f.update(a),h&&h.update(a),m&&m.update(a),s.callback(),s.setup.render(),c&&(_.enable=te.post_processing.lutPass_options.enable,_.lut=c.texture,_.intensity=te.post_processing.lutPass_options.intensity)}},callback:function(a){e.extend({},a)},switch:function(a){var t={asset_dir:s.asset_dir,texture_options:te.texture_options,texture_suffix:te.texture_suffix,texture_skin_suffix:te.texture_skin_suffix};e.extend(t,a);e("body").append('\n        <div class="controls">\n\t\t\t<input type="checkbox" id="switch_avatar" class="switch_avatar">\n\t\t\t<label for="switch_avatar">Switch to <span class="dim">3</span>D</label>\n\t\t</div>\n        ');new URL(window.location.href).searchParams.get("dim");e(s.switch_element).length,e(s.switch_element).on("click",(function(){e(s.switch_element).is(":checked")?(console.log("A"),e(s.rendered_element).removeClass("active"),e(s.layered_element).addClass("active"),e(s.switch_element+" + label .dim").html(3)):(console.log("B"),e(s.layered_element).removeClass("active"),e(s.rendered_element).addClass("active"),e(s.switch_element+" + label .dim").html(2))}))}};var se={freeCamera:()=>{n.minDistance=0,n.maxDistance=1/0,n.zoomSpeed=1,n.rotateSpeed=1,n.enableDamping=!1,n.enablePan=!0,n.autoRotate=!0,n.autoRotateSpeed=1,n.maxPolarAngle=Math.PI},getCamera:()=>i,getControls:()=>n,getObject:e=>{switch(e){case"fake_cam_obj":return fake_cam_obj;case"smt_background_obj":return;case"smt_avatar_obj":return T;case"starter_background_obj":return R;case"starter_face_obj":return G;case"starter_hair_obj":return V;case"starter_outfit_obj":return J;case"starter_asset_obj":return Q;case"starter_eyewear_obj":return ee;case"light.hemi":return H.hemi;case"light.dir":return H.dir;case"light.key":return H.key;case"light.fill":return H.fill;case"light.back":return H.back;case"light.top":return H.top;case"light.bottom":return H.bottom}},watch:e=>(s.callback=function(){console.log(e)},"[ debug watch started ]"),endWatch:()=>(s.callback=function(){},"[ debug watch ended ]")}}).call(this,t(6))}});