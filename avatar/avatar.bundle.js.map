{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/avatar/index.js","webpack:///./src/avatar/js/avatar/_helper.js","webpack:///./src/avatar/js/avatar/main.js","webpack:///./src/avatar/js/index.js","webpack:///./src/avatar/scss/index.scss","webpack:///./src/setup/config.js"],"names":["helper","create_light","environment_light","options","defaults","enable","dir","hdri_file","enable_background","intensity","settings","$","extend","THREE","setPath","load","texture","mapping","scene","background","environment","point_light","debug_color","color","decay","distance","physically_correct","power","shadow_bias","map_size_width","map_size_height","camera_near","camera_far","position","x","y","z","sphere_light","obj_light","add","castShadow","shadow","bias","set","dir_light","light_dir","setHSL","multiplyScalar","mapSize","width","height","d","camera","left","right","top","bottom","far","web3d","light_dir_helper","amb_light","spot_light","angle","Math","PI","penumbra","cast_shadow","shadow_map_size_width","shadow_map_size_height","shadow_camera_near","shadow_camera_far","shadow_focus","target","near","focus","receiveShadow","lightHelper","shadowCameraHelper","loading","enableLoading","rendered_element","className","addClass","css","opacity","removeClass","clean","avatar","debug","renderer","controls","mixer","composer","lutPass","lutMap","mixer_face","mixer_hair","mixer_outfit","mixer_asset","mixer_eyewear","light","hemi","key","fill","back","top2","hand","clock","frustumSize","test_background_data","test_background_obj","smt_background_data","smt_background_obj","smt_background_2d","smt_avatar_data","smt_avatar_obj","smt_avatar_2d","starter_all_obj","starter_anim_obj","starter_background_data","starter_background_obj","starter_background_2d","starter_face_data","starter_face_obj","starter_face_2d","starter_hair_data","starter_hair_obj","starter_hair_2d","starter_outfit_data","starter_outfit_obj","starter_outfit_2d","starter_asset_data","starter_asset_obj","starter_asset_2d","starter_eyewear_data","starter_eyewear_obj","starter_eyewear_2d","_DEFAULT","layered_element","switch_element","asset_dir","asset_dir_fbx","asset_dir_anim","scale","smt","st","texture_options","smt_skin","aoMapIntensity","smt_outfit","emissiveIntensity","normalScale","smt_teeth","roughness","smt_hair","aoMap","st_background","st_text","st_face","st_skin","envMapIntensity","st_hair","st_outfit","st_asset","st_eyewear","transparent","model_suffix","st_fbx","st_fbx_anim","twod","texture_suffix","base_color","metallic","normal","ambient_occlusion","emissive","alpha","scattering","thickness","sss","texture_skin_suffix","texture_text_suffix","post_processing","lut_asset","lut_file","lutPass_options","light_options","ambient_light","hemisphere_light","skyColor","groundColor","directional_light","key_light","fill_light","back_light","top_light","top2_light","bottom_light","hand_light","default_bg","dom_width","dom_height","init","innerWidth","innerHeight","setup","all","post_renderer","helpers","loadSMT","smt_code","empty","append","fbxLoader","FBXLoader","texLoader","Promise","loadAsync","skin_texture","map","metalnessMap","normalMap","roughnessMap","outfit_texture","emissiveMap","action","clipAction","animations","play","texture_skin","texture_outfit","texture_teeth","texture_hair","traverse","o","isMesh","indexOf","name","material","loadST","st_code","obj_st","array_st","split","glbLoader","GLTFLoader","children","background_texture","face_texture","hair_texture","skinin_texture","asset_texture","eyewear_texture","alphaMap","text_texture","texture_background","texture_text","console","log","texture_face","texture_skinin","texture_asset","texture_eyewear","loadSTDEMO","anim_code","body_texture","loadSTFPX","backgroundImage","starter_anim_default","starter_anim_opt1_obj","starter_anim_opt2_obj","starter_anim_opt3_obj","starter_anim_asset","action_face","action_hair","action_outfit","action_asset","action_eyewear","metalness","side","setTimeout","loadDefaultBg","lights","RGBELoader","ambient","light_hemi_helper","fog","antialias","powerPreference","setPixelRatio","window","devicePixelRatio","setSize","shadowMap","enabled","type","physicallyCorrectLights","outputEncoding","domElement","addEventListener","onWindowResize","minFilter","magFilter","format","encoding","sRGBEncoding","EffectComposer","renderPass","RenderPass","fxaaPass","ShaderPass","FXAAShader","shaderPass","GammaCorrectionShader","addPass","LUTPass","LUTCUBELoader","LUTCubeLoader","LUT3DLLOADER","LUT3dlLoader","test","result","aspect","updateProjectionMatrix","animate","lookAt","minDistance","maxDistance","zoomSpeed","rotateSpeed","enableDamping","enablePan","dampingFactor","autoRotate","autoRotateSpeed","minPolarAngle","maxPolarAngle","OrbitControls","gridHelper","size","divisions","colorCenterLine","colorGrid","render","update","requestAnimationFrame","delta","getDelta","callback","lut","switch","url","URL","location","href","dim","searchParams","get","length","on","is","html","freeCamera","Infinity","getCamera","getControls","getObject","obj_name","fake_cam_obj","watch","object_to_watch","endWatch","stdemo_code","stfpx_code","prop","config","widthTriggerScale","widthDesktopSafe","widthDesktop","widthMobile","heightDesktop","heightMobile","func","isMobile","device"],"mappings":"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","file":"avatar.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"0\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"./js/index.js\";\r\nimport \"./scss/index.scss\";","import * as THREE from 'three';\r\n\r\nvar helper = {\r\n    create_light: {\r\n        environment_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                options: {\r\n                    dir: \"assets/hdr/\",\r\n                    hdri_file: \"provence_studio_1k_edit.hdr\",\r\n                    enable_background: false,\r\n                    intensity: 1,\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            new THREE.RGBELoader()\r\n                .setPath(settings.dir)\r\n                .load(settings.hdri_file, function (texture) {\r\n                    texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                    if (settings.enable_background) {\r\n                        scene.background = texture;\r\n                    }\r\n                    scene.environment = texture;\r\n                });\r\n        },\r\n        point_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            var sphere_light = new THREE.SphereGeometry(0.2, 32, 32);\r\n\r\n            if (settings.options) {\r\n                var obj_light = new THREE.PointLight(\r\n                    settings.options.color, \r\n                    settings.options.intensity, \r\n                    settings.options.distance,\r\n                    settings.options.decay,\r\n                    settings.options.physically_correct,\r\n                );\r\n                if (settings.helper) {\r\n                    obj_light.add(new THREE.Mesh(\r\n                        sphere_light, \r\n                        new THREE.MeshBasicMaterial({ color: settings.options.debug_color })\r\n                    ));\r\n                }\r\n                obj_light.castShadow = true;\r\n                obj_light.shadow.bias = settings.options.shadow_bias;\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n    \r\n                return obj_light\r\n            }\r\n\r\n        },\r\n        dir_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n\r\n            if (settings.enable) {\r\n                light_dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light_dir.color.setHSL(0.1, 1, 0.95);\r\n                light_dir.position.set(- 1, 1.75, 1);\r\n                light_dir.position.multiplyScalar(100);\r\n                if (settings.light_dir) {\r\n                    scene.add(light_dir);\r\n                }\r\n\r\n                light_dir.castShadow = true;\r\n\r\n                light_dir.shadow.mapSize.width = 2048;\r\n                light_dir.shadow.mapSize.height = 2048;\r\n\r\n                const d = 50;\r\n\r\n                light_dir.shadow.camera.left = - d;\r\n                light_dir.shadow.camera.right = d;\r\n                light_dir.shadow.camera.top = d;\r\n                light_dir.shadow.camera.bottom = - d;\r\n\r\n                light_dir.shadow.camera.far = 3500;\r\n                light_dir.shadow.bias = - 0.0001;\r\n\r\n                if (settings.light_dir && web3d.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light_dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        },\r\n        amb_light: function(options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    color: 0x404040,\r\n                    intensity: 0.1\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            if (settings.enable) {\r\n                var obj_light = new THREE.AmbientLight(settings.options.color, settings.options.intensity);\r\n                return obj_light;\r\n            }\r\n        },\r\n        spot_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 0,\r\n                    intensity: .6,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    },\r\n                    target: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            \r\n            if (settings.enable) {\r\n                var obj_light = new THREE.SpotLight( \r\n                    settings.options.color,  \r\n                    settings.options.intensity, \r\n                    settings.options.distance, \r\n                    settings.options.angle, \r\n                    settings.options.penumbra,  \r\n                    settings.options.decay\r\n                );\r\n\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n                \r\n                obj_light.angle = settings.options.angle;\r\n                obj_light.penumbra = settings.options.penumbra;\r\n                obj_light.decay = settings.options.decay;\r\n                obj_light.distance = settings.options.distance;\r\n    \r\n                obj_light.castShadow = settings.options.cast_shadow;\r\n                // obj_light.shadow.mapSize.width = settings.options.shadow_map_size_width;\r\n                // obj_light.shadow.mapSize.height = settings.options.shadow_map_size_height;\r\n                obj_light.shadow.camera.near = settings.options.shadow_camera_near;\r\n                obj_light.shadow.camera.far = settings.options.shadow_camera_far;\r\n                obj_light.shadow.focus = settings.options.shadow_focus;\r\n\r\n                obj_light.receiveShadow = true;\r\n                obj_light.castShadow = true;\r\n\r\n                obj_light.target.position.set(\r\n                    settings.options.target.x, \r\n                    settings.options.target.y, \r\n                    settings.options.target.z\r\n                )\r\n\r\n                // obj_light.target.x =  settings.options.target.x; \r\n                // obj_light.target.y =  settings.options.target.y; \r\n                // obj_light.target.z =  settings.options.target.z; \r\n                //     settings.options.target.y, \r\n                //     settings.options.target.z, \r\n                // ;\r\n\r\n                // console.log(obj_light);\r\n                \r\n                if (settings.helper) {\r\n                    var lightHelper = new THREE.SpotLightHelper( obj_light );\r\n                    var shadowCameraHelper = new THREE.CameraHelper( obj_light.shadow.camera );\r\n                    obj_light.add(lightHelper);\r\n                    obj_light.add(shadowCameraHelper);\r\n                }\r\n\r\n                return obj_light;\r\n    \r\n            }\r\n\r\n\r\n\r\n        }\r\n    },\r\n\r\n    loading: function(enableLoading, options) {\r\n        var defaults = {\r\n            rendered_element: \"#rendered_avatar\",\r\n            className: \"loading\"\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        if (enableLoading) {\r\n            $(settings.rendered_element).addClass(settings.className);\r\n            $(settings.rendered_element + \" canvas\").css({\r\n                opacity: 0\r\n            });\r\n        } else {\r\n            $(settings.rendered_element).removeClass(settings.className);\r\n            $(settings.rendered_element + \" canvas\").css({\r\n                opacity: 1\r\n            });\r\n        }\r\n    },\r\n\r\n    clean: function(scene, options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        // CLEAN 2D\r\n\r\n\r\n        // CLEAN 3D\r\n        \r\n    },\r\n\r\n\r\n\r\n}\r\n\r\nexport default helper;","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\r\nimport { LightProbeGenerator } from 'three/examples/js/lights/LightProbeGenerator';\r\n\r\n// LOADER\r\n\r\nimport { RGBELoader } from 'three/examples/jsm/loaders/RGBELoader.js';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\r\n\r\n// POST - PROCESSING\r\n\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\r\nimport { LUTPass } from 'three/examples/jsm/postprocessing/LUTPass.js';\r\nimport { LUTCubeLoader } from 'three/examples/jsm/loaders/LUTCubeLoader.js';\r\nimport { LUT3dlLoader } from 'three/examples/jsm/loaders/LUT3dlLoader.js';\r\nimport { GammaCorrectionShader } from 'three/examples/jsm/shaders/GammaCorrectionShader.js';\r\nimport { LuminosityShader } from 'three/examples/jsm/shaders/LuminosityShader.js';\r\nimport { RoomEnvironment } from 'three/examples/jsm/environments/RoomEnvironment.js';\r\n\r\n// \r\n\r\nimport helper from \"./_helper\";\r\nimport { Object3D, TextureLoader } from 'three';\r\n\r\nvar avatar, debug;\r\n\r\nvar scene, camera, renderer, controls, \r\n    mixer, \r\n    composer, lutPass, lutMap;\r\n\r\nvar mixer_face, mixer_hair, mixer_outfit, mixer_asset, mixer_eyewear;\r\n\r\nvar light = {\r\n    hemi: {}, dir: {}, key: {}, fill: {},\r\n    back: {}, top: {}, top2: {}, bottom: {}, hand: {}\r\n}\r\n\r\nconst clock = new THREE.Clock();\r\nconst frustumSize = 600;\r\n\r\n// OBJECT 3D\r\n\r\nvar test_background_data, test_background_obj;\r\n\r\nvar smt_background_data, smt_background_obj, smt_background_2d,\r\n    smt_avatar_data, smt_avatar_obj, smt_avatar_2d;\r\n\r\nvar starter_all_obj, starter_anim_obj, \r\n    starter_background_data, starter_background_obj, starter_background_2d,\r\n    starter_face_data, starter_face_obj, starter_face_2d,\r\n    starter_hair_data, starter_hair_obj, starter_hair_2d,\r\n    starter_outfit_data, starter_outfit_obj, starter_outfit_2d,\r\n    starter_asset_data, starter_asset_obj, starter_asset_2d,\r\n    starter_eyewear_data, starter_eyewear_obj, starter_eyewear_2d;\r\n\r\n// DEFAULT SETUP \r\n\r\nconst \r\n    _DEFAULT = {\r\n        rendered_element: \"#rendered_avatar\",\r\n        layered_element: \"#layered_avatar\",\r\n        switch_element: \"#switch_avatar\",\r\n        asset_dir: \"assets/avatar/\",\r\n        asset_dir_fbx: \"assets/avatar-fbx/\",\r\n        asset_dir_anim: \"assets/avatar-fbx/anim/\",\r\n        background: \"assets/bg-default.glb\", \r\n        scale: {\r\n            smt: {x: .1, y: .1, z: .1},\r\n            st: {x: .08, y: .08, z: .08},\r\n        },\r\n        texture_options: {\r\n            smt_skin: {\r\n                aoMapIntensity: .1,\r\n            },\r\n            smt_outfit: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5)\r\n            },\r\n            smt_teeth: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5),\r\n                roughness: 3\r\n            },\r\n            smt_hair: {\r\n                aoMap: null,\r\n                aoMapIntensity: .1,\r\n                normalScale: new THREE.Vector2(1, 1),\r\n                roughness: 1.5\r\n            },\r\n            st_background: {\r\n                // aoMap: null,\r\n                // emissiveIntensity: 2,\r\n                // normalScale: new THREE.Vector2(-1, -1),\r\n                // envMapIntensity: 0,\r\n                // roughness: 0,\r\n                // transparent: true\r\n            },\r\n            st_text: {\r\n                // aoMap: null,\r\n                // emissiveIntensity: 0,\r\n                // normalScale: new THREE.Vector2(0, 0),\r\n                // envMapIntensity: .5,\r\n            },\r\n            st_face: {\r\n                aoMap: null,\r\n                // aoMapIntensity: .1,\r\n                // roughness: .8,\r\n                // envMapIntensity: .5,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n            },\r\n            st_skin: {\r\n                aoMap: null,\r\n                // aoMapIntensity: .1,\r\n                // roughness: 1,\r\n                envMapIntensity: .3,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n                \r\n            },\r\n            st_hair: {\r\n                aoMap: null,\r\n                // normalScale: new THREE.Vector2(2, 2),\r\n                // aoMapIntensity: .2,\r\n                // normalScale: new THREE.Vector2(.15, .15),\r\n                // normalScale: new THREE.Vector2(.5, .5),\r\n                // envMapIntensity: .5,\r\n                \r\n                roughness: 1.5,\r\n                // envMapIntensity: 1.2\r\n            },\r\n            st_outfit: {\r\n                aoMap: null,\r\n                normalScale: new THREE.Vector2(2, 2),\r\n                // aoMapIntensity: .1,\r\n                // emissiveIntensity: .8,\r\n                // normalScale: new THREE.Vector2(1,1),\r\n                envMapIntensity: .3,\r\n                roughness: 1.4,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n            },\r\n            st_asset: {\r\n                aoMap: null,\r\n                // aoMapIntensity: .1,\r\n                // emissiveIntensity: 1,\r\n                // normalScale: new THREE.Vector2(1.5, 1.5),\r\n                // envMapIntensity: .5,\r\n            },\r\n            st_eyewear: {\r\n                aoMap: null,\r\n                // aoMapIntensity: .1,\r\n                // emissiveIntensity: 1,\r\n                // normalScale: new THREE.Vector2(1, 1),\r\n                // envMapIntensity: .5,\r\n                transparent: true,\r\n                // dithering: true\r\n            }\r\n        },\r\n        model_suffix: {\r\n            smt: \".fbx\",\r\n            st: \".glb\",\r\n            st_fbx: \".fbx\",\r\n            st_fbx_anim: \"_G_Skin.fbx\",\r\n            twod: \".png\"\r\n        },\r\n        texture_suffix: {\r\n            base_color: \"_SHD_BaseColor.png\",\r\n            metallic: \"_SHD_Metallic.png\",\r\n            normal: \"_SHD_Normal.png\",\r\n            roughness: \"_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_SHD_AmbientOcclusion.png\",\r\n            emissive: \"_SHD_Emissive.png\",\r\n            alpha: \"_SHD_Opacity.png\",\r\n\r\n            scattering: \"_SHD_Scattering.png\",\r\n            thickness: \"_SHD_Thickness.png\",\r\n            sss: \"_SHD_SSS.png\"\r\n        },\r\n        texture_skin_suffix: {\r\n            base_color: \"_Skin_SHD_BaseColor.png\",\r\n            metallic: \"_Skin_SHD_Metallic.png\",\r\n            normal: \"_Skin_SHD_Normal.png\",\r\n            roughness: \"_Skin_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_Skin_SHD_AmbientOcclusion.png\",\r\n\r\n            scattering: \"_Skin_SHD_Scattering.png\",\r\n            thickness: \"_Skin_SHD_Thickness.png\",\r\n            sss: \"_Skin_SHD_SSS.png\"\r\n        },\r\n        texture_text_suffix: {\r\n            base_color: \"_Text_SHD_BaseColor.png\",\r\n        },\r\n        post_processing: {\r\n            lut_asset: \"assets/lut/\",\r\n            // lut_file: \"Protect_Highlights_01.cube\",\r\n            // lut_file: \"Apple_prores_422_6.A002_02161207_C015.cube\",\r\n            lut_file: \"Warm_1.siona_gut.cube\",  \r\n            lutPass_options: {\r\n                enable: true,\r\n                // intensity: .025,\r\n                intensity: .3\r\n            }\r\n        },\r\n        light_options: {\r\n            environment_light: {\r\n                enable: 1,\r\n                options: {\r\n                    dir: \"assets/hdr/\",\r\n                    hdri_file: \"provence_studio_1k_edit.hdr\", \r\n                    // hdri_file: \"spaichingen_hill_1k.hdr\",\r\n                    enable_background: false,\r\n                    // intensity: 0,\r\n                }\r\n            },\r\n            ambient_light: {\r\n                enable: 1,\r\n                options: {\r\n                    color: 0xffffff,\r\n                    intensity: .8\r\n                }\r\n            },\r\n            hemisphere_light: { \r\n                enable: 1,\r\n                options: {\r\n                    skyColor: 0xffffff,\r\n                    groundColor: 0xffffff, \r\n                    intensity: .025,\r\n                    position: {\r\n                        x: 0, y: 50, z: 0\r\n                    }\r\n                }\r\n            },\r\n            directional_light: {\r\n                enable: false,\r\n                options: {\r\n                }\r\n            },\r\n            key_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: .9,\r\n                    angle: Math.PI/ 2,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 0,\r\n                    shadow_camera_far: 500,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 4, y: 3, z: 4\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 2, z: 0\r\n                    }\r\n                }\r\n            },\r\n            fill_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: .7,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: -7, y: 3, z: 6\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 4, z: 0\r\n                    }\r\n                }\r\n            },\r\n            back_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: 1,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 0, y: 2, z: -4\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 2, z: 0\r\n                    }\r\n                }\r\n            },\r\n            top_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: 1.2,\r\n                    angle: Math.PI/ 5,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 0, y: 7, z: 3\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 4, z: 1\r\n                    }\r\n                }\r\n            },\r\n            top2_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,               \r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: .4,\r\n                    angle: Math.PI/ 5,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 0, y: 8, z: -3\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 4, z: 1\r\n                    }\r\n                }\r\n            },\r\n            bottom_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,                    \r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: .15,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: 0, y: -1, z: 2\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 3, z: 0\r\n                    }\r\n                }\r\n            },\r\n            hand_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,                    \r\n                    decay: 0,\r\n                    distance: 0,\r\n                    intensity: .1,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: false,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 2,\r\n                    position: {\r\n                        x: 3.5, y: .5, z: 0\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 1, z: 0\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n// MAIN \r\n\r\navatar = {\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    default_bg: _DEFAULT.background,\r\n    \r\n    dom_width: 100,\r\n    dom_height: 100,\r\n    asset_dir: _DEFAULT.asset_dir,\r\n    asset_dir_fbx: _DEFAULT.asset_dir_fbx, \r\n    asset_dir_anim: _DEFAULT.asset_dir_anim,\r\n\r\n    init: function(options) {\r\n        var defaults = {\r\n            rendered_element: _DEFAULT.rendered_element,\r\n            layered_element: _DEFAULT.layered_element,\r\n            switch_element: _DEFAULT.switch_element,\r\n            asset_dir: _DEFAULT.asset_dir\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        avatar.rendered_element = settings.rendered_element;\r\n        avatar.asset_dir = settings.asset_dir;\r\n        avatar.dom_width = $(avatar.rendered_element).innerWidth();\r\n        avatar.dom_height = $(avatar.rendered_element).innerHeight();\r\n\r\n        avatar.setup.all();\r\n        avatar.setup.post_renderer();\r\n        avatar.setup.helpers();\r\n\r\n    },\r\n\r\n    // =======\r\n\r\n    loadSMT: async function(smt_code, options = {}) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            texture_text_suffix: _DEFAULT.texture_text_suffix,\r\n            scale: _DEFAULT.scale.smt\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n\r\n        // LOAD 2D\r\n        smt_avatar_2d = settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.twod\r\n\r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${smt_avatar_2d}\" alt=\"${smt_code}\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n\r\n        const \r\n            fbxLoader = new FBXLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [smt_avatar_obj] = await Promise.all([\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.smt\r\n            )\r\n        ]);\r\n\r\n        // LOAD TEXTURE \r\n        const skin_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.ambient_occlusion),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.ambient_occlusion),\r\n            emissiveMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.emissive) \r\n        }\r\n\r\n        // LOAD ANIMATION\r\n        mixer = new THREE.AnimationMixer (smt_avatar_obj);\r\n        const action = mixer.clipAction(smt_avatar_obj.animations[ 0 ]);\r\n        action.play();\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        smt_avatar_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n\r\n        smt_avatar_obj.receiveShadow = true;\r\n        smt_avatar_obj.castShadow = true;\r\n\r\n        var texture_skin = new THREE.MeshStandardMaterial({\r\n            ...skin_texture,\r\n            ...settings.texture_options.smt_skin\r\n        });\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_outfit\r\n        });\r\n        var texture_teeth = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_teeth\r\n        });\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_hair\r\n        });\r\n\r\n        smt_avatar_obj.traverse((o) => {\r\n \r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n            }\r\n\r\n            if (o.isMesh && [\"mesh_6\", \"mesh_7\", \"mesh_8\", \"neck_low\", \"hand_low\", \"Face_low\"].indexOf(o.name) > -1) {\r\n                // skin                \r\n                o.material = texture_skin;\r\n            }\r\n            else if (o.isMesh) {\r\n                // outfit\r\n                o.material = texture_outfit;\r\n            } \r\n\r\n            if (o.isMesh && [\"mesh_3\", \"Hair_low\"].indexOf( o.name ) > -1) {\r\n                o.material = texture_hair;\r\n            }\r\n\r\n            if (o.isMesh && o.name == \"Teeth_low\") {\r\n                o.material = texture_teeth;\r\n            }\r\n        });\r\n        \r\n        // ADD SMT OBJ TO SCENE\r\n        scene.add(smt_avatar_obj);\r\n        \r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    loadST: async function(st_code, options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            texture_text_suffix: _DEFAULT.texture_text_suffix,\r\n            scale: _DEFAULT.scale.st\r\n        }\r\n        var settings = $.extend(defaults, options); \r\n\r\n        // st_code job\r\n        // {\r\n        // \t\"hair\": \"HM1\",\r\n        // \t\"eyewear\": \"EM2\",\r\n        // \t\"face\": \"FM3\",\r\n        // \t\"outfit\": \"OM1\",\r\n        // \t\"asset\": \"A2\",\r\n        // \t\"background_text\": \"T6\"\r\n        // }\r\n\r\n        var obj_st = {}  \r\n\r\n        // console.log(typeof st_code);\r\n\r\n        switch (typeof st_code) {\r\n            case \"object\":\r\n                obj_st = st_code;\r\n                break;\r\n            case \"string\":\r\n            default:\r\n                let array_st = st_code.split(\"-\");\r\n                obj_st = {\r\n                    \"hair\": array_st[0],\r\n                    \"eyewear\": array_st[1],\r\n                    \"face\": array_st[2],\r\n                    \"outfit\": array_st[3],\r\n                    \"asset\": array_st[4],\r\n                    \"background_text\": array_st[5]\r\n                }; \r\n                break;\r\n        }\r\n\r\n        // LOAD 2D\r\n        starter_background_2d = settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.twod;\r\n        starter_face_2d = settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.twod;\r\n        starter_hair_2d = settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.twod;\r\n        starter_outfit_2d = settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.twod;\r\n        starter_asset_2d = settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.twod;\r\n        starter_eyewear_2d = settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.twod;\r\n        \r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${starter_background_2d}\" alt=\"background_text\">\r\n            <img src=\"${starter_face_2d}\" alt=\"face\">\r\n            <img src=\"${starter_hair_2d}\" alt=\"hair\">\r\n            <img src=\"${starter_outfit_2d}\" alt=\"outfit\">\r\n            <img src=\"${starter_asset_2d}\" alt=\"asset\">\r\n            <img src=\"${starter_eyewear_2d}\" alt=\"eyewear\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n        \r\n        const \r\n            glbLoader = new GLTFLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [\r\n            starter_background_data,\r\n            starter_face_data, \r\n            starter_hair_data,\r\n            starter_outfit_data,\r\n            starter_asset_data,\r\n            starter_eyewear_data        \r\n        ] = await Promise.all([\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.st\r\n            ),\r\n        ]);\r\n\r\n        starter_background_obj = starter_background_data.scene.children[0];\r\n        starter_face_obj = starter_face_data.scene.children[0];\r\n        starter_hair_obj = starter_hair_data.scene.children[0];\r\n        starter_outfit_obj = starter_outfit_data.scene.children[0];\r\n        starter_asset_obj = starter_asset_data.scene.children[0];\r\n        starter_eyewear_obj = starter_eyewear_data.scene.children[0];\r\n\r\n        // LOAD TEXTURE\r\n        const background_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.ambient_occlusion),\r\n        }\r\n        const face_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const hair_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        // outfit_texture.map.encoding = THREE.sRGBEncoding;\r\n\r\n        // skin in outfit\r\n        const skinin_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const asset_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const eyewear_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.ambient_occlusion),\r\n            alphaMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const text_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_text_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        starter_background_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_background_obj.receiveShadow = false;\r\n        starter_background_obj.castShadow = false;\r\n        var texture_background = new THREE.MeshBasicMaterial({\r\n            ...background_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        var texture_text = new THREE.MeshStandardMaterial({\r\n            ...text_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        starter_background_obj.traverse((o) => {\r\n            if (o.isMesh && o.name == \"mesh_0\") {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_background;\r\n            } else if (o.isMesh) {\r\n                o.castShadow = false;\r\n                o.receiveShadow = false;\r\n                o.material = texture_text;\r\n            }\r\n        });\r\n        console.log(\"BG/Text: \");\r\n        console.log(starter_background_obj);\r\n        //--- FACE\r\n        starter_face_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_face_obj.receiveShadow = true;\r\n        starter_face_obj.castShadow = true;\r\n        var texture_face = new THREE.MeshStandardMaterial({\r\n            ...face_texture,\r\n            ...settings.texture_options.st_face\r\n        });\r\n        starter_face_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_face;\r\n            }\r\n        });\r\n        console.log(\"Face: \");\r\n        console.log(starter_face_obj);\r\n        //--- HAIR\r\n        starter_hair_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_hair_obj.receiveShadow = true;\r\n        starter_hair_obj.castShadow = true;\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...hair_texture,\r\n            ...settings.texture_options.st_hair\r\n        });\r\n        starter_hair_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_hair;\r\n            }\r\n        });\r\n        console.log(\"Hair: \");\r\n        console.log(starter_hair_obj);\r\n        //--- OUTFIT\r\n        starter_outfit_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_outfit_obj.receiveShadow = true;\r\n        starter_outfit_obj.castShadow = true;\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.st_outfit\r\n        });\r\n        var texture_skinin = new THREE.MeshStandardMaterial({\r\n            ...skinin_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        starter_outfit_obj.children[1].traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_outfit;\r\n            }\r\n        });\r\n        starter_outfit_obj.children[0].traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_skinin;\r\n            }\r\n        });\r\n        console.log(\"Outfit: \");\r\n        console.log(starter_outfit_obj);\r\n        //--- ASSET\r\n        starter_asset_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_asset_obj.receiveShadow = true;\r\n        starter_asset_obj.castShadow = true;\r\n        var texture_asset = new THREE.MeshStandardMaterial({\r\n            ...asset_texture,\r\n            ...settings.texture_options.st_asset\r\n        });\r\n        var texture_skinin = new THREE.MeshStandardMaterial({\r\n            ...skinin_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        starter_asset_obj.traverse((o) => {\r\n            if (o.isMesh && [\"mesh_1\"].indexOf(o.name) > -1) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_asset;\r\n            } else {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_skinin;\r\n            }\r\n        });\r\n        console.log(\"Asset: \");\r\n        console.log(starter_asset_obj);\r\n        //--- EYEWEAR\r\n        starter_eyewear_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_eyewear_obj.receiveShadow = true;\r\n        starter_eyewear_obj.castShadow = true;\r\n        var texture_eyewear = new THREE.MeshStandardMaterial({\r\n            ...eyewear_texture,\r\n            ...settings.texture_options.st_eyewear\r\n        });\r\n        starter_eyewear_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_eyewear;\r\n            }\r\n        });\r\n        console.log(\"Eyewear: \");\r\n        console.log(starter_eyewear_obj);\r\n        \r\n        // ADD ST OBJ TO SCENE\r\n\r\n        starter_all_obj = new THREE.Object3D();\r\n        starter_all_obj.add(starter_background_obj);\r\n        starter_all_obj.add(starter_face_obj);\r\n        starter_all_obj.add(starter_hair_obj);\r\n        starter_all_obj.add(starter_outfit_obj);\r\n        starter_all_obj.add(starter_asset_obj);\r\n        starter_all_obj.add(starter_eyewear_obj);\r\n\r\n        console.log(\"All: \");\r\n        console.log(starter_all_obj);\r\n\r\n        scene.add(starter_all_obj);\r\n\r\n        // scene.add(starter_background_obj);\r\n        // scene.add(starter_face_obj);\r\n        // scene.add(starter_hair_obj);\r\n        // scene.add(starter_outfit_obj);\r\n        // scene.add(starter_asset_obj);\r\n        // scene.add(starter_eyewear_obj);\r\n\r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    loadSTDEMO: async function(st_code, anim_code = \"ST_Walk\", options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            texture_text_suffix: _DEFAULT.texture_text_suffix,\r\n            scale: _DEFAULT.scale.st\r\n        }\r\n        var settings = $.extend(defaults, options); \r\n\r\n        // st_code job\r\n        // {\r\n        // \t\"hair\": \"HM1\",\r\n        // \t\"eyewear\": \"EM2\",\r\n        // \t\"face\": \"FM3\",\r\n        // \t\"outfit\": \"OM1\",\r\n        // \t\"asset\": \"A2\",\r\n        // \t\"background_text\": \"T6\"\r\n        // }\r\n\r\n        var obj_st = {}  \r\n\r\n        // console.log(typeof st_code);\r\n\r\n        switch (typeof st_code) {\r\n            case \"object\":\r\n                obj_st = st_code;\r\n                break;\r\n            case \"string\":\r\n            default:\r\n                let array_st = st_code.split(\"-\");\r\n                obj_st = {\r\n                    \"hair\": array_st[0],\r\n                    \"eyewear\": array_st[1],\r\n                    \"face\": array_st[2],\r\n                    \"outfit\": array_st[3],\r\n                    \"asset\": array_st[4],\r\n                    \"background_text\": array_st[5]\r\n                }; \r\n                break;\r\n        }\r\n\r\n        // LOAD 2D\r\n        starter_background_2d = settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.twod;\r\n        starter_face_2d = settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.twod;\r\n        starter_hair_2d = settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.twod;\r\n        starter_outfit_2d = settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.twod;\r\n        starter_asset_2d = settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.twod;\r\n        starter_eyewear_2d = settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.twod;\r\n        \r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${starter_background_2d}\" alt=\"background_text\">\r\n            <img src=\"${starter_face_2d}\" alt=\"face\">\r\n            <img src=\"${starter_hair_2d}\" alt=\"hair\">\r\n            <img src=\"${starter_outfit_2d}\" alt=\"outfit\">\r\n            <img src=\"${starter_asset_2d}\" alt=\"asset\"> \r\n            <img src=\"${starter_eyewear_2d}\" alt=\"eyewear\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n        \r\n        const \r\n            glbLoader = new GLTFLoader(),\r\n            fbxLoader = new FBXLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [\r\n            starter_background_data,\r\n            starter_anim_obj        \r\n        ] = await Promise.all([\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.st\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + \"DEMO/\" + anim_code +  settings.model_suffix.smt\r\n            ),\r\n        ]);\r\n\r\n        starter_background_obj = starter_background_data.scene.children[0];\r\n\r\n        // console.log(starter_anim_obj);\r\n\r\n        // LOAD TEXTURE\r\n        const background_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.ambient_occlusion),\r\n        } \r\n        const body_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + \"DEMO/Body\" + settings.texture_suffix.alpha),\r\n        }\r\n        const hair_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"hair\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        // outfit_texture.map.encoding = THREE.sRGBEncoding;\r\n\r\n        const eyewear_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.base_color),\r\n            // metalnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.metallic),\r\n            // normalMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.normal),\r\n            // roughnessMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + \"DEMO/\" + obj_st[\"eyewear\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const text_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_text_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        \r\n\r\n        // LOAD ANIMATION\r\n        mixer = new THREE.AnimationMixer (starter_anim_obj);\r\n        const action = mixer.clipAction(starter_anim_obj.animations[ 0 ]);\r\n        action.play();\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n\r\n\r\n        starter_background_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_background_obj.receiveShadow = false;\r\n        starter_background_obj.castShadow = false;\r\n        var texture_background = new THREE.MeshBasicMaterial({\r\n            ...background_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        var texture_text = new THREE.MeshStandardMaterial({\r\n            ...text_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        starter_background_obj.traverse((o) => {\r\n            if (o.isMesh && o.name == \"mesh_0\") {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_background;\r\n            } else if (o.isMesh) {\r\n                o.castShadow = false;\r\n                o.receiveShadow = false;\r\n                o.material = texture_text;\r\n            }\r\n        });\r\n        console.log(\"BG/Text: \");\r\n        console.log(starter_background_obj);\r\n        starter_background_obj.scale.set(.06, .06, .06)\r\n\r\n        // ====\r\n        starter_anim_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y, \r\n            settings.scale.z,\r\n        );\r\n        starter_anim_obj.receiveShadow = false;\r\n        starter_anim_obj.castShadow = false;\r\n\r\n        var texture_background = new THREE.MeshBasicMaterial({\r\n            ...background_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        var texture_text = new THREE.MeshStandardMaterial({\r\n            ...text_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n\r\n        var texture_face = new THREE.MeshStandardMaterial({\r\n            ...body_texture,\r\n            ...settings.texture_options.st_face\r\n        });\r\n        var texture_skin = new THREE.MeshStandardMaterial({\r\n            ...body_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.st_outfit\r\n        });\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...hair_texture,\r\n            ...settings.texture_options.st_hair\r\n        });\r\n        var texture_eyewear = new THREE.MeshStandardMaterial({\r\n            ...eyewear_texture,\r\n            ...settings.texture_options.st_eyewear\r\n        });\r\n\r\n        starter_anim_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = false;\r\n                o.receiveShadow = false;\r\n\r\n                // o.geometry.computeVertexNormals(false);\r\n                // console.log(o.name);\r\n                switch (o.name) {\r\n                    case \"Body\": \r\n                    case \"Head_low\": \r\n                    case \"eye_low\": \r\n                        o.material = texture_face;\r\n                        break;\r\n                    case \"Body_low\": \r\n                        o.material = texture_skin;\r\n                        break;\r\n                    case \"OM2dsdas\": \r\n                        o.material = texture_outfit;\r\n                        break;\r\n                    case \"E3_low\": \r\n                    case \"eyewear\": \r\n                        o.material = texture_eyewear;\r\n                        break;\r\n                    case \"H3\": \r\n                    case \"hair01_low\": \r\n                    case \"hair02_low\":  \r\n                        o.material = texture_hair;\r\n                        break;\r\n                    default:\r\n                        o.material = texture_skin;\r\n                        break;\r\n                }\r\n            } \r\n        });\r\n        console.log(\"Anim ST: \"); \r\n        console.log(starter_anim_obj);   \r\n        \r\n        // ADD ST OBJ TO SCENE\r\n\r\n        // starter_all_obj = new THREE.Object3D();\r\n        // starter_all_obj.add(starter_background_obj);\r\n        // starter_all_obj.add(starter_face_obj);\r\n        // starter_all_obj.add(starter_hair_obj);\r\n        // starter_all_obj.add(starter_outfit_obj);\r\n        // starter_all_obj.add(starter_asset_obj); \r\n        // starter_all_obj.add(starter_eyewear_obj);\r\n\r\n        // console.log(\"All: \");\r\n        // console.log(starter_all_obj);\r\n\r\n        scene.add(starter_background_obj);\r\n        scene.add(starter_anim_obj);\r\n        // scene.add(starter_face_obj);\r\n        // scene.add(starter_hair_obj);\r\n        // scene.add(starter_outfit_obj);\r\n        // scene.add(starter_asset_obj);\r\n        // scene.add(starter_eyewear_obj);\r\n\r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    loadSTFPX: async function(st_code, anim_code = \"Walk\", options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir_fbx,\r\n            asset_dir_anim: avatar.asset_dir_anim,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            texture_text_suffix: _DEFAULT.texture_text_suffix,\r\n            scale: _DEFAULT.scale.st\r\n        }\r\n        var settings = $.extend(defaults, options); \r\n\r\n        // st_code job\r\n        // {\r\n        // \t\"hair\": \"HM1\",\r\n        // \t\"eyewear\": \"EM2\",\r\n        // \t\"face\": \"FM3\",\r\n        // \t\"outfit\": \"OM1\",\r\n        // \t\"asset\": \"A2\",\r\n        // \t\"background_text\": \"T6\"\r\n        // }\r\n\r\n        var obj_st = {}  \r\n\r\n        // console.log(typeof st_code);\r\n\r\n        // console.log(settings);\r\n\r\n        switch (typeof st_code) {\r\n            case \"object\":\r\n                obj_st = st_code;\r\n                break;\r\n            case \"string\":\r\n            default:\r\n                let array_st = st_code.split(\"-\");\r\n                obj_st = {\r\n                    \"hair\": array_st[0],\r\n                    \"eyewear\": array_st[1],\r\n                    \"face\": array_st[2],\r\n                    \"outfit\": array_st[3],\r\n                    \"asset\": array_st[4],\r\n                    \"background_text\": array_st[5]\r\n                }; \r\n                break;\r\n        }\r\n\r\n        // console.log(obj_st);\r\n\r\n        // LOAD 2D\r\n        starter_background_2d = settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.twod;\r\n        starter_face_2d = settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.twod;\r\n        starter_hair_2d = settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.twod;\r\n        starter_outfit_2d = settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.twod;\r\n        starter_asset_2d = settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.twod;\r\n        starter_eyewear_2d = settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.twod;\r\n        \r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${starter_background_2d}\" alt=\"background_text\">\r\n            <img src=\"${starter_face_2d}\" alt=\"face\">\r\n            <img src=\"${starter_hair_2d}\" alt=\"hair\">\r\n            <img src=\"${starter_outfit_2d}\" alt=\"outfit\">\r\n            <img src=\"${starter_asset_2d}\" alt=\"asset\"> \r\n            <img src=\"${starter_eyewear_2d}\" alt=\"eyewear\">\r\n        `);\r\n        \r\n        $(avatar.rendered_element).css({\r\n            backgroundImage: `url(${starter_eyewear_2d}),url(${starter_asset_2d}),url(${starter_outfit_2d}),url(${starter_hair_2d}),url(${starter_face_2d}),url(${starter_background_2d})` \r\n        });\r\n\r\n        // LOAD 3D\r\n        \r\n        const \r\n            glbLoader = new GLTFLoader(),\r\n            fbxLoader = new FBXLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n\r\n        var \r\n            starter_anim_default,\r\n            starter_anim_opt1_obj,\r\n            starter_anim_opt2_obj,\r\n            starter_anim_opt3_obj,\r\n            starter_anim_asset;\r\n\r\n        [\r\n            // starter_background_obj,\r\n            starter_face_obj, \r\n            starter_hair_obj,\r\n            starter_outfit_obj,\r\n            starter_asset_obj,\r\n            starter_eyewear_obj,\r\n            starter_anim_default,\r\n            starter_anim_opt1_obj,\r\n            starter_anim_opt2_obj,\r\n            starter_anim_opt3_obj,\r\n            starter_anim_asset\r\n        ] = await Promise.all([\r\n            // fbxLoader.loadAsync(\r\n            //     settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.st_fbx\r\n            // ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.st_fbx_anim \r\n            ),\r\n            // fbxLoader.loadAsync(\r\n            //     settings.asset_dir_anim + \"test/FM2_G_Skin.fbx\"\r\n            // ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.st_fbx_anim\r\n            ),\r\n            // fbxLoader.loadAsync(\r\n            //     settings.asset_dir_anim + \"test/HM2_G_Skin.fbx\"\r\n            // ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.st_fbx_anim\r\n            ),\r\n            // fbxLoader.loadAsync(\r\n            //     settings.asset_dir_anim + \"test/OM2_G_Skin.fbx\"\r\n            // ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.st_fbx_anim\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.st_fbx_anim\r\n            ),\r\n            // fbxLoader.loadAsync(\r\n            //     settings.asset_dir_anim + \"test/EM2_G_Skin.fbx\"\r\n            // ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir_anim + anim_code + settings.model_suffix.st_fbx\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir_anim + \"Walk_Asset_Op01_A1_A4_A7\" + settings.model_suffix.st_fbx\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir_anim + \"Walk_Asset_Op02_A3_A5_A6\" + settings.model_suffix.st_fbx\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir_anim + \"Walk_Asset_Op03_A2_A8\" + settings.model_suffix.st_fbx\r\n            ),\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir_anim + \"Walk_\" + obj_st[\"asset\"] + settings.model_suffix.st_fbx\r\n            ),\r\n        ]);\r\n\r\n\r\n        // DECIDE ANIM \r\n\r\n        starter_anim_obj = starter_anim_default;\r\n\r\n        console.log(obj_st[\"asset\"]);\r\n\r\n        switch (obj_st[\"asset\"]) {\r\n            case \"A1\": \r\n            case \"A4\": \r\n            case \"A7\":\r\n                console.log(\"Walk_Asset_Op01_A1_A4_A7\");\r\n                starter_anim_obj = starter_anim_opt1_obj;\r\n                break;\r\n            case \"A3\":\r\n            case \"A5\":\r\n            case \"A6\": \r\n                console.log(\"Walk_Asset_Op02_A3_A5_A6\");\r\n                starter_anim_obj = starter_anim_opt2_obj;\r\n                break;\r\n            case \"A2\":\r\n            case \"A8\":\r\n                console.log(\"Walk_Asset_Op03_A2_A8\");\r\n                starter_anim_obj = starter_anim_opt3_obj;\r\n                break;\r\n            default: \r\n                console.log(\"Walk\");\r\n                starter_anim_asset = starter_anim_default;\r\n\r\n        }\r\n\r\n\r\n        console.log([\r\n            // starter_background_obj,\r\n            starter_face_obj, \r\n            starter_hair_obj,\r\n            starter_outfit_obj,\r\n            starter_asset_obj,\r\n            starter_eyewear_obj,\r\n            starter_anim_obj\r\n        ]);\r\n \r\n        // starter_background_obj = starter_background_data.scene.children[0];\r\n\r\n        // console.log(starter_anim_obj); \r\n\r\n        // LOAD TEXTURE\r\n        // LOAD TEXTURE\r\n        // const background_texture = {\r\n        //     map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.base_color),\r\n        //     metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n        //     normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n        //     roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n        //     // aoMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.ambient_occlusion),\r\n        // }\r\n        const face_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const hair_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        // outfit_texture.map.encoding = THREE.sRGBEncoding;\r\n\r\n        // skin in outfit\r\n        const skinin_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const asset_texture = {\r\n            // color: 0x000000,\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const eyewear_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.ambient_occlusion),\r\n            alphaMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const text_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_text_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n\r\n        var starter_all_obj = new THREE.Object3D();\r\n\r\n        // var starter_plane_obj = new THREE.Mesh(\r\n        //     new THREE.PlaneGeometry( 20, 20 ),\r\n        //     new THREE.MeshStandardMaterial( {color: 0xcccccc, side: THREE.DoubleSide} )\r\n        // );\r\n\r\n        // starter_plane_obj.position.set();\r\n        // starter_plane_obj.rotation.x = Math.PI / 2;\r\n        // starter_plane_obj.rotation.z = 90;\r\n        // starter_plane_obj.receiveShadow = true;\r\n        // starter_plane_obj.castShadow = true;\r\n\r\n        starter_all_obj.add(starter_face_obj);\r\n        starter_all_obj.add(starter_hair_obj);\r\n        starter_all_obj.add(starter_outfit_obj);\r\n        starter_all_obj.add(starter_asset_obj);\r\n        starter_all_obj.add(starter_eyewear_obj);\r\n        starter_all_obj.add(starter_anim_obj);\r\n\r\n        console.log(\"All objs: (face, hair, outfit, assets, eye, anim)\")\r\n        console.log(starter_all_obj);\r\n\r\n        starter_all_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        \r\n\r\n        // LOAD ANIMATION\r\n        // mixer = new THREE.AnimationMixer (starter_outfit_obj);\r\n        // const action = mixer.clipAction(starter_anim_obj.animations[ 0 ]);\r\n        // action.play();\r\n\r\n        mixer_face = new THREE.AnimationMixer(starter_face_obj);\r\n        const action_face = mixer_face.clipAction(starter_anim_obj.animations[0]);\r\n        action_face.play();\r\n\r\n        mixer_hair = new THREE.AnimationMixer(starter_hair_obj);\r\n        const action_hair = mixer_hair.clipAction(starter_anim_obj.animations[0]);\r\n        action_hair.play();\r\n\r\n        mixer_outfit = new THREE.AnimationMixer(starter_outfit_obj);\r\n        const action_outfit = mixer_outfit.clipAction(starter_anim_obj.animations[0]);\r\n        action_outfit.play();\r\n\r\n        mixer_asset = new THREE.AnimationMixer(starter_asset_obj);\r\n        const action_asset = mixer_asset.clipAction(starter_anim_asset.animations[0]);\r\n        action_asset.play();\r\n\r\n        mixer_eyewear = new THREE.AnimationMixer(starter_eyewear_obj);\r\n        const action_eyewear = mixer_eyewear.clipAction(starter_anim_obj.animations[0]);\r\n        action_eyewear.play();\r\n        \r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n\r\n\r\n        // starter_background_obj.scale.set(\r\n        //     settings.scale.x,\r\n        //     settings.scale.y,\r\n        //     settings.scale.z,\r\n        // );\r\n        // starter_background_obj.receiveShadow = false;\r\n        // starter_background_obj.castShadow = false;\r\n        // var texture_background = new THREE.MeshBasicMaterial({\r\n        //     ...background_texture,\r\n        //     ...settings.texture_options.st_background \r\n        // });\r\n        // var texture_text = new THREE.MeshStandardMaterial({\r\n        //     ...text_texture,\r\n        //     ...settings.texture_options.st_background\r\n        // });\r\n        // starter_background_obj.traverse((o) => {\r\n        //     if (o.parent.isGroup && o.parent.name == \"group2\") {\r\n        //         o.castShadow = false;\r\n        //         o.receiveShadow = false;\r\n        //         o.material = texture_text;\r\n        //     } else if (o.isMesh) {\r\n        //         o.castShadow = true;\r\n        //         o.receiveShadow = true;\r\n        //         o.material = texture_background;\r\n        //     }\r\n        // });\r\n        // console.log(\"BG/Text: \");\r\n        // console.log(starter_background_obj);\r\n        // starter_background_obj.scale.set(.06, .06, .06)\r\n\r\n        // ====\r\n        starter_anim_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y, \r\n            settings.scale.z,\r\n        );\r\n        starter_anim_obj.receiveShadow = false;\r\n        starter_anim_obj.castShadow = false;\r\n        starter_all_obj.receiveShadow = true;\r\n        starter_all_obj.castShadow = true;\r\n\r\n        // var texture_background = new THREE.MeshBasicMaterial({\r\n        //     ...background_texture,\r\n        //     ...settings.texture_options.st_background\r\n        // });\r\n        var texture_text = new THREE.MeshStandardMaterial({\r\n            ...text_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n\r\n        var texture_face = new THREE.MeshStandardMaterial({\r\n            ...face_texture,\r\n            ...settings.texture_options.st_face\r\n        });\r\n        var texture_skin = new THREE.MeshStandardMaterial({\r\n            ...skinin_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.st_outfit\r\n        });\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...hair_texture,\r\n            ...settings.texture_options.st_hair\r\n        });\r\n        var texture_eyewear = new THREE.MeshStandardMaterial({\r\n            ...eyewear_texture,\r\n            ...settings.texture_options.st_eyewear\r\n        });\r\n        var texture_asset = new THREE.MeshStandardMaterial({\r\n            ...asset_texture,\r\n            ...settings.texture_options.st_asset\r\n        });\r\n\r\n\r\n        if (obj_st[\"asset\"] == \"A8\") {\r\n            var texture_asset = new THREE.MeshStandardMaterial({\r\n                ...texture_asset,\r\n                metalness: .6\r\n            });\r\n        }\r\n\r\n        starter_all_obj.traverse((o) => {\r\n            o.castShadow = true;\r\n            o.receiveShadow = true;\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n\r\n                // o.geometry.computeVertexNormals(false);\r\n                // console.log(o.name);\r\n                switch (o.name) {\r\n                    case \"face\": \r\n                    case \"head\": \r\n                        o.material = texture_face;\r\n                        break;\r\n                    case \"body\": \r\n                        o.material = texture_skin;\r\n                        break;\r\n                    case \"outfit\": \r\n                        o.material = texture_outfit;\r\n                        break;\r\n                    case \"eyewear\": \r\n                        o.material = texture_eyewear;\r\n                        break;\r\n                    case \"hair\":  \r\n                    case \"hair_bot\":  \r\n                    case \"hair_top\":  \r\n                        o.material = texture_hair;\r\n                        o.material.side = THREE.DoubleSide\r\n                        break;\r\n                    case \"asset\": \r\n                        o.material = texture_asset;\r\n                        break;\r\n                    default:\r\n                        o.material = texture_skin;\r\n                        break;\r\n                }\r\n            } \r\n        });\r\n        console.log(\"Anim ST: \"); \r\n        console.log(starter_anim_obj);   \r\n        \r\n        // ADD ST OBJ TO SCENE\r\n\r\n        // starter_all_obj = new THREE.Object3D();\r\n        // starter_all_obj.add(starter_background_obj);\r\n        // starter_all_obj.add(starter_face_obj);\r\n        // starter_all_obj.add(starter_hair_obj);\r\n        // starter_all_obj.add(starter_outfit_obj);\r\n        // starter_all_obj.add(starter_asset_obj); \r\n        // starter_all_obj.add(starter_eyewear_obj);\r\n\r\n        // console.log(\"All: \");\r\n        // console.log(starter_all_obj);\r\n\r\n        // scene.add(starter_background_obj);\r\n        // scene.add(starter_plane_obj); \r\n        scene.add(starter_all_obj);\r\n        // scene.add(starter_face_obj);\r\n        // scene.add(starter_hair_obj);\r\n        // scene.add(starter_outfit_obj);\r\n        // scene.add(starter_asset_obj);\r\n        // scene.add(starter_eyewear_obj);\r\n\r\n\r\n        \r\n        setTimeout(function(){\r\n            $(avatar.rendered_element).css({\r\n                backgroundImage: `url(${starter_background_2d})` \r\n            });\r\n            helper.loading(false, {rendered_element: avatar.rendered_element});\r\n        }, 800)\r\n\r\n    },\r\n\r\n    // ========\r\n\r\n    loadDefaultBg: async function (options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        const glbLoader = new GLTFLoader();\r\n\r\n        [test_background_data] = await Promise.all([\r\n            glbLoader.loadAsync(avatar.default_bg)\r\n        ]);\r\n\r\n        test_background_obj = test_background_data.scene.children[0];\r\n        scene.add(test_background_obj);\r\n\r\n        test_background_obj.receiveShadow = false;\r\n        test_background_obj.castShadow = true;\r\n\r\n        test_background_obj.scale.set(10, 10, 10);\r\n        test_background_obj.position.set(0, 5, 0);\r\n        // test_background_obj.material = new THREE.MeshLambertMaterial({\r\n        //     emissive: 0x593b00,\r\n        //     emissiveIntensity: .8\r\n        // });\r\n        test_background_obj.material = new THREE.MeshLambertMaterial({\r\n            color: 0x0083ad,\r\n            emissive: 0x0083ad,\r\n            emissiveIntensity: 1\r\n        });\r\n\r\n        // const box_helper = new THREE.BoxHelper( obj_bg, 0xffff00 );\r\n        // scene.add(box_helper);\r\n\r\n        console.log(test_background_obj);\r\n    },\r\n\r\n    // ========\r\n\r\n    setup: {\r\n        all: function(options){\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options); \r\n            avatar.setup.renderer(); // => renderer\r\n            avatar.setup.scene();\r\n            avatar.setup.camera();\r\n            avatar.setup.post_processing(); // => composer\r\n            avatar.setup.controls();\r\n            avatar.setup.lights(_DEFAULT.light_options);\r\n        },\r\n        lights: function(options) {\r\n            var defaults = {\r\n                environment_light: {\r\n                    enable: true,\r\n                    options: {\r\n                        dir: \"assets/hdr/\",\r\n                        hdri_file: \"provence_studio_1k_edit.hdr\", \r\n                        enable_background: false,\r\n                        intensity: 1,\r\n                    }\r\n                },\r\n                ambient_light: {\r\n                    enable: true,\r\n                    options: {\r\n                        color: 0xffffff,\r\n                        intensity: .1\r\n                    }\r\n                },\r\n                hemisphere_light: { \r\n                    enable: false,\r\n                    options: {\r\n                        skyColor: 0xffffff,\r\n                        groundColor: 0xffffff,\r\n                        intensity: 1,\r\n                        position: {\r\n                            x: 0, y: 50, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                directional_light: {\r\n                    enable: false,\r\n                    options: {\r\n                    }\r\n                },\r\n                key_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 0,\r\n                        distance: 0,\r\n                        intensity: 1.95,\r\n                        angle: Math.PI/ 2,\r\n                        penumbra: 0,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 4, y: 3, z: 4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                fill_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffe0a9,\r\n                        decay: 0,\r\n                        distance: 50,\r\n                        intensity: .5,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: 0,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: -7, y: 3, z: 6\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                back_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 0,\r\n                        distance: 50,\r\n                        intensity: .9,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: 0,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 2, z: -4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                top_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 0,\r\n                        distance: 50,\r\n                        intensity: .4,\r\n                        angle: Math.PI/ 5,\r\n                        penumbra: 0,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 8, z: 3\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 1\r\n                        }\r\n                    }\r\n                },\r\n                bottom_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 0,\r\n                        distance: 50,\r\n                        intensity: .4,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: 0,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: -1, z: 2\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 3, z: 0\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.environment_light.enable) {\r\n\r\n                new RGBELoader()\r\n                    .setPath(settings.environment_light.options.dir)\r\n                    .load(settings.environment_light.options.hdri_file, function (texture) {\r\n                        texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                        if (settings.environment_light.options.enable_background) {\r\n                            scene.background = texture;\r\n                        }\r\n                        scene.environment = texture;\r\n                    });\r\n            } \r\n\r\n            // \r\n\r\n            light.ambient = helper.create_light.amb_light(settings.ambient_light);\r\n            if (settings.ambient_light.enable) {\r\n                scene.add(light.ambient);\r\n\r\n            }\r\n            \r\n            \r\n            // helper.create_light.environment_light(settings.environment_light.options);\r\n    \r\n            light.key = helper.create_light.spot_light(settings.key_light);\r\n            if (settings.key_light.enable) {\r\n                scene.add( light.key);\r\n                scene.add( light.key.target );\r\n                if (settings.key_light.helper) {\r\n                    console.log(light.key);\r\n                }\r\n            }\r\n    \r\n            \r\n            light.fill = helper.create_light.spot_light(settings.fill_light);\r\n            if (settings.fill_light.enable) {\r\n                scene.add( light.fill);\r\n                scene.add( light.fill.target );\r\n                if (settings.fill_light.helper) {\r\n                    console.log(light.fill);\r\n                }\r\n            }\r\n            \r\n            light.back = helper.create_light.spot_light(settings.back_light);\r\n            if (settings.back_light.enable) {\r\n                scene.add( light.back);\r\n                scene.add( light.back.target );\r\n                if (settings.back_light.helper) {\r\n                    console.log(light.back);\r\n                }\r\n            }\r\n            \r\n            light.top = helper.create_light.spot_light(settings.top_light);\r\n            if (settings.top_light.enable) {\r\n                scene.add( light.top);\r\n                scene.add( light.top.target );\r\n                if (settings.top_light.helper) {\r\n                    console.log(light.top);\r\n                }\r\n            }\r\n            \r\n            light.top2 = helper.create_light.spot_light(settings.top2_light);\r\n            if (settings.top2_light.enable) {\r\n                scene.add( light.top2);\r\n                scene.add( light.top2.target );\r\n                if (settings.top2_light.helper) {\r\n                    console.log(light.top2);\r\n                }\r\n            }\r\n            \r\n            light.bottom = helper.create_light.spot_light(settings.bottom_light);\r\n            if (settings.bottom_light.enable) {\r\n                scene.add( light.bottom);\r\n                scene.add( light.bottom.target );\r\n                if (settings.bottom_light.helper) {\r\n                    console.log(light.bottom);\r\n                }\r\n            }\r\n            \r\n            light.hand = helper.create_light.spot_light(settings.hand_light);\r\n            if (settings.hand_light.enable) {\r\n                scene.add( light.hand);\r\n                scene.add( light.hand.target );\r\n                if (settings.hand_light.helper) {\r\n                    console.log(light.hand);\r\n                }\r\n            }\r\n\r\n            if (settings.hemisphere_light.enable) {\r\n                light.hemi = new THREE.HemisphereLight(0xffffff, 0xffffff, settings.hemisphere_light.options.intensity);\r\n                // light.hemi.color.setHSL(0.6, 1, 0.6);\r\n                // light.hemi.groundColor.setHSL(0.095, 1, 0.75);\r\n                light.hemi.position.set(0, 50, 0);\r\n                scene.add(light.hemi);\r\n    \r\n                if (avatar.helper) {\r\n                    const light_hemi_helper = new THREE.HemisphereLightHelper(light.hemi, 10);\r\n                    scene.add(light_hemi_helper);\r\n                }\r\n            }\r\n\r\n            // if (settings.ambient_light.enable) {\r\n            //     light.hemi = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\r\n            //     light.hemi.color.setHSL(0.6, 1, 0.6);\r\n            //     light.hemi.groundColor.setHSL(0.095, 1, 0.75);\r\n            //     light.hemi.position.set(0, 50, 0);\r\n            //     scene.add(light.hemi);\r\n    \r\n            //     if (avatar.helper) {\r\n            //         const light_hemi_helper = new THREE.HemisphereLightHelper(light.hemi, 10);\r\n            //         scene.add(light_hemi_helper);\r\n            //     }\r\n            // }\r\n    \r\n            if (settings.directional_light.enable) {\r\n                light.dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light.dir.color.setHSL(0.1, 1, 0.95);\r\n                light.dir.position.set(- 1, 1.75, 1);\r\n                light.dir.position.multiplyScalar(100);\r\n                if (settings.light.dir) {\r\n                    scene.add(light.dir);\r\n                }\r\n    \r\n                light.dir.castShadow = true;\r\n    \r\n                light.dir.shadow.mapSize.width = 2048;\r\n                light.dir.shadow.mapSize.height = 2048;\r\n    \r\n                const d = 50;\r\n    \r\n                light.dir.shadow.camera.left = - d;\r\n                light.dir.shadow.camera.right = d;\r\n                light.dir.shadow.camera.top = d;\r\n                light.dir.shadow.camera.bottom = - d;\r\n    \r\n                light.dir.shadow.camera.far = 3500;\r\n                light.dir.shadow.bias = - 0.0001;\r\n    \r\n                if (settings.light.dir && avatar.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light.dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        }, \r\n        scene: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            scene = new THREE.Scene();\r\n            // scene.background = new THREE.Color().setHSL(0, 0, 0);\r\n            // scene.fog = new THREE.Fog(scene.background, 1, 5000);\r\n            scene.fog = new THREE.FogExp2( 0xffffff, .0 );\r\n \r\n            \r\n            // scene.background = new THREE.Color( 0xff0000 );\r\n\t\t\t// const pmremGenerator = new THREE.PMREMGenerator( renderer );\r\n\t\t\t// scene.environment = pmremGenerator.fromScene( new RoomEnvironment(), 0.0001 ).texture;\r\n            \r\n        },\r\n        renderer: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            renderer = new THREE.WebGLRenderer({\r\n                alpha: true,\r\n                antialias: true,\r\n                // preserveDrawingBuffer: true,\r\n                // powerPreference: \"high-performance\"\r\n                powerPreference: \"default\"\r\n            });\r\n            renderer.setPixelRatio( window.devicePixelRatio );\r\n            renderer.setSize(avatar.dom_width, avatar.dom_height);\r\n            // renderer.setClearColor(0xEEEEEE);\r\n\r\n            renderer.shadowMap.enabled = true;\r\n            renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            // renderer.shadowIntensity = 1;\r\n\r\n            renderer.physicallyCorrectLights = true;\r\n            renderer.outputEncoding =  THREE.sRGBEncoding;\r\n\r\n            // renderer.toneMapping = THREE.ReinhardToneMapping;\r\n            // renderer.toneMappingExposure = 1.0;\r\n\r\n            // renderer.toneMappingExposure = 1.08;\r\n            // renderer.gammaOutput = true;\r\n            // renderer.gammaFactor = -.1;\r\n            // renderer.toneMappingExposure = 1.02;\r\n\r\n            // composer = new EffectComposer(renderer);\r\n\r\n            $(avatar.rendered_element).append(renderer.domElement); \r\n            window.addEventListener( 'resize', avatar.setup.onWindowResize );\r\n\r\n        },\r\n        post_processing: function(options) {\r\n            var defaults = {\r\n                lut_asset: _DEFAULT.post_processing.lut_asset,\r\n                lut_file: _DEFAULT.post_processing.lut_file,\r\n            }\r\n            var settings = $.extend(defaults, options); \r\n \r\n            // ======\r\n            \r\n            const target = new THREE.WebGLRenderTarget( {\r\n                minFilter: THREE.LinearFilter,\r\n                magFilter: THREE.LinearFilter,\r\n                format: THREE.RGBAFormat,\r\n                encoding: THREE.sRGBEncoding\r\n            } );\r\n\r\n            composer = new EffectComposer( renderer, target );\r\n            composer.setPixelRatio( window.devicePixelRatio );\r\n            composer.setSize( avatar.dom_width, avatar.dom_height );\r\n            \r\n            const renderPass = new RenderPass( scene, camera );\r\n            const fxaaPass = new ShaderPass( FXAAShader );\r\n            const shaderPass = new ShaderPass( GammaCorrectionShader );\r\n\r\n            // renderPass.clearColor = new THREE.Color( 0, 0, 0 );\r\n            // renderPass.clearAlpha = 0;\r\n\r\n\r\n            composer.addPass( renderPass );\r\n            composer.addPass( fxaaPass );\r\n\r\n            lutPass = new LUTPass();\r\n            composer.addPass( lutPass );\r\n            // composer.addPass( shaderPass );\r\n\r\n            // LOADER\r\n            const \r\n                LUTCUBELoader = new LUTCubeLoader(),\r\n                LUT3DLLOADER = new LUT3dlLoader();\r\n\r\n            if ( /\\.CUBE$/i.test( settings.lut_file ) ) {\r\n                LUTCUBELoader.load( settings.lut_asset + settings.lut_file, function ( result ) {\r\n                    lutMap = result;\r\n                    // console.log(lutMap);\r\n                });\r\n            } else {\r\n                LUT3DLLOADER.load( settings.lut_asset + settings.lut_file, function ( result ) {\r\n                    lutMap = result;\r\n                    // console.log(lutMap);\r\n                });\r\n            }\r\n            \r\n\r\n             \r\n        },\r\n        onWindowResize: function (options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            camera.aspect = avatar.dom_width / avatar.dom_height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            renderer.setSize(avatar.dom_width, avatar.dom_height );\r\n            if (composer) {\r\n                composer.setSize(avatar.dom_width, avatar.dom_height );\r\n            }\r\n\r\n            avatar.setup.animate();\r\n        },\r\n        camera: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            camera = new THREE.PerspectiveCamera(\r\n                85,\r\n                avatar.dom_width / avatar.dom_height,\r\n                0.01,\r\n                1000);\r\n            // camera.position.set(2, 4.1, 5.3);\r\n            // camera.position.set(0.6, 4.4, 5.9);\r\n            camera.position.set(1.42, 1.47, 5.05);\r\n\r\n            // camera.position.set(15.7, 58.4, 60.5);\r\n            camera.lookAt(0, 12, 0);\r\n\r\n            // ========\r\n\r\n\r\n        },\r\n        controls: function(options) {\r\n            var defaults = {\r\n                minDistance: 4,\r\n                maxDistance: 9,\r\n                zoomSpeed: 1,\r\n                rotateSpeed: 1,\r\n                enableDamping: true,\r\n                enablePan: false,\r\n                dampingFactor: 0.1,\r\n                autoRotate: true,\r\n                autoRotateSpeed: 0.5,\r\n                minPolarAngle: .8,\r\n                maxPolarAngle: 1.8,\r\n                target: {\r\n                    x: 0, y: 3.0, z: 0\r\n                } \r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            controls = new OrbitControls(camera, renderer.domElement);\r\n            controls.minDistance = settings.minDistance;\r\n            controls.maxDistance = settings.maxDistance;\r\n            controls.zoomSpeed = settings.zoomSpeed;\r\n            controls.rotateSpeed = settings.rotateSpeed;\r\n            controls.enableDamping = settings.enableDamping;\r\n            controls.enablePan = settings.enablePan;\r\n            controls.dampingFactor = settings.dampingFactor;\r\n            controls.autoRotate = settings.autoRotate;\r\n            controls.autoRotateSpeed = settings.autoRotateSpeed;\r\n            controls.minPolarAngle = settings.minPolarAngle;\r\n            controls.maxPolarAngle = settings.maxPolarAngle;\r\n    \r\n            controls.target.set(\r\n                settings.target.x,\r\n                settings.target.y,\r\n                settings.target.z\r\n            );\r\n        },\r\n        helpers: function(options){\r\n            var defaults = {\r\n                gridHelper: {\r\n                    enable: false,\r\n                    size : 100,\r\n                    divisions : 100,\r\n                    colorCenterLine : 0x0000ff,\r\n                    colorGrid : 0x808080\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.gridHelper.enable) {\r\n                const gridHelper = new THREE.GridHelper( \r\n                    settings.gridHelper.size ,  \r\n                    settings.gridHelper.divisions ,  \r\n                    settings.gridHelper.colorCenterLine ,  \r\n                    settings.gridHelper.colorGrid ,  \r\n                );\r\n                scene.add( gridHelper );\r\n            }\r\n        },\r\n        post_renderer: function (options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            avatar.setup.animate();\r\n            controls.addEventListener('change', function () {\r\n                avatar.setup.render();\r\n            });\r\n            controls.update();\r\n        },\r\n        render: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            if (composer) {\r\n                composer.render(scene, camera); \r\n            } else {\r\n                renderer.render(scene, camera);\r\n            }\r\n        },\r\n        animate: function(options) {\r\n            requestAnimationFrame( avatar.setup.animate );\r\n            const delta = clock.getDelta();\r\n    \r\n            if (starter_background_obj) {\r\n                starter_background_obj.lookAt(\r\n                    camera.position.x + 1.5,\r\n                    camera.position.y - 3.5,\r\n                    camera.position.z + .5\r\n                    \r\n                    );\r\n            } \r\n\r\n            if ( mixer ) mixer.update( delta );\r\n            if ( mixer_face ) mixer_face.update( delta );\r\n            if ( mixer_outfit ) mixer_outfit.update( delta );\r\n            if ( mixer_hair ) mixer_hair.update( delta );\r\n            if ( mixer_asset ) mixer_asset.update( delta );\r\n            if ( mixer_eyewear ) mixer_eyewear.update( delta );\r\n    \r\n            avatar.callback();\r\n            avatar.setup.render();            \r\n            \r\n            \r\n\r\n\r\n            // console.log()\r\n            // console.log(lutMap);\r\n \r\n            if (lutMap) {\r\n                // console.log(lutMap);\r\n                lutPass.enable = _DEFAULT.post_processing.lutPass_options.enable,\r\n                lutPass.lut = lutMap.texture;\r\n                lutPass.intensity = _DEFAULT.post_processing.lutPass_options.intensity;\r\n            }\r\n\r\n            // console.log(composer);\r\n        }\r\n    },\r\n    callback: function(options){\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n    },\r\n\r\n    // ======\r\n\r\n    switch: function(options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        $(\"body\").append(`\r\n        <div class=\"controls\">\r\n\t\t\t<input type=\"checkbox\" id=\"switch_avatar\" class=\"switch_avatar\">\r\n\t\t\t<label for=\"switch_avatar\">Switch to <span class=\"dim\">3</span>D</label>\r\n\t\t</div>\r\n        `)\r\n\r\n        var url = new URL(window.location.href);\r\n        var dim = url.searchParams.get(\"dim\");\r\n\r\n        // if ($(avatar.switch_element).prop('checked', true)) {\r\n        //     $(avatar.rendered_element).removeClass(\"active\");\r\n        //     $(avatar.layered_element).addClass(\"active\");\r\n        //     $(avatar.switch_element + \" + label .dim\").html(2);\r\n        // } else {\r\n        //     $(avatar.layered_element).removeClass(\"active\");\r\n        //     $(avatar.rendered_element).addClass(\"active\");\r\n        //     $(avatar.switch_element + \" + label .dim\").html(3);\r\n        // }\r\n\r\n        if ($(avatar.switch_element).length > 0) {\r\n\r\n        }\r\n        \r\n        $(avatar.switch_element).on(\"click\", function(){\r\n            if ($(avatar.switch_element).is(':checked')) {\r\n                console.log(\"A\");\r\n                $(avatar.rendered_element).removeClass(\"active\");\r\n                $(avatar.layered_element).addClass(\"active\");\r\n                $(avatar.switch_element + \" + label .dim\").html(3);\r\n            } else {\r\n                console.log(\"B\");\r\n                $(avatar.layered_element).removeClass(\"active\");\r\n                $(avatar.rendered_element).addClass(\"active\");\r\n                $(avatar.switch_element + \" + label .dim\").html(2);\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nvar debug = {\r\n    freeCamera: () => {\r\n        controls.minDistance = 0;\r\n        controls.maxDistance = Infinity;\r\n        controls.zoomSpeed = 1;\r\n        controls.rotateSpeed = 1;\r\n        controls.enableDamping = false;\r\n        controls.enablePan = true;\r\n        controls.autoRotate = true;\r\n        controls.autoRotateSpeed = 1;\r\n        controls.maxPolarAngle = Math.PI;\r\n    },\r\n    getCamera: () => camera,\r\n    getControls: () => controls,\r\n    getObject: (obj_name) => {\r\n        switch (obj_name) {\r\n            case 'fake_cam_obj': return fake_cam_obj;\r\n            case 'smt_background_obj': return smt_background_obj;\r\n            case 'smt_avatar_obj': return smt_avatar_obj;\r\n            case 'starter_background_obj': return starter_background_obj;\r\n            case 'starter_face_obj': return starter_face_obj;\r\n            case 'starter_hair_obj': return starter_hair_obj;\r\n            case 'starter_outfit_obj': return starter_outfit_obj;\r\n            case 'starter_asset_obj': return starter_asset_obj;\r\n            case 'starter_eyewear_obj': return starter_eyewear_obj;\r\n            case 'light.hemi': return light.hemi;\r\n            case 'light.dir': return light.dir;\r\n            case 'light.key': return light.key;\r\n            case 'light.fill': return light.fill;\r\n            case 'light.back': return light.back;\r\n            case 'light.top': return light.top;\r\n            case 'light.bottom': return light.bottom;\r\n        }\r\n    },\r\n    watch: (object_to_watch) => {\r\n        avatar.callback = function() {\r\n            console.log(object_to_watch);\r\n        }\r\n        return \"[ debug watch started ]\"\r\n    },\r\n    endWatch: () => {\r\n        avatar.callback = function() {\r\n        }\r\n        return \"[ debug watch ended ]\"\r\n    }\r\n}\r\n\r\nexport {avatar, debug};\r\n\r\n///filter: saturate(1.4) contrast(1.2);\r\n//\r\n// - ST di chuyen duoc (giong SMT) \r\n//   -> FBX (Anh Dat)\r\n//   -> BG (Anh Dung)\r\n// - LookDev \r\n// \r\n//\r\n","import config from \"../../setup/config\";\r\nimport bootstrap from 'bootstrap';\r\nimport {avatar, debug} from \"./avatar/main\";\r\n\r\n$(function () {\r\n    avatar.init();\r\n    // avatar.switch(); // --> Active switch 2D / 3D\r\n    // debug.freeCamera(); // --> Active free camera mode (for debugging)\r\n});\r\n\r\nwindow.addEventListener(\"load\", function(){\r\n\r\n    // === ACTIVE DIRECTIVELY\r\n\r\n    // var st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n    // avatar.loadST(st_code);\r\n\r\n\r\n\r\n\r\n    // === ACTIVE BY URL PARAMS\r\n\r\n    var url = new URL(window.location.href);\r\n    var smt_code = url.searchParams.get(\"load_smt\");\r\n    if (typeof smt_code != \"undefined\" && smt_code != null) {\r\n        if (smt_code.length == 0) smt_code = \"SMT1\";\r\n        avatar.loadSMT(smt_code);\r\n    }\r\n\r\n    var st_code = url.searchParams.get(\"load_st\");\r\n    // console.log(st_code);\r\n    if (typeof st_code != \"undefined\" && st_code != null) {\r\n        // if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n        if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T2\";\r\n\r\n        var anim_code = url.searchParams.get(\"anim\");\r\n        if (typeof anim_code != \"undefined\" && anim_code != null) {\r\n            if (anim_code.length == 0) anim_code = \"ST_Walk\";\r\n            avatar.loadSTDEMO(st_code, anim_code);             \r\n        } else {\r\n            avatar.loadST(st_code); \r\n        }\r\n    }\r\n    \r\n    var stdemo_code = url.searchParams.get(\"load_stdemo\");\r\n    // console.log(st_code);\r\n    if (typeof stdemo_code != \"undefined\" && stdemo_code != null) {\r\n        // if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n        if (stdemo_code.length == 0) stdemo_code = \"HM3-EM3-FM3-OM2-A1-T1\";\r\n        avatar.loadSTDEMO(stdemo_code); \r\n    }\r\n    \r\n    var stfpx_code = url.searchParams.get(\"load_stfpx\"); \r\n    // console.log(st_code);\r\n    if (typeof stfpx_code != \"undefined\" && stfpx_code != null) {\r\n        // if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n        if (stfpx_code.length == 0) stfpx_code = \"HM3-EM3-FM3-OM2-A1-T1\";\r\n        avatar.loadSTFPX(stfpx_code); \r\n    }\r\n\r\n    var dim = url.searchParams.get(\"dim\");\r\n    // console.log(dim);\r\n    switch (dim) {\r\n        case \"3\":\r\n            if ($(\"#rendered_avatar\").length > 0) {\r\n                $(\"#rendered_avatar\").addClass(\"active\");\r\n                $(\"#switch_avatar\").prop(\"checked\", false);\r\n                $(\"#switch_avatar + label .dim\").html(2);\r\n            }\r\n            \r\n            break;\r\n        case \"2\": default:\r\n            if ($(\"#layered_avatar\").length > 0) {\r\n                $(\"#layered_avatar\").addClass(\"active\");\r\n                $(\"#switch_avatar\").prop(\"checked\", true); \r\n                $(\"#switch_avatar + label .dim\").html(3);\r\n            }\r\n            break;\r\n    }\r\n\r\n\r\n});\r\n\r\nwindow.debug = debug;","// extracted by mini-css-extract-plugin\nexport {};","var config = {\r\n    widthTriggerScale: 9999,\r\n    widthDesktopSafe: 1620,\r\n    widthDesktop: 2000,\r\n    widthMobile: 768,\r\n    heightDesktop: 1000,\r\n    heightMobile: 1000,\r\n    func: {\r\n        isMobile: function(){\r\n            var device = {\r\n                width: $(window).innerWidth(),\r\n                height: $(window).innerHeight()\r\n            };\r\n\r\n            return ((device.width <= config.widthMobile) || (device.width < device.height));\r\n        }\r\n    }\r\n}\r\n\r\nexport default config;"],"sourceRoot":""}