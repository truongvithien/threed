{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/avatar/index.js","webpack:///./src/avatar/js/avatar/_helper.js","webpack:///./src/avatar/js/avatar/main.js","webpack:///./src/avatar/js/index.js","webpack:///./src/avatar/scss/index.scss?1402","webpack:///./src/setup/config.js"],"names":["helper","create_light","environment_light","options","defaults","enable","dir","hdri_file","enable_background","intensity","settings","$","extend","THREE","setPath","load","texture","mapping","scene","background","environment","point_light","debug_color","color","decay","distance","physically_correct","power","shadow_bias","map_size_width","map_size_height","camera_near","camera_far","position","x","y","z","sphere_light","obj_light","add","castShadow","shadow","bias","set","dir_light","light_dir","setHSL","multiplyScalar","mapSize","width","height","d","camera","left","right","top","bottom","far","web3d","light_dir_helper","amb_light","spot_light","angle","Math","PI","penumbra","cast_shadow","shadow_map_size_width","shadow_map_size_height","shadow_camera_near","shadow_camera_far","shadow_focus","target","near","focus","receiveShadow","lightHelper","shadowCameraHelper","loading","enableLoading","rendered_element","className","addClass","removeClass","clean","avatar","debug","renderer","controls","mixer","composer","lutPass","lutMap","light","hemi","key","fill","back","clock","test_background_data","test_background_obj","smt_background_data","smt_background_obj","smt_background_2d","smt_avatar_data","smt_avatar_obj","smt_avatar_2d","starter_background_data","starter_background_obj","starter_background_2d","starter_face_data","starter_face_obj","starter_face_2d","starter_hair_data","starter_hair_obj","starter_hair_2d","starter_outfit_data","starter_outfit_obj","starter_outfit_2d","starter_asset_data","starter_asset_obj","starter_asset_2d","starter_eyewear_data","starter_eyewear_obj","starter_eyewear_2d","_DEFAULT","layered_element","switch_element","asset_dir","scale","smt","st","texture_options","smt_skin","aoMapIntensity","smt_outfit","emissiveIntensity","normalScale","smt_teeth","roughness","smt_hair","aoMap","st_background","st_face","envMapIntensity","st_skin","st_hair","st_outfit","st_asset","st_eyewear","transparent","model_suffix","twod","texture_suffix","base_color","metallic","normal","ambient_occlusion","emissive","alpha","scattering","thickness","sss","texture_skin_suffix","post_processing","lut_asset","lut_file","lutPass_options","light_options","ambient_light","hemisphere_light","skyColor","groundColor","directional_light","key_light","fill_light","back_light","top_light","bottom_light","default_bg","dom_width","dom_height","init","innerWidth","innerHeight","setup","all","post_renderer","helpers","loadSMT","smt_code","empty","append","fbxLoader","FBXLoader","texLoader","Promise","loadAsync","skin_texture","map","metalnessMap","normalMap","roughnessMap","outfit_texture","emissiveMap","action","clipAction","animations","play","texture_skin","texture_outfit","texture_teeth","texture_hair","traverse","o","isMesh","indexOf","name","material","loadST","st_code","obj_st","array_st","split","glbLoader","GLTFLoader","children","background_texture","face_texture","hair_texture","skinin_texture","asset_texture","eyewear_texture","alphaMap","texture_background","console","log","texture_face","texture_skinin","texture_asset","texture_eyewear","loadDefaultBg","lights","ambient","light_hemi_helper","fog","antialias","setPixelRatio","window","devicePixelRatio","setSize","shadowMap","enabled","type","domElement","addEventListener","onWindowResize","minFilter","magFilter","format","encoding","sRGBEncoding","EffectComposer","renderPass","RenderPass","fxaaPass","ShaderPass","FXAAShader","shaderPass","GammaCorrectionShader","addPass","LUTPass","LUTCUBELoader","LUTCubeLoader","LUT3DLLOADER","LUT3dlLoader","test","result","aspect","updateProjectionMatrix","animate","lookAt","minDistance","maxDistance","zoomSpeed","rotateSpeed","enableDamping","enablePan","dampingFactor","autoRotate","autoRotateSpeed","minPolarAngle","maxPolarAngle","gridHelper","size","divisions","colorCenterLine","colorGrid","render","update","requestAnimationFrame","delta","getDelta","callback","lut","switch","url","URL","location","href","dim","searchParams","get","length","on","is","html","freeCamera","Infinity","getCamera","getControls","getObject","obj_name","watch","object_to_watch","endWatch","prop","config","widthTriggerScale","widthDesktopSafe","widthDesktop","widthMobile","heightDesktop","heightMobile","func","isMobile","device"],"mappings":"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","file":"avatar.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"0\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"./js/index.js\";\r\nimport \"./scss/index.scss\";","import * as THREE from 'three';\r\n\r\nvar helper = {\r\n    create_light: {\r\n        environment_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                options: {\r\n                    dir: \"assets/hdr/\",\r\n                    hdri_file: \"provence_studio_1k_edit.hdr\",\r\n                    enable_background: false,\r\n                    intensity: 1,\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            new THREE.RGBELoader()\r\n                .setPath(settings.dir)\r\n                .load(settings.hdri_file, function (texture) {\r\n                    texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                    if (settings.enable_background) {\r\n                        scene.background = texture;\r\n                    }\r\n                    scene.environment = texture;\r\n                });\r\n        },\r\n        point_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            var sphere_light = new THREE.SphereGeometry(0.2, 32, 32);\r\n\r\n            if (settings.options) {\r\n                var obj_light = new THREE.PointLight(\r\n                    settings.options.color, \r\n                    settings.options.intensity, \r\n                    settings.options.distance,\r\n                    settings.options.decay,\r\n                    settings.options.physically_correct,\r\n                );\r\n                if (settings.helper) {\r\n                    obj_light.add(new THREE.Mesh(\r\n                        sphere_light, \r\n                        new THREE.MeshBasicMaterial({ color: settings.options.debug_color })\r\n                    ));\r\n                }\r\n                obj_light.castShadow = true;\r\n                obj_light.shadow.bias = settings.options.shadow_bias;\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n    \r\n                return obj_light\r\n            }\r\n\r\n        },\r\n        dir_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n\r\n            if (settings.enable) {\r\n                light_dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light_dir.color.setHSL(0.1, 1, 0.95);\r\n                light_dir.position.set(- 1, 1.75, 1);\r\n                light_dir.position.multiplyScalar(100);\r\n                if (settings.light_dir) {\r\n                    scene.add(light_dir);\r\n                }\r\n\r\n                light_dir.castShadow = true;\r\n\r\n                light_dir.shadow.mapSize.width = 2048;\r\n                light_dir.shadow.mapSize.height = 2048;\r\n\r\n                const d = 50;\r\n\r\n                light_dir.shadow.camera.left = - d;\r\n                light_dir.shadow.camera.right = d;\r\n                light_dir.shadow.camera.top = d;\r\n                light_dir.shadow.camera.bottom = - d;\r\n\r\n                light_dir.shadow.camera.far = 3500;\r\n                light_dir.shadow.bias = - 0.0001;\r\n\r\n                if (settings.light_dir && web3d.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light_dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        },\r\n        amb_light: function(options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    color: 0x404040,\r\n                    intensity: 0.1\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            if (settings.enable) {\r\n                var obj_light = new THREE.AmbientLight(settings.options.color, settings.options.intensity);\r\n                return obj_light;\r\n            }\r\n        },\r\n        spot_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 0,\r\n                    intensity: .6,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    },\r\n                    target: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            \r\n            if (settings.enable) {\r\n                var obj_light = new THREE.SpotLight( \r\n                    settings.options.color,  \r\n                    settings.options.intensity, \r\n                    settings.options.distance, \r\n                    settings.options.angle, \r\n                    settings.options.penumbra,  \r\n                    settings.options.decay\r\n                );\r\n\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n                \r\n                obj_light.angle = settings.options.angle;\r\n                obj_light.penumbra = settings.options.penumbra;\r\n                obj_light.decay = settings.options.decay;\r\n                obj_light.distance = settings.options.distance;\r\n    \r\n                obj_light.castShadow = settings.options.cast_shadow;\r\n                obj_light.shadow.mapSize.width = settings.options.shadow_map_size_width;\r\n                obj_light.shadow.mapSize.height = settings.options.shadow_map_size_height;\r\n                obj_light.shadow.camera.near = settings.options.shadow_camera_near;\r\n                obj_light.shadow.camera.far = settings.options.shadow_camera_far;\r\n                obj_light.shadow.focus = settings.options.shadow_focus;\r\n\r\n                obj_light.receiveShadow = true;\r\n                obj_light.castShadow = true;\r\n\r\n                obj_light.target.position.set(\r\n                    settings.options.target.x, \r\n                    settings.options.target.y, \r\n                    settings.options.target.z\r\n                )\r\n\r\n                // obj_light.target.x =  settings.options.target.x; \r\n                // obj_light.target.y =  settings.options.target.y; \r\n                // obj_light.target.z =  settings.options.target.z; \r\n                //     settings.options.target.y, \r\n                //     settings.options.target.z, \r\n                // ;\r\n\r\n                // console.log(obj_light);\r\n                \r\n                if (settings.helper) {\r\n                    var lightHelper = new THREE.SpotLightHelper( obj_light );\r\n                    var shadowCameraHelper = new THREE.CameraHelper( obj_light.shadow.camera );\r\n                    obj_light.add(lightHelper);\r\n                    obj_light.add(shadowCameraHelper);\r\n                }\r\n\r\n                return obj_light;\r\n    \r\n            }\r\n\r\n\r\n\r\n        }\r\n    },\r\n\r\n    loading: function(enableLoading, options) {\r\n        var defaults = {\r\n            rendered_element: \"#rendered_avatar\",\r\n            className: \"loading\"\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        if (enableLoading) {\r\n            $(settings.rendered_element).addClass(settings.className);\r\n        } else {\r\n            $(settings.rendered_element).removeClass(settings.className);\r\n        }\r\n    },\r\n\r\n    clean: function(scene, options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        // CLEAN 2D\r\n\r\n\r\n        // CLEAN 3D\r\n        \r\n    },\r\n\r\n\r\n\r\n}\r\n\r\nexport default helper;","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/js/controls/OrbitControls';\r\nimport { LightProbeGenerator } from 'three/examples/js/lights/LightProbeGenerator';\r\n\r\n// LOADER\r\n\r\nimport { RGBELoader } from 'three/examples/js/loaders/RGBELoader.js';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\r\n\r\n// POST - PROCESSING\r\n\r\nimport { EffectComposer } from 'three/examples/jsm/postprocessing/EffectComposer.js';\r\nimport { RenderPass } from 'three/examples/jsm/postprocessing/RenderPass.js';\r\nimport { FXAAShader } from 'three/examples/jsm/shaders/FXAAShader.js';\r\nimport { ShaderPass } from 'three/examples/jsm/postprocessing/ShaderPass.js';\r\nimport { LUTPass } from 'three/examples/jsm/postprocessing/LUTPass.js';\r\nimport { LUTCubeLoader } from 'three/examples/jsm/loaders/LUTCubeLoader.js';\r\nimport { LUT3dlLoader } from 'three/examples/jsm/loaders/LUT3dlLoader.js';\r\nimport { GammaCorrectionShader } from 'three/examples/jsm/shaders/GammaCorrectionShader.js';\r\n\r\n// \r\n\r\nimport helper from \"./_helper\";\r\nimport { TextureLoader } from 'three';\r\n\r\nvar avatar, debug;\r\n\r\nvar scene, camera, renderer, controls, \r\n    mixer, \r\n    composer, lutPass, lutMap;\r\n\r\nvar light = {\r\n    hemi: {}, dir: {}, key: {}, fill: {},\r\n    back: {}, top: {}, bottom: {}\r\n}\r\n\r\nconst clock = new THREE.Clock();\r\n\r\n// OBJECT 3D\r\n\r\nvar test_background_data, test_background_obj;\r\n\r\nvar smt_background_data, smt_background_obj, smt_background_2d,\r\n    smt_avatar_data, smt_avatar_obj, smt_avatar_2d;\r\n\r\nvar starter_background_data, starter_background_obj, starter_background_2d,\r\n    starter_face_data, starter_face_obj, starter_face_2d,\r\n    starter_hair_data, starter_hair_obj, starter_hair_2d,\r\n    starter_outfit_data, starter_outfit_obj, starter_outfit_2d,\r\n    starter_asset_data, starter_asset_obj, starter_asset_2d,\r\n    starter_eyewear_data, starter_eyewear_obj, starter_eyewear_2d;\r\n\r\n// DEFAULT SETUP \r\n\r\nconst \r\n    _DEFAULT = {\r\n        rendered_element: \"#rendered_avatar\",\r\n        layered_element: \"#layered_avatar\",\r\n        switch_element: \"#switch_avatar\",\r\n        asset_dir: \"assets/avatar/\",\r\n        background: \"assets/bg-default.glb\",\r\n        scale: {\r\n            smt: {x: .1, y: .1, z: .1},\r\n            st: {x: .08, y: .08, z: .08},\r\n        },\r\n        texture_options: {\r\n            smt_skin: {\r\n                aoMapIntensity: .1,\r\n            },\r\n            smt_outfit: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5)\r\n            },\r\n            smt_teeth: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5),\r\n                roughness: 3\r\n            },\r\n            smt_hair: {\r\n                aoMap: null,\r\n                aoMapIntensity: .1,\r\n                normalScale: new THREE.Vector2(-1, -1),\r\n                roughness: 1.5\r\n            },\r\n            st_background: {},\r\n            st_face: {\r\n                aoMapIntensity: .1,\r\n                // roughness: .8,\r\n                envMapIntensity: .2,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n            },\r\n            st_skin: {\r\n                aoMapIntensity: .1,\r\n                // roughness: .8,\r\n                envMapIntensity: .05,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n                \r\n            },\r\n            st_hair: {\r\n                aoMap: null,\r\n                aoMapIntensity: .1,\r\n                normalScale: new THREE.Vector2(.15, .15),\r\n                envMapIntensity: .1,\r\n                // roughness: 1.5,\r\n                // envMapIntensity: 1.2\r\n            },\r\n            st_outfit: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 0,\r\n                normalScale: new THREE.Vector2(1, 1),\r\n                envMapIntensity: .3,\r\n                // normalMapType: THREE.ObjectSpaceNormalMap\r\n            },\r\n            st_asset: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5),\r\n                envMapIntensity: .5,\r\n            },\r\n            st_eyewear: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5),\r\n                envMapIntensity: .5,\r\n                transparent: true\r\n            }\r\n        },\r\n        model_suffix: {\r\n            smt: \".fbx\",\r\n            st: \".glb\",\r\n            twod: \".png\"\r\n        },\r\n        texture_suffix: {\r\n            base_color: \"_SHD_BaseColor.png\",\r\n            metallic: \"_SHD_Metallic.png\",\r\n            normal: \"_SHD_Normal.png\",\r\n            roughness: \"_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_SHD_AmbientOcclusion.png\",\r\n            emissive: \"_SHD_Emissive.png\",\r\n            alpha: \"_SHD_Opacity.png\",\r\n\r\n            scattering: \"_SHD_Scattering.png\",\r\n            thickness: \"_SHD_Thickness.png\",\r\n            sss: \"_SHD_SSS.png\"\r\n        },\r\n        texture_skin_suffix: {\r\n            base_color: \"_Skin_SHD_BaseColor.png\",\r\n            metallic: \"_Skin_SHD_Metallic.png\",\r\n            normal: \"_Skin_SHD_Normal.png\",\r\n            roughness: \"_Skin_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_Skin_SHD_AmbientOcclusion.png\",\r\n\r\n            scattering: \"_Skin_SHD_Scattering.png\",\r\n            thickness: \"_Skin_SHD_Thickness.png\",\r\n            sss: \"_Skin_SHD_SSS.png\"\r\n        },\r\n        post_processing: {\r\n            lut_asset: \"assets/lut/\",\r\n            lut_file: \"Presetpro-Cinematic.3dl\",\r\n            lutPass_options: {\r\n                enable: true,\r\n                // intensity: .025,\r\n                intensity: 1\r\n            }\r\n        },\r\n        light_options: {\r\n            environment_light: {\r\n                enable: true,\r\n                options: {\r\n                    dir: \"assets/hdr/\",\r\n                    hdri_file: \"provence_studio_1k_edit.hdr\", \r\n                    enable_background: false,\r\n                    intensity: 1,\r\n                }\r\n            },\r\n            ambient_light: {\r\n                enable: true,\r\n                options: {\r\n                    color: 0xffffff,\r\n                    intensity: .1\r\n                }\r\n            },\r\n            hemisphere_light: { \r\n                enable: false,\r\n                options: {\r\n                    skyColor: 0xffffff,\r\n                    groundColor: 0xffffff,\r\n                    intensity: 1,\r\n                    position: {\r\n                        x: 0, y: 50, z: 0\r\n                    }\r\n                }\r\n            },\r\n            directional_light: {\r\n                enable: false,\r\n                options: {\r\n                }\r\n            },\r\n            key_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 30,\r\n                    intensity: .65,\r\n                    angle: Math.PI/ 2,\r\n                    penumbra: .8,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: 4, y: 3, z: 4\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 2, z: 0\r\n                    }\r\n                }\r\n            },\r\n            fill_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffe0a9,\r\n                    decay: 1,\r\n                    distance: 50,\r\n                    intensity: .5,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: .8,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: -7, y: 3, z: 6\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 4, z: 0\r\n                    }\r\n                }\r\n            },\r\n            back_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 50,\r\n                    intensity: .9,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: .8,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: 0, y: 2, z: -4\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 2, z: 0\r\n                    }\r\n                }\r\n            },\r\n            top_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 50,\r\n                    intensity: .4,\r\n                    angle: Math.PI/ 5,\r\n                    penumbra: .8,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: 0, y: 8, z: 3\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 4, z: 1\r\n                    }\r\n                }\r\n            },\r\n            bottom_light: {\r\n                enable: 1,\r\n                helper: 0,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 50,\r\n                    intensity: .4,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: .8,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: .2,\r\n                    position: {\r\n                        x: 0, y: -1, z: 2\r\n                    },\r\n                    target: {\r\n                        x: 0, y: 3, z: 0\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n// MAIN\r\n\r\navatar = {\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    default_bg: _DEFAULT.background,\r\n    \r\n    dom_width: 100,\r\n    dom_height: 100,\r\n    asset_dir: _DEFAULT.asset_dir,\r\n\r\n    init: function(options) {\r\n        var defaults = {\r\n            rendered_element: _DEFAULT.rendered_element,\r\n            layered_element: _DEFAULT.layered_element,\r\n            switch_element: _DEFAULT.switch_element,\r\n            asset_dir: _DEFAULT.asset_dir\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        avatar.rendered_element = settings.rendered_element;\r\n        avatar.asset_dir = settings.asset_dir;\r\n        avatar.dom_width = $(avatar.rendered_element).innerWidth();\r\n        avatar.dom_height = $(avatar.rendered_element).innerHeight();\r\n\r\n        avatar.setup.all();\r\n        avatar.setup.post_renderer();\r\n        avatar.setup.helpers();\r\n\r\n    },\r\n\r\n    // =======\r\n\r\n    loadSMT: async function(smt_code, options = {}) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            scale: _DEFAULT.scale.smt\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n\r\n        // LOAD 2D\r\n        smt_avatar_2d = settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.twod\r\n\r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${smt_avatar_2d}\" alt=\"${smt_code}\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n\r\n        const \r\n            fbxLoader = new FBXLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [smt_avatar_obj] = await Promise.all([\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.smt\r\n            )\r\n        ]);\r\n\r\n        // LOAD TEXTURE \r\n        const skin_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.ambient_occlusion),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.ambient_occlusion),\r\n            emissiveMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.emissive) \r\n        }\r\n\r\n        // LOAD ANIMATION\r\n        mixer = new THREE.AnimationMixer (smt_avatar_obj);\r\n        const action = mixer.clipAction(smt_avatar_obj.animations[ 0 ]);\r\n        action.play();\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        smt_avatar_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n\r\n        smt_avatar_obj.receiveShadow = true;\r\n        smt_avatar_obj.castShadow = true;\r\n\r\n        var texture_skin = new THREE.MeshStandardMaterial({\r\n            ...skin_texture,\r\n            ...settings.texture_options.smt_skin\r\n        });\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_outfit\r\n        });\r\n        var texture_teeth = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_teeth\r\n        });\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_hair\r\n        });\r\n\r\n        smt_avatar_obj.traverse((o) => {\r\n \r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n            }\r\n\r\n            if (o.isMesh && [\"mesh_6\", \"mesh_7\", \"mesh_8\", \"neck_low\", \"hand_low\", \"Face_low\"].indexOf(o.name) > -1) {\r\n                // skin                \r\n                o.material = texture_skin;\r\n            }\r\n            else if (o.isMesh) {\r\n                // outfit\r\n                o.material = texture_outfit;\r\n            } \r\n\r\n            if (o.isMesh && [\"mesh_3\", \"Hair_low\"].indexOf( o.name ) > -1) {\r\n                o.material = texture_hair;\r\n            }\r\n\r\n            if (o.isMesh && o.name == \"Teeth_low\") {\r\n                o.material = texture_teeth;\r\n            }\r\n        });\r\n        \r\n        // ADD SMT OBJ TO SCENE\r\n        scene.add(smt_avatar_obj);\r\n        \r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    loadST: async function(st_code, options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            scale: _DEFAULT.scale.st\r\n        }\r\n        var settings = $.extend(defaults, options); \r\n\r\n        // st_code job\r\n        // {\r\n        // \t\"hair\": \"HM1\",\r\n        // \t\"eyewear\": \"EM2\",\r\n        // \t\"face\": \"FM3\",\r\n        // \t\"outfit\": \"OM1\",\r\n        // \t\"asset\": \"A2\",\r\n        // \t\"background_text\": \"T6\"\r\n        // }\r\n\r\n        var obj_st = {}  \r\n\r\n        // console.log(typeof st_code);\r\n\r\n        switch (typeof st_code) {\r\n            case \"object\":\r\n                obj_st = st_code;\r\n                break;\r\n            case \"string\":\r\n            default:\r\n                let array_st = st_code.split(\"-\");\r\n                obj_st = {\r\n                    \"hair\": array_st[0],\r\n                    \"eyewear\": array_st[1],\r\n                    \"face\": array_st[2],\r\n                    \"outfit\": array_st[3],\r\n                    \"asset\": array_st[4],\r\n                    \"background_text\": array_st[5]\r\n                }; \r\n                break;\r\n        }\r\n\r\n        // LOAD 2D\r\n        starter_background_2d = settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.twod;\r\n        starter_face_2d = settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.twod;\r\n        starter_hair_2d = settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.twod;\r\n        starter_outfit_2d = settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.twod;\r\n        starter_asset_2d = settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.twod;\r\n        starter_eyewear_2d = settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.twod;\r\n        \r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${starter_background_2d}\" alt=\"background_text\">\r\n            <img src=\"${starter_face_2d}\" alt=\"face\">\r\n            <img src=\"${starter_hair_2d}\" alt=\"hair\">\r\n            <img src=\"${starter_outfit_2d}\" alt=\"outfit\">\r\n            <img src=\"${starter_asset_2d}\" alt=\"asset\">\r\n            <img src=\"${starter_eyewear_2d}\" alt=\"eyewear\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n        \r\n        const \r\n            glbLoader = new GLTFLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [\r\n            starter_background_data,\r\n            starter_face_data, \r\n            starter_hair_data,\r\n            starter_outfit_data,\r\n            starter_asset_data,\r\n            starter_eyewear_data        \r\n        ] = await Promise.all([\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.st\r\n            ),\r\n        ]);\r\n\r\n        starter_background_obj = starter_background_data.scene.children[0];\r\n        starter_face_obj = starter_face_data.scene.children[0];\r\n        starter_hair_obj = starter_hair_data.scene.children[0];\r\n        starter_outfit_obj = starter_outfit_data.scene.children[0];\r\n        starter_asset_obj = starter_asset_data.scene.children[0];\r\n        starter_eyewear_obj = starter_eyewear_data.scene.children[0];\r\n\r\n        // LOAD TEXTURE\r\n        const background_texture = {\r\n            // map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.base_color),\r\n            // metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            // normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            // roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.ambient_occlusion),\r\n        }\r\n        const face_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const hair_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        // outfit_texture.map.encoding = THREE.sRGBEncoding;\r\n\r\n        // skin in outfit\r\n        const skinin_texture = {\r\n            map: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + \"Bodybase/Bodybase\" + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const asset_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const eyewear_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.ambient_occlusion),\r\n            alphaMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.alpha),\r\n        }\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        starter_background_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_background_obj.receiveShadow = true;\r\n        starter_background_obj.castShadow = true;\r\n        var texture_background = new THREE.MeshStandardMaterial({\r\n            ...background_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        starter_background_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_background;\r\n            }\r\n        });\r\n        console.log(\"BG/Text: \");\r\n        console.log(starter_background_obj);\r\n        //---\r\n        starter_face_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_face_obj.receiveShadow = true;\r\n        starter_face_obj.castShadow = true;\r\n        var texture_face = new THREE.MeshStandardMaterial({\r\n            ...face_texture,\r\n            ...settings.texture_options.st_face\r\n        });\r\n        starter_face_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_face;\r\n            }\r\n        });\r\n        console.log(\"Face: \");\r\n        console.log(starter_face_obj);\r\n        //--- \r\n        starter_hair_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_hair_obj.receiveShadow = true;\r\n        starter_hair_obj.castShadow = true;\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...hair_texture,\r\n            ...settings.texture_options.st_hair\r\n        });\r\n        starter_hair_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_hair;\r\n            }\r\n        });\r\n        console.log(\"Hair: \");\r\n        console.log(starter_hair_obj);\r\n        //---\r\n        starter_outfit_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_outfit_obj.receiveShadow = true;\r\n        starter_outfit_obj.castShadow = true;\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.st_outfit\r\n        });\r\n        var texture_skinin = new THREE.MeshStandardMaterial({\r\n            ...skinin_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        starter_outfit_obj.children[1].traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_outfit;\r\n            }\r\n        });\r\n        starter_outfit_obj.children[0].traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_skinin;\r\n            }\r\n        });\r\n        console.log(\"Outfit: \");\r\n        console.log(starter_outfit_obj);\r\n        //---\r\n        starter_asset_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_asset_obj.receiveShadow = true;\r\n        starter_asset_obj.castShadow = true;\r\n        var texture_asset = new THREE.MeshStandardMaterial({\r\n            ...asset_texture,\r\n            ...settings.texture_options.st_asset\r\n        });\r\n        var texture_skinin = new THREE.MeshStandardMaterial({\r\n            ...skinin_texture,\r\n            ...settings.texture_options.st_skin\r\n        });\r\n        starter_asset_obj.traverse((o) => {\r\n            if (o.isMesh && [\"mesh_1\"].indexOf(o.name) > -1) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_asset;\r\n            } else {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_skinin;\r\n            }\r\n        });\r\n        console.log(\"Asset: \");\r\n        console.log(starter_asset_obj);\r\n        //---\r\n        starter_eyewear_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_eyewear_obj.receiveShadow = true;\r\n        starter_eyewear_obj.castShadow = true;\r\n        var texture_eyewear = new THREE.MeshStandardMaterial({\r\n            ...eyewear_texture,\r\n            ...settings.texture_options.st_eyewear\r\n        });\r\n        starter_eyewear_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_eyewear;\r\n            }\r\n        });\r\n        console.log(\"Eyewear: \");\r\n        console.log(starter_eyewear_obj);\r\n        \r\n        // ADD ST OBJ TO SCENE\r\n        scene.add(starter_background_obj);\r\n        scene.add(starter_face_obj);\r\n        scene.add(starter_hair_obj);\r\n        scene.add(starter_outfit_obj);\r\n        scene.add(starter_asset_obj);\r\n        scene.add(starter_eyewear_obj);\r\n\r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    // ========\r\n\r\n    loadDefaultBg: async function (options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        const glbLoader = new GLTFLoader();\r\n\r\n        [test_background_data] = await Promise.all([\r\n            glbLoader.loadAsync(avatar.default_bg)\r\n        ]);\r\n\r\n        test_background_obj = test_background_data.scene.children[0];\r\n        scene.add(test_background_obj);\r\n\r\n        test_background_obj.receiveShadow = false;\r\n        test_background_obj.castShadow = true;\r\n\r\n        test_background_obj.scale.set(10, 10, 10);\r\n        test_background_obj.position.set(0, 5, 0);\r\n        // test_background_obj.material = new THREE.MeshLambertMaterial({\r\n        //     emissive: 0x593b00,\r\n        //     emissiveIntensity: .8\r\n        // });\r\n        test_background_obj.material = new THREE.MeshLambertMaterial({\r\n            color: 0x0083ad,\r\n            emissive: 0x0083ad,\r\n            emissiveIntensity: 1\r\n        });\r\n\r\n        // const box_helper = new THREE.BoxHelper( obj_bg, 0xffff00 );\r\n        // scene.add(box_helper);\r\n\r\n        console.log(test_background_obj);\r\n    },\r\n\r\n    // ========\r\n\r\n    setup: {\r\n        all: function(options){\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options); \r\n            avatar.setup.scene();\r\n            avatar.setup.camera();\r\n            avatar.setup.renderer(); // => renderer\r\n            avatar.setup.post_processing(); // => composer\r\n            avatar.setup.controls();\r\n            avatar.setup.lights(_DEFAULT.light_options);\r\n        },\r\n        lights: function(options) {\r\n            var defaults = {\r\n                environment_light: {\r\n                    enable: true,\r\n                    options: {\r\n                        dir: \"assets/hdr/\",\r\n                        hdri_file: \"provence_studio_1k_edit.hdr\", \r\n                        enable_background: false,\r\n                        intensity: 1,\r\n                    }\r\n                },\r\n                ambient_light: {\r\n                    enable: true,\r\n                    options: {\r\n                        color: 0xffffff,\r\n                        intensity: .1\r\n                    }\r\n                },\r\n                hemisphere_light: { \r\n                    enable: false,\r\n                    options: {\r\n                        skyColor: 0xffffff,\r\n                        groundColor: 0xffffff,\r\n                        intensity: 1,\r\n                        position: {\r\n                            x: 0, y: 50, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                directional_light: {\r\n                    enable: false,\r\n                    options: {\r\n                    }\r\n                },\r\n                key_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 30,\r\n                        intensity: .95,\r\n                        angle: Math.PI/ 2,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 4, y: 3, z: 4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                fill_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffe0a9,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .5,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: -7, y: 3, z: 6\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                back_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .9,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 2, z: -4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                top_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .4,\r\n                        angle: Math.PI/ 5,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 8, z: 3\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 1\r\n                        }\r\n                    }\r\n                },\r\n                bottom_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .4,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: -1, z: 2\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 3, z: 0\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.environment_light.enable) {\r\n\r\n                new THREE.RGBELoader()\r\n                    .setPath(settings.environment_light.options.dir)\r\n                    .load(settings.environment_light.options.hdri_file, function (texture) {\r\n                        texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                        if (settings.environment_light.options.enable_background) {\r\n                            scene.background = texture;\r\n                        }\r\n                        scene.environment = texture;\r\n                    });\r\n            } \r\n\r\n            // \r\n\r\n            light.ambient = helper.create_light.amb_light(settings.ambient_light);\r\n            if (settings.ambient_light.enable) {\r\n                scene.add(light.ambient);\r\n\r\n            }\r\n            \r\n            \r\n            // helper.create_light.environment_light(settings.environment_light.options);\r\n    \r\n            light.key = helper.create_light.spot_light(settings.key_light);\r\n            if (settings.key_light.enable) {\r\n                scene.add( light.key);\r\n                scene.add( light.key.target );\r\n                if (settings.key_light.helper) {\r\n                    console.log(light.key);\r\n                }\r\n            }\r\n    \r\n            \r\n            light.fill = helper.create_light.spot_light(settings.fill_light);\r\n            if (settings.fill_light.enable) {\r\n                scene.add( light.fill);\r\n                scene.add( light.fill.target );\r\n                if (settings.fill_light.helper) {\r\n                    console.log(light.fill);\r\n                }\r\n            }\r\n            \r\n            light.back = helper.create_light.spot_light(settings.back_light);\r\n            if (settings.back_light.enable) {\r\n                scene.add( light.back);\r\n                scene.add( light.back.target );\r\n                if (settings.back_light.helper) {\r\n                    console.log(light.back);\r\n                }\r\n            }\r\n            \r\n            light.top = helper.create_light.spot_light(settings.top_light);\r\n            if (settings.top_light.enable) {\r\n                scene.add( light.top);\r\n                scene.add( light.top.target );\r\n                if (settings.top_light.helper) {\r\n                    console.log(light.top);\r\n                }\r\n            }\r\n            \r\n            light.bottom = helper.create_light.spot_light(settings.bottom_light);\r\n            if (settings.bottom_light.enable) {\r\n                scene.add( light.bottom);\r\n                scene.add( light.bottom.target );\r\n                if (settings.bottom_light.helper) {\r\n                    console.log(light.bottom);\r\n                }\r\n            }\r\n\r\n            if (settings.hemisphere_light.enable) {\r\n                light.hemi = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\r\n                light.hemi.color.setHSL(0.6, 1, 0.6);\r\n                light.hemi.groundColor.setHSL(0.095, 1, 0.75);\r\n                light.hemi.position.set(0, 50, 0);\r\n                scene.add(light.hemi);\r\n    \r\n                if (avatar.helper) {\r\n                    const light_hemi_helper = new THREE.HemisphereLightHelper(light.hemi, 10);\r\n                    scene.add(light_hemi_helper);\r\n                }\r\n            }\r\n\r\n            // if (settings.ambient_light.enable) {\r\n            //     light.hemi = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\r\n            //     light.hemi.color.setHSL(0.6, 1, 0.6);\r\n            //     light.hemi.groundColor.setHSL(0.095, 1, 0.75);\r\n            //     light.hemi.position.set(0, 50, 0);\r\n            //     scene.add(light.hemi);\r\n    \r\n            //     if (avatar.helper) {\r\n            //         const light_hemi_helper = new THREE.HemisphereLightHelper(light.hemi, 10);\r\n            //         scene.add(light_hemi_helper);\r\n            //     }\r\n            // }\r\n    \r\n            if (settings.directional_light.enable) {\r\n                light.dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light.dir.color.setHSL(0.1, 1, 0.95);\r\n                light.dir.position.set(- 1, 1.75, 1);\r\n                light.dir.position.multiplyScalar(100);\r\n                if (settings.light.dir) {\r\n                    scene.add(light.dir);\r\n                }\r\n    \r\n                light.dir.castShadow = true;\r\n    \r\n                light.dir.shadow.mapSize.width = 2048;\r\n                light.dir.shadow.mapSize.height = 2048;\r\n    \r\n                const d = 50;\r\n    \r\n                light.dir.shadow.camera.left = - d;\r\n                light.dir.shadow.camera.right = d;\r\n                light.dir.shadow.camera.top = d;\r\n                light.dir.shadow.camera.bottom = - d;\r\n    \r\n                light.dir.shadow.camera.far = 3500;\r\n                light.dir.shadow.bias = - 0.0001;\r\n    \r\n                if (settings.light.dir && avatar.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light.dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        },\r\n        scene: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            scene = new THREE.Scene();\r\n            scene.background = new THREE.Color().setHSL(0, 0, 0);\r\n            // scene.fog = new THREE.Fog(scene.background, 1, 5000);\r\n            scene.fog = new THREE.FogExp2( 0xffffff, .0 );\r\n        },\r\n        renderer: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            renderer = new THREE.WebGLRenderer({\r\n                antialias: true\r\n            });\r\n            renderer.setPixelRatio( window.devicePixelRatio );\r\n            renderer.setSize(avatar.dom_width, avatar.dom_height);\r\n\r\n            renderer.shadowMap.enabled = true;\r\n            renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n            // renderer.toneMapping = THREE.ACESFilmicToneMapping;\r\n            // renderer.toneMappingExposure = .5;\r\n            // renderer.gammaOutput = true;\r\n            // renderer.gammaFactor = -.1;\r\n            // renderer.toneMappingExposure = 1.02;\r\n\r\n            // composer = new EffectComposer(renderer);\r\n\r\n            $(avatar.rendered_element).append(renderer.domElement); \r\n            window.addEventListener( 'resize', avatar.setup.onWindowResize );\r\n\r\n        },\r\n        post_processing: function(options) {\r\n            var defaults = {\r\n                lut_asset: _DEFAULT.post_processing.lut_asset,\r\n                lut_file: _DEFAULT.post_processing.lut_file,\r\n            }\r\n            var settings = $.extend(defaults, options); \r\n\r\n            // ======\r\n            \r\n            const target = new THREE.WebGLRenderTarget( {\r\n                minFilter: THREE.LinearFilter,\r\n                magFilter: THREE.LinearFilter,\r\n                format: THREE.RGBAFormat,\r\n                encoding: THREE.sRGBEncoding\r\n            } );\r\n\r\n            composer = new EffectComposer( renderer, target );\r\n            composer.setPixelRatio( window.devicePixelRatio );\r\n            composer.setSize( avatar.dom_width, avatar.dom_height );\r\n            \r\n            const renderPass = new RenderPass( scene, camera ),\r\n                fxaaPass = new ShaderPass( FXAAShader ),\r\n                shaderPass = new ShaderPass( GammaCorrectionShader );\r\n\r\n            // renderPass.clearColor = new THREE.Color( 0, 0, 0 );\r\n            // renderPass.clearAlpha = 0;\r\n\r\n\r\n            composer.addPass( renderPass );\r\n            composer.addPass( fxaaPass );\r\n            composer.addPass( shaderPass );\r\n\r\n            lutPass = new LUTPass();\r\n            composer.addPass( lutPass );\r\n\r\n            // LOADER\r\n            const \r\n                LUTCUBELoader = new LUTCubeLoader(),\r\n                LUT3DLLOADER = new LUT3dlLoader();\r\n\r\n            if ( /\\.CUBE$/i.test( settings.lut_file ) ) {\r\n                LUTCUBELoader.load( settings.lut_asset + settings.lut_file, function ( result ) {\r\n                    lutMap = result;\r\n                    console.log(lutMap);\r\n                });\r\n            } else {\r\n                LUT3DLLOADER.load( settings.lut_asset + settings.lut_file, function ( result ) {\r\n                    lutMap = result;\r\n                    console.log(lutMap);\r\n                });\r\n            }\r\n            \r\n\r\n             \r\n        },\r\n        onWindowResize: function (options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            camera.aspect = avatar.dom_width / avatar.dom_height;\r\n            camera.updateProjectionMatrix();\r\n\r\n            renderer.setSize(avatar.dom_width, avatar.dom_height );\r\n            if (composer) {\r\n                composer.setSize(avatar.dom_width, avatar.dom_height );\r\n            }\r\n\r\n            avatar.setup.animate();\r\n        },\r\n        camera: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            camera = new THREE.PerspectiveCamera(\r\n                75,\r\n                avatar.dom_width / avatar.dom_height,\r\n                0.1,\r\n                1000);\r\n            // camera.position.set(2, 4.1, 5.3);\r\n            camera.position.set(0.6, 4.4, 5.9);\r\n            // camera.position.set(15.7, 58.4, 60.5);\r\n            camera.lookAt(0, 10, 0);\r\n        },\r\n        controls: function(options) {\r\n            var defaults = {\r\n                minDistance: 4,\r\n                maxDistance: 9,\r\n                zoomSpeed: 1,\r\n                rotateSpeed: 1,\r\n                enableDamping: true,\r\n                enablePan: false,\r\n                dampingFactor: 0.1,\r\n                autoRotate: true,\r\n                autoRotateSpeed: 0.5,\r\n                minPolarAngle: .8,\r\n                maxPolarAngle: 1.8,\r\n                target: {\r\n                    x: 0, y: 2.3, z: 0\r\n                } \r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            controls = new THREE.OrbitControls(camera, renderer.domElement);\r\n            controls.minDistance = settings.minDistance;\r\n            controls.maxDistance = settings.maxDistance;\r\n            controls.zoomSpeed = settings.zoomSpeed;\r\n            controls.rotateSpeed = settings.rotateSpeed;\r\n            controls.enableDamping = settings.enableDamping;\r\n            controls.enablePan = settings.enablePan;\r\n            controls.dampingFactor = settings.dampingFactor;\r\n            controls.autoRotate = settings.autoRotate;\r\n            controls.autoRotateSpeed = settings.autoRotateSpeed;\r\n            controls.minPolarAngle = settings.minPolarAngle;\r\n            controls.maxPolarAngle = settings.maxPolarAngle;\r\n    \r\n            controls.target.set(\r\n                settings.target.x,\r\n                settings.target.y,\r\n                settings.target.z\r\n            );\r\n        },\r\n        helpers: function(options){\r\n            var defaults = {\r\n                gridHelper: {\r\n                    enable: false,\r\n                    size : 100,\r\n                    divisions : 100,\r\n                    colorCenterLine : 0x0000ff,\r\n                    colorGrid : 0x808080\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.gridHelper.enable) {\r\n                const gridHelper = new THREE.GridHelper( \r\n                    settings.gridHelper.size ,  \r\n                    settings.gridHelper.divisions ,  \r\n                    settings.gridHelper.colorCenterLine ,  \r\n                    settings.gridHelper.colorGrid ,  \r\n                );\r\n                scene.add( gridHelper );\r\n            }\r\n        },\r\n        post_renderer: function (options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            avatar.setup.animate();\r\n            controls.addEventListener('change', function () {\r\n                avatar.setup.render();\r\n            });\r\n            controls.update();\r\n        },\r\n        render: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            if (composer) {\r\n                composer.render(scene, camera); \r\n            } else {\r\n                renderer.render(scene, camera);\r\n            }\r\n        },\r\n        animate: function(options) {\r\n            requestAnimationFrame( avatar.setup.animate );\r\n            const delta = clock.getDelta();\r\n    \r\n            // if (obj_text) {\r\n            //     avatar.lookAtObj();\r\n            // }\r\n            if ( mixer ) mixer.update( delta );\r\n    \r\n            avatar.callback();\r\n            avatar.setup.render();\r\n\r\n            // console.log()\r\n            // console.log(lutMap);\r\n\r\n            if (lutMap) {\r\n                // console.log(lutMap);\r\n                lutPass.enable = _DEFAULT.post_processing.lutPass_options.enable,\r\n                lutPass.lut = lutMap.texture;\r\n                lutPass.intensity = _DEFAULT.post_processing.lutPass_options.intensity;\r\n            }\r\n\r\n            // console.log(composer);\r\n        }\r\n    },\r\n    callback: function(options){\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n    },\r\n\r\n    // ======\r\n\r\n    switch: function(options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        $(\"body\").append(`\r\n        <div class=\"controls\">\r\n\t\t\t<input type=\"checkbox\" id=\"switch_avatar\" class=\"switch_avatar\">\r\n\t\t\t<label for=\"switch_avatar\">Switch to <span class=\"dim\">3</span>D</label>\r\n\t\t</div>\r\n        `)\r\n\r\n        var url = new URL(window.location.href);\r\n        var dim = url.searchParams.get(\"dim\");\r\n\r\n        // if ($(avatar.switch_element).prop('checked', true)) {\r\n        //     $(avatar.rendered_element).removeClass(\"active\");\r\n        //     $(avatar.layered_element).addClass(\"active\");\r\n        //     $(avatar.switch_element + \" + label .dim\").html(2);\r\n        // } else {\r\n        //     $(avatar.layered_element).removeClass(\"active\");\r\n        //     $(avatar.rendered_element).addClass(\"active\");\r\n        //     $(avatar.switch_element + \" + label .dim\").html(3);\r\n        // }\r\n\r\n        if ($(avatar.switch_element).length > 0) {\r\n\r\n        }\r\n        \r\n        $(avatar.switch_element).on(\"click\", function(){\r\n            if ($(avatar.switch_element).is(':checked')) {\r\n                console.log(\"A\");\r\n                $(avatar.rendered_element).removeClass(\"active\");\r\n                $(avatar.layered_element).addClass(\"active\");\r\n                $(avatar.switch_element + \" + label .dim\").html(3);\r\n            } else {\r\n                console.log(\"B\");\r\n                $(avatar.layered_element).removeClass(\"active\");\r\n                $(avatar.rendered_element).addClass(\"active\");\r\n                $(avatar.switch_element + \" + label .dim\").html(2);\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nvar debug = {\r\n    freeCamera: () => {\r\n        controls.minDistance = 0;\r\n        controls.maxDistance = Infinity;\r\n        controls.zoomSpeed = 1;\r\n        controls.rotateSpeed = 1;\r\n        controls.enableDamping = false;\r\n        controls.enablePan = true;\r\n        controls.autoRotate = true;\r\n        controls.autoRotateSpeed = 1;\r\n        controls.maxPolarAngle = Math.PI;\r\n    },\r\n    getCamera: () => camera,\r\n    getControls: () => controls,\r\n    getObject: (obj_name) => {\r\n        switch (obj_name) {\r\n            case 'smt_background_obj': return smt_background_obj;\r\n            case 'smt_avatar_obj': return smt_avatar_obj;\r\n            case 'starter_background_obj': return starter_background_obj;\r\n            case 'starter_face_obj': return starter_face_obj;\r\n            case 'starter_hair_obj': return starter_hair_obj;\r\n            case 'starter_outfit_obj': return starter_outfit_obj;\r\n            case 'starter_asset_obj': return starter_asset_obj;\r\n            case 'starter_eyewear_obj': return starter_eyewear_obj;\r\n            case 'light.hemi': return light.hemi;\r\n            case 'light.dir': return light.dir;\r\n            case 'light.key': return light.key;\r\n            case 'light.fill': return light.fill;\r\n            case 'light.back': return light.back;\r\n            case 'light.top': return light.top;\r\n            case 'light.bottom': return light.bottom;\r\n        }\r\n    },\r\n    watch: (object_to_watch) => {\r\n        avatar.callback = function() {\r\n            console.log(object_to_watch);\r\n        }\r\n        return \"[ debug watch started ]\"\r\n    },\r\n    endWatch: () => {\r\n        avatar.callback = function() {\r\n        }\r\n        return \"[ debug watch ended ]\"\r\n    }\r\n}\r\n\r\nexport {avatar, debug};","import config from \"../../setup/config\";\r\nimport bootstrap from 'bootstrap';\r\nimport {avatar, debug} from \"./avatar/main\";\r\n\r\n$(function () {\r\n    avatar.init();\r\n    avatar.switch();\r\n\r\n    // debug.freeCamera();\r\n});\r\n\r\nwindow.addEventListener(\"load\", function(){\r\n    // avatar.loadSMT(\"SMT1\");\r\n\r\n    var url = new URL(window.location.href);\r\n    var smt_code = url.searchParams.get(\"load_smt\");\r\n    if (typeof smt_code != \"undefined\" && smt_code != null) {\r\n        if (smt_code.length == 0) smt_code = \"SMT1\";\r\n        avatar.loadDefaultBg();\r\n        avatar.loadSMT(smt_code);\r\n    }\r\n\r\n    var st_code = url.searchParams.get(\"load_st\");\r\n    // console.log(st_code);\r\n    if (typeof st_code != \"undefined\" && st_code != null) {\r\n        if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n        avatar.loadDefaultBg();\r\n        avatar.loadST(st_code); \r\n    }\r\n\r\n    var dim = url.searchParams.get(\"dim\");\r\n    // console.log(dim);\r\n    switch (dim) {\r\n        case \"2\": \r\n            if ($(\"#layered_avatar\").length > 0) {\r\n                $(\"#layered_avatar\").addClass(\"active\");\r\n                $(\"#switch_avatar\").prop(\"checked\", true);\r\n                $(\"#switch_avatar + label .dim\").html(3);\r\n            }\r\n            break;\r\n        case \"3\": default: \r\n            if ($(\"#rendered_avatar\").length > 0) {\r\n                $(\"#rendered_avatar\").addClass(\"active\");\r\n                $(\"#switch_avatar\").prop(\"checked\", false);\r\n                $(\"#switch_avatar + label .dim\").html(2);\r\n            }\r\n            \r\n            break;\r\n    }\r\n});\r\n\r\n \r\nwindow.debug = debug;","// extracted by mini-css-extract-plugin\nexport {};","var config = {\r\n    widthTriggerScale: 9999,\r\n    widthDesktopSafe: 1620,\r\n    widthDesktop: 2000,\r\n    widthMobile: 768,\r\n    heightDesktop: 1000,\r\n    heightMobile: 1000,\r\n    func: {\r\n        isMobile: function(){\r\n            var device = {\r\n                width: $(window).innerWidth(),\r\n                height: $(window).innerHeight()\r\n            };\r\n\r\n            return ((device.width <= config.widthMobile) || (device.width < device.height));\r\n        }\r\n    }\r\n}\r\n\r\nexport default config;"],"sourceRoot":""}