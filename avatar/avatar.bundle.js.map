{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/avatar/index.js","webpack:///./src/avatar/js/avatar/_helper.js","webpack:///./src/avatar/js/avatar/main.js","webpack:///./src/avatar/js/index.js","webpack:///./src/avatar/scss/index.scss?1402","webpack:///./src/setup/config.js"],"names":["helper","create_light","environment_light","options","defaults","enable","dir","hdri_file","enable_background","settings","$","extend","THREE","setPath","load","texture","mapping","scene","background","environment","point_light","debug_color","color","decay","distance","intensity","physically_correct","power","shadow_bias","map_size_width","map_size_height","camera_near","camera_far","position","x","y","z","sphere_light","obj_light","add","castShadow","shadow","bias","set","dir_light","light_dir","setHSL","multiplyScalar","mapSize","width","height","d","camera","left","right","top","bottom","far","web3d","light_dir_helper","spot_light","angle","Math","PI","penumbra","cast_shadow","shadow_map_size_width","shadow_map_size_height","shadow_camera_near","shadow_camera_far","shadow_focus","target","near","focus","receiveShadow","lightHelper","shadowCameraHelper","loading","enableLoading","rendered_element","className","addClass","removeClass","clean","avatar","debug","renderer","controls","mixer","light","hemi","key","fill","back","clock","test_background_data","test_background_obj","smt_background_data","smt_background_obj","smt_background_2d","smt_avatar_data","smt_avatar_obj","smt_avatar_2d","starter_background_data","starter_background_obj","starter_background_2d","starter_face_data","starter_face_obj","starter_face_2d","starter_hair_data","starter_hair_obj","starter_hair_2d","starter_outfit_data","starter_outfit_obj","starter_outfit_2d","starter_asset_data","starter_asset_obj","starter_asset_2d","starter_eyewear_data","starter_eyewear_obj","starter_eyewear_2d","_DEFAULT","layered_element","switch_element","asset_dir","scale","smt","st","texture_options","smt_skin","aoMapIntensity","smt_outfit","emissiveIntensity","normalScale","smt_teeth","roughness","smt_hair","aoMap","st_background","st_face","st_hair","st_outfit","st_asset","st_eyewear","model_suffix","twod","texture_suffix","base_color","metallic","normal","ambient_occlusion","emissive","alpha","scattering","thickness","sss","texture_skin_suffix","default_bg","dom_width","dom_height","init","innerWidth","innerHeight","setup","all","post_renderer","helpers","loadSMT","smt_code","empty","append","fbxLoader","FBXLoader","texLoader","Promise","loadAsync","skin_texture","map","metalnessMap","normalMap","roughnessMap","outfit_texture","emissiveMap","action","clipAction","animations","play","texture_skin","texture_outfit","texture_teeth","texture_hair","traverse","o","isMesh","indexOf","name","material","loadST","st_code","obj_st","array_st","split","glbLoader","GLTFLoader","children","background_texture","face_texture","hair_texture","asset_texture","eyewear_texture","alphaMap","texture_background","console","log","texture_face","texture_asset","texture_eyewear","loadDefaultBg","lights","fog","antialias","setPixelRatio","window","devicePixelRatio","setSize","domElement","lookAt","minDistance","maxDistance","zoomSpeed","rotateSpeed","enableDamping","enablePan","dampingFactor","autoRotate","autoRotateSpeed","minPolarAngle","maxPolarAngle","hemisphere_light","skyColor","groundColor","directional_light","key_light","fill_light","back_light","top_light","bottom_light","light_hemi_helper","gridHelper","size","divisions","colorCenterLine","colorGrid","animate","addEventListener","render","update","requestAnimationFrame","delta","getDelta","callback","switch","current_status","freeCamera","Infinity","getCamera","getControls","getObject","obj_name","watch","object_to_watch","endWatch","url","URL","location","href","searchParams","get","length","dim","config","widthTriggerScale","widthDesktopSafe","widthDesktop","widthMobile","heightDesktop","heightMobile","func","isMobile","device"],"mappings":"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","file":"avatar.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"0\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import \"./js/index.js\";\r\nimport \"./scss/index.scss\";","import * as THREE from 'three';\r\n\r\nvar helper = {\r\n    create_light: {\r\n        environment_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                options: {\r\n                    dir: \"assets/hdr/\",\r\n                    hdri_file: \"provence_studio_1k_edit.hdr\",\r\n                    enable_background: false,\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            new THREE.RGBELoader()\r\n                .setPath(settings.dir)\r\n                .load(settings.hdri_file, function (texture) {\r\n                    texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                    if (settings.enable_background) {\r\n                        scene.background = texture;\r\n                    }\r\n                    scene.environment = texture;\r\n                });\r\n        },\r\n        point_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            var sphere_light = new THREE.SphereGeometry(0.2, 32, 32);\r\n\r\n            if (settings.options) {\r\n                var obj_light = new THREE.PointLight(\r\n                    settings.options.color, \r\n                    settings.options.intensity, \r\n                    settings.options.distance,\r\n                    settings.options.decay,\r\n                    settings.options.physically_correct,\r\n                );\r\n                if (settings.helper) {\r\n                    obj_light.add(new THREE.Mesh(\r\n                        sphere_light, \r\n                        new THREE.MeshBasicMaterial({ color: settings.options.debug_color })\r\n                    ));\r\n                }\r\n                obj_light.castShadow = true;\r\n                obj_light.shadow.bias = settings.options.shadow_bias;\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n    \r\n                return obj_light\r\n            }\r\n\r\n        },\r\n        dir_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 100,\r\n                    intensity: .6,\r\n                    physically_correct: 0.0,\r\n                    power: 0.0,\r\n                    shadow_bias: - 0.01,\r\n                    map_size_width: 1000, \r\n                    map_size_height: 2000, \r\n                    camera_near: 0.5,\r\n                    camera_far: 500,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n\r\n            if (settings.enable) {\r\n                light_dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light_dir.color.setHSL(0.1, 1, 0.95);\r\n                light_dir.position.set(- 1, 1.75, 1);\r\n                light_dir.position.multiplyScalar(100);\r\n                if (settings.light_dir) {\r\n                    scene.add(light_dir);\r\n                }\r\n\r\n                light_dir.castShadow = true;\r\n\r\n                light_dir.shadow.mapSize.width = 2048;\r\n                light_dir.shadow.mapSize.height = 2048;\r\n\r\n                const d = 50;\r\n\r\n                light_dir.shadow.camera.left = - d;\r\n                light_dir.shadow.camera.right = d;\r\n                light_dir.shadow.camera.top = d;\r\n                light_dir.shadow.camera.bottom = - d;\r\n\r\n                light_dir.shadow.camera.far = 3500;\r\n                light_dir.shadow.bias = - 0.0001;\r\n\r\n                if (settings.light_dir && web3d.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light_dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        },\r\n        spot_light: function (options) {\r\n            var defaults = {\r\n                enable: true,\r\n                helper: false,\r\n                options: {\r\n                    debug_color: 0xff0000,\r\n                    color: 0xffffff,\r\n                    decay: 1,\r\n                    distance: 0,\r\n                    intensity: .6,\r\n                    angle: Math.PI/ 3,\r\n                    penumbra: 0,\r\n                    cast_shadow: true,\r\n                    shadow_map_size_width: 512,\r\n                    shadow_map_size_height: 512,\r\n                    shadow_camera_near: 10,\r\n                    shadow_camera_far: 200,\r\n                    shadow_focus: 1,\r\n                    position: {\r\n                        x: 4, y: 4, z: 4\r\n                    },\r\n                    target: {\r\n                        x: 4, y: 4, z: 4\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            \r\n            if (settings.enable) {\r\n                var obj_light = new THREE.SpotLight( \r\n                    settings.options.color,  \r\n                    settings.options.intensity, \r\n                    settings.options.distance, \r\n                    settings.options.angle, \r\n                    settings.options.penumbra,  \r\n                    settings.options.decay\r\n                );\r\n\r\n                obj_light.position.set(\r\n                    settings.options.position.x, \r\n                    settings.options.position.y, \r\n                    settings.options.position.z, \r\n                );\r\n                \r\n                obj_light.angle = settings.options.angle;\r\n                obj_light.penumbra = settings.options.penumbra;\r\n                obj_light.decay = settings.options.decay;\r\n                obj_light.distance = settings.options.distance;\r\n    \r\n                obj_light.castShadow = settings.options.cast_shadow;\r\n                obj_light.shadow.mapSize.width = settings.options.shadow_map_size_width;\r\n                obj_light.shadow.mapSize.height = settings.options.shadow_map_size_height;\r\n                obj_light.shadow.camera.near = settings.options.shadow_camera_near;\r\n                obj_light.shadow.camera.far = settings.options.shadow_camera_far;\r\n                obj_light.shadow.focus = settings.options.shadow_focus;\r\n\r\n                obj_light.receiveShadow = true;\r\n                obj_light.castShadow = true;\r\n\r\n                obj_light.target.position.set(\r\n                    settings.options.target.x, \r\n                    settings.options.target.y, \r\n                    settings.options.target.z\r\n                )\r\n\r\n                // obj_light.target.x =  settings.options.target.x; \r\n                // obj_light.target.y =  settings.options.target.y; \r\n                // obj_light.target.z =  settings.options.target.z; \r\n                //     settings.options.target.y, \r\n                //     settings.options.target.z, \r\n                // ;\r\n\r\n                // console.log(obj_light);\r\n                \r\n                if (settings.helper) {\r\n                    var lightHelper = new THREE.SpotLightHelper( obj_light );\r\n                    var shadowCameraHelper = new THREE.CameraHelper( obj_light.shadow.camera );\r\n                    obj_light.add(lightHelper);\r\n                    obj_light.add(shadowCameraHelper);\r\n                }\r\n\r\n                return obj_light;\r\n    \r\n            }\r\n\r\n\r\n\r\n        }\r\n    },\r\n\r\n    loading: function(enableLoading, options) {\r\n        var defaults = {\r\n            rendered_element: \"#rendered_avatar\",\r\n            className: \"loading\"\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        if (enableLoading) {\r\n            $(settings.rendered_element).addClass(settings.className);\r\n        } else {\r\n            $(settings.rendered_element).removeClass(settings.className);\r\n        }\r\n    },\r\n\r\n    clean: function(scene, options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        // CLEAN 2D\r\n\r\n\r\n        // CLEAN 3D\r\n        \r\n    },\r\n\r\n\r\n\r\n}\r\n\r\nexport default helper;","import * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/js/controls/OrbitControls';\r\nimport { LightProbeGenerator } from 'three/examples/js/lights/LightProbeGenerator';\r\n\r\n// LOADER\r\n\r\nimport { RGBELoader } from 'three/examples/js/loaders/RGBELoader.js';\r\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\r\nimport { FBXLoader } from 'three/examples/jsm/loaders/FBXLoader.js';\r\n\r\n// \r\n\r\nimport helper from \"./_helper\";\r\nimport { TextureLoader } from 'three';\r\n\r\nvar avatar, debug;\r\n\r\nvar scene, camera, renderer, controls, mixer;\r\n\r\nvar light = {\r\n    hemi: {}, dir: {}, key: {}, fill: {},\r\n    back: {}, top: {}, bottom: {}\r\n}\r\n\r\nconst clock = new THREE.Clock();\r\n\r\n// OBJECT 3D\r\n\r\nvar test_background_data, test_background_obj;\r\n\r\nvar smt_background_data, smt_background_obj, smt_background_2d,\r\n    smt_avatar_data, smt_avatar_obj, smt_avatar_2d;\r\n\r\nvar starter_background_data, starter_background_obj, starter_background_2d,\r\n    starter_face_data, starter_face_obj, starter_face_2d,\r\n    starter_hair_data, starter_hair_obj, starter_hair_2d,\r\n    starter_outfit_data, starter_outfit_obj, starter_outfit_2d,\r\n    starter_asset_data, starter_asset_obj, starter_asset_2d,\r\n    starter_eyewear_data, starter_eyewear_obj, starter_eyewear_2d;\r\n\r\n// DEFAULT SETUP \r\n\r\nconst \r\n    _DEFAULT = {\r\n        rendered_element: \"#rendered_avatar\",\r\n        layered_element: \"#layered_avatar\",\r\n        switch_element: \"#switch_avatar\",\r\n        asset_dir: \"assets/avatar/\",\r\n        background: \"assets/bg-default.glb\",\r\n        scale: {\r\n            smt: {x: .1, y: .1, z: .1},\r\n            st: {x: .08, y: .08, z: .08},\r\n        },\r\n        texture_options: {\r\n            smt_skin: {\r\n                aoMapIntensity: .1,\r\n            },\r\n            smt_outfit: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5)\r\n            },\r\n            smt_teeth: {\r\n                aoMapIntensity: .1,\r\n                emissiveIntensity: 2,\r\n                normalScale: new THREE.Vector2(1.5, 1.5),\r\n                roughness: 3\r\n            },\r\n            smt_hair: {\r\n                aoMap: null,\r\n                aoMapIntensity: .1,\r\n                normalScale: new THREE.Vector2(-1, -1)\r\n            },\r\n            st_background: {},\r\n            st_face: {},\r\n            st_hair: {},\r\n            st_outfit: {},\r\n            st_asset: {},\r\n            st_eyewear: {}\r\n        },\r\n        model_suffix: {\r\n            smt: \".fbx\",\r\n            st: \".glb\",\r\n            twod: \".png\"\r\n        },\r\n        texture_suffix: {\r\n            base_color: \"_SHD_BaseColor.png\",\r\n            metallic: \"_SHD_Metallic.png\",\r\n            normal: \"_SHD_Normal.png\",\r\n            roughness: \"_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_SHD_AmbientOcclusion.png\",\r\n            emissive: \"_SHD_Emissive.png\",\r\n            alpha: \"_SHD_Opacity.png\",\r\n\r\n            scattering: \"_SHD_Scattering.png\",\r\n            thickness: \"_SHD_Thickness.png\",\r\n            sss: \"_SHD_SSS.png\"\r\n        },\r\n        texture_skin_suffix: {\r\n            base_color: \"_Skin_SHD_BaseColor.png\",\r\n            metallic: \"_Skin_SHD_Metallic.png\",\r\n            normal: \"_Skin_SHD_Normal.png\",\r\n            roughness: \"_Skin_SHD_Roughness.png\",\r\n            ambient_occlusion: \"_Skin_SHD_AmbientOcclusion.png\",\r\n\r\n            scattering: \"_Skin_SHD_Scattering.png\",\r\n            thickness: \"_Skin_SHD_Thickness.png\",\r\n            sss: \"_Skin_SHD_SSS.png\"\r\n        },\r\n    };\r\n\r\n// MAIN\r\n\r\navatar = {\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    rendered_element: _DEFAULT.rendered_element,\r\n    layered_element: _DEFAULT.layered_element,\r\n    switch_element: _DEFAULT.switch_element,\r\n    default_bg: _DEFAULT.background,\r\n    \r\n    dom_width: 100,\r\n    dom_height: 100,\r\n    asset_dir: _DEFAULT.asset_dir,\r\n\r\n    init: function(options) {\r\n        var defaults = {\r\n            rendered_element: _DEFAULT.rendered_element,\r\n            layered_element: _DEFAULT.layered_element,\r\n            switch_element: _DEFAULT.switch_element,\r\n            asset_dir: _DEFAULT.asset_dir\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        avatar.rendered_element = settings.rendered_element;\r\n        avatar.asset_dir = settings.asset_dir;\r\n        avatar.dom_width = $(avatar.rendered_element).innerWidth();\r\n        avatar.dom_height = $(avatar.rendered_element).innerHeight();\r\n\r\n\r\n        \r\n \r\n\r\n        avatar.setup.all();\r\n        avatar.setup.post_renderer();\r\n        avatar.setup.helpers();\r\n\r\n\r\n\r\n        // helper.setupEnvironment();\r\n    },\r\n\r\n    // =======\r\n\r\n    loadSMT: async function(smt_code, options = {}) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            scale: _DEFAULT.scale.smt\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n\r\n        // LOAD 2D\r\n        smt_avatar_2d = settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.twod\r\n\r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${smt_avatar_2d}\" alt=\"${smt_code}\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n\r\n        const \r\n            fbxLoader = new FBXLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [smt_avatar_obj] = await Promise.all([\r\n            fbxLoader.loadAsync(\r\n                settings.asset_dir + smt_code + \"/\" + smt_code + settings.model_suffix.smt\r\n            )\r\n        ]);\r\n\r\n        // LOAD TEXTURE \r\n        const skin_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_skin_suffix.ambient_occlusion),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.roughness),\r\n            aoMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.ambient_occlusion),\r\n            emissiveMap: texLoader.load(settings.asset_dir + smt_code + \"/\" + smt_code + settings.texture_suffix.emissive) \r\n        }\r\n\r\n        // LOAD ANIMATION\r\n        mixer = new THREE.AnimationMixer (smt_avatar_obj);\r\n        const action = mixer.clipAction(smt_avatar_obj.animations[ 0 ]);\r\n        action.play();\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        smt_avatar_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n\r\n        smt_avatar_obj.receiveShadow = true;\r\n        smt_avatar_obj.castShadow = true;\r\n\r\n        var texture_skin = new THREE.MeshStandardMaterial({\r\n            ...skin_texture,\r\n            ...settings.texture_options.smt_skin\r\n        });\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_outfit\r\n        });\r\n        var texture_teeth = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_teeth\r\n        });\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.smt_hair\r\n        });\r\n\r\n        smt_avatar_obj.traverse((o) => {\r\n \r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n            }\r\n\r\n            if (o.isMesh && [\"mesh_6\", \"mesh_7\", \"mesh_8\", \"neck_low\", \"hand_low\", \"Face_low\"].indexOf(o.name) > -1) {\r\n                // skin                \r\n                o.material = texture_skin;\r\n            }\r\n            else if (o.isMesh) {\r\n                // outfit\r\n                o.material = texture_outfit;\r\n            } \r\n\r\n            if (o.isMesh && [\"mesh_3\", \"Hair_low\"].indexOf( o.name ) > -1) {\r\n                o.material = texture_hair;\r\n            }\r\n\r\n            if (o.isMesh && o.name == \"Teeth_low\") {\r\n                o.material = texture_teeth;\r\n            }\r\n        });\r\n        \r\n        // ADD SMT OBJ TO SCENE\r\n        scene.add(smt_avatar_obj);\r\n        \r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    loadST: async function(st_code, options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            model_suffix: _DEFAULT.model_suffix,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n            scale: _DEFAULT.scale.st\r\n        }\r\n        var settings = $.extend(defaults, options); \r\n\r\n        // st_code job\r\n        // {\r\n        // \t\"hair\": \"HM1\",\r\n        // \t\"eyewear\": \"EM2\",\r\n        // \t\"face\": \"FM3\",\r\n        // \t\"outfit\": \"OM1\",\r\n        // \t\"asset\": \"A2\",\r\n        // \t\"background_text\": \"T6\"\r\n        // }\r\n\r\n        var obj_st = {}  \r\n\r\n        // console.log(typeof st_code);\r\n\r\n        switch (typeof st_code) {\r\n            case \"object\":\r\n                obj_st = st_code;\r\n                break;\r\n            case \"string\":\r\n            default:\r\n                let array_st = st_code.split(\"-\");\r\n                obj_st = {\r\n                    \"hair\": array_st[0],\r\n                    \"eyewear\": array_st[1],\r\n                    \"face\": array_st[2],\r\n                    \"outfit\": array_st[3],\r\n                    \"asset\": array_st[4],\r\n                    \"background_text\": array_st[5]\r\n                }; \r\n                break;\r\n        }\r\n\r\n        // LOAD 2D\r\n        starter_background_2d = settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.twod;\r\n        starter_face_2d = settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.twod;\r\n        starter_hair_2d = settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.twod;\r\n        starter_outfit_2d = settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.twod;\r\n        starter_asset_2d = settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.twod;\r\n        starter_eyewear_2d = settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.twod;\r\n        \r\n        $(avatar.layered_element).empty();\r\n        $(avatar.layered_element).append(`\r\n            <img src=\"${starter_background_2d}\" alt=\"background_text\">\r\n            <img src=\"${starter_face_2d}\" alt=\"face\">\r\n            <img src=\"${starter_hair_2d}\" alt=\"hair\">\r\n            <img src=\"${starter_outfit_2d}\" alt=\"outfit\">\r\n            <img src=\"${starter_asset_2d}\" alt=\"asset\">\r\n            <img src=\"${starter_eyewear_2d}\" alt=\"eyewear\">\r\n        `);\r\n\r\n        // LOAD 3D\r\n        \r\n        const \r\n            glbLoader = new GLTFLoader(),\r\n            texLoader = new THREE.TextureLoader();\r\n\r\n        helper.loading(true, {rendered_element: avatar.rendered_element});\r\n        helper.clean(scene);\r\n        \r\n        [\r\n            starter_background_data,\r\n            starter_face_data, \r\n            starter_hair_data,\r\n            starter_outfit_data,\r\n            starter_asset_data,\r\n            starter_eyewear_data        \r\n        ] = await Promise.all([\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.model_suffix.st\r\n            ),\r\n            glbLoader.loadAsync(\r\n                settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.model_suffix.st\r\n            ),\r\n        ]);\r\n\r\n        starter_background_obj = starter_background_data.scene.children[0];\r\n        starter_face_obj = starter_face_data.scene.children[0];\r\n        starter_hair_obj = starter_hair_data.scene.children[0];\r\n        starter_outfit_obj = starter_outfit_data.scene.children[0];\r\n        starter_asset_obj = starter_asset_data.scene.children[0];\r\n        starter_eyewear_obj = starter_eyewear_data.scene.children[0];\r\n\r\n        // LOAD TEXTURE\r\n        const background_texture = {\r\n            // map: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.base_color),\r\n            // metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.metallic),\r\n            // normalMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.normal),\r\n            // roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"background_text\"] + \"/\" + obj_st[\"background_text\"] + settings.texture_suffix.ambient_occlusion),\r\n        }\r\n        const face_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"face\"] + \"/\" + obj_st[\"face\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const hair_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"hair\"] + \"/\" + obj_st[\"hair\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const outfit_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"outfit\"] + \"/\" + obj_st[\"outfit\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const asset_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.ambient_occlusion),\r\n            // alphaMap: texLoader.load(settings.asset_dir + obj_st[\"asset\"] + \"/\" + obj_st[\"asset\"] + settings.texture_suffix.alpha),\r\n        }\r\n        const eyewear_texture = {\r\n            map: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.base_color),\r\n            metalnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.metallic),\r\n            normalMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.normal),\r\n            roughnessMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.roughness),\r\n            // aoMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.ambient_occlusion),\r\n            alphaMap: texLoader.load(settings.asset_dir + obj_st[\"eyewear\"] + \"/\" + obj_st[\"eyewear\"] + settings.texture_suffix.alpha),\r\n        }\r\n\r\n        // SCALE, SHADOW, TEXTURE OPTIONS FOR MESHES\r\n        starter_background_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_background_obj.receiveShadow = true;\r\n        starter_background_obj.castShadow = true;\r\n        var texture_background = new THREE.MeshStandardMaterial({\r\n            ...background_texture,\r\n            ...settings.texture_options.st_background\r\n        });\r\n        starter_background_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_background;\r\n            }\r\n        });\r\n        console.log(\"BG/Text: \");\r\n        console.log(starter_background_obj);\r\n        //---\r\n        starter_face_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_face_obj.receiveShadow = true;\r\n        starter_face_obj.castShadow = true;\r\n        var texture_face = new THREE.MeshStandardMaterial({\r\n            ...face_texture,\r\n            ...settings.texture_options.st_face\r\n        });\r\n        starter_face_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_face;\r\n            }\r\n        });\r\n        console.log(\"Face: \");\r\n        console.log(starter_face_obj);\r\n        //--- \r\n        starter_hair_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_hair_obj.receiveShadow = true;\r\n        starter_hair_obj.castShadow = true;\r\n        var texture_hair = new THREE.MeshStandardMaterial({\r\n            ...hair_texture,\r\n            ...settings.texture_options.st_hair\r\n        });\r\n        starter_hair_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_hair;\r\n            }\r\n        });\r\n        console.log(\"Hair: \");\r\n        console.log(starter_hair_obj);\r\n        //---\r\n        starter_outfit_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_outfit_obj.receiveShadow = true;\r\n        starter_outfit_obj.castShadow = true;\r\n        var texture_outfit = new THREE.MeshStandardMaterial({\r\n            ...outfit_texture,\r\n            ...settings.texture_options.st_outfit\r\n        });\r\n        starter_outfit_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_outfit;\r\n            }\r\n        });\r\n        console.log(\"Outfit: \");\r\n        console.log(starter_outfit_obj);\r\n        //---\r\n        starter_asset_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_asset_obj.receiveShadow = true;\r\n        starter_asset_obj.castShadow = true;\r\n        var texture_asset = new THREE.MeshStandardMaterial({\r\n            ...asset_texture,\r\n            ...settings.texture_options.st_asset\r\n        });\r\n        starter_asset_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_asset;\r\n            }\r\n        });\r\n        console.log(\"Asset: \");\r\n        console.log(starter_asset_obj);\r\n        //---\r\n        starter_eyewear_obj.scale.set(\r\n            settings.scale.x,\r\n            settings.scale.y,\r\n            settings.scale.z,\r\n        );\r\n        starter_eyewear_obj.receiveShadow = true;\r\n        starter_eyewear_obj.castShadow = true;\r\n        var texture_eyewear = new THREE.MeshStandardMaterial({\r\n            ...eyewear_texture,\r\n            ...settings.texture_options.st_eyewear\r\n        });\r\n        starter_eyewear_obj.traverse((o) => {\r\n            if (o.isMesh) {\r\n                o.castShadow = true;\r\n                o.receiveShadow = true;\r\n                o.material = texture_eyewear;\r\n            }\r\n        });\r\n        console.log(\"Eyewear: \");\r\n        console.log(starter_eyewear_obj);\r\n        \r\n        // ADD ST OBJ TO SCENE\r\n        scene.add(starter_background_obj);\r\n        scene.add(starter_face_obj);\r\n        scene.add(starter_hair_obj);\r\n        scene.add(starter_outfit_obj);\r\n        scene.add(starter_asset_obj);\r\n        scene.add(starter_eyewear_obj);\r\n\r\n        helper.loading(false, {rendered_element: avatar.rendered_element});\r\n\r\n    },\r\n\r\n    // ========\r\n\r\n    loadDefaultBg: async function (options) {\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n\r\n        const glbLoader = new GLTFLoader();\r\n\r\n        [test_background_data] = await Promise.all([\r\n            glbLoader.loadAsync(avatar.default_bg)\r\n        ]);\r\n\r\n        test_background_obj = test_background_data.scene.children[0];\r\n        scene.add(test_background_obj);\r\n\r\n        test_background_obj.receiveShadow = false;\r\n        test_background_obj.castShadow = true;\r\n\r\n        test_background_obj.scale.set(10, 10, 10);\r\n        test_background_obj.position.set(0, 5, 0);\r\n        test_background_obj.material = new THREE.MeshLambertMaterial({\r\n            emissive: 0x593b00\r\n        });\r\n\r\n        // const box_helper = new THREE.BoxHelper( obj_bg, 0xffff00 );\r\n        // scene.add(box_helper);\r\n\r\n        console.log(test_background_obj);\r\n    },\r\n\r\n    // ========\r\n\r\n    setup: {\r\n        all: function(options){\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options); \r\n            avatar.setup.scene();\r\n            avatar.setup.camera();\r\n            avatar.setup.renderer();\r\n            avatar.setup.controls();\r\n            avatar.setup.lights();\r\n        },\r\n        scene: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n\r\n            scene = new THREE.Scene();\r\n            scene.background = new THREE.Color().setHSL(0, 0, 0);\r\n            scene.fog = new THREE.Fog(scene.background, 1, 5000);\r\n        },\r\n        renderer: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            renderer = new THREE.WebGLRenderer({\r\n                antialias: true\r\n            });\r\n            renderer.setPixelRatio( window.devicePixelRatio );\r\n            renderer.setSize(avatar.dom_width, avatar.dom_height);\r\n            $(avatar.rendered_element).append(renderer.domElement); \r\n        },\r\n        camera: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            camera = new THREE.PerspectiveCamera(\r\n                75,\r\n                avatar.dom_width / avatar.dom_height,\r\n                0.1,\r\n                1000);\r\n            // camera.position.set(2, 4.1, 5.3);\r\n            camera.position.set(0.6, 4.4, 5.9);\r\n            // camera.position.set(15.7, 58.4, 60.5);\r\n            camera.lookAt(0, 10, 0);\r\n        },\r\n        controls: function(options) {\r\n            var defaults = {\r\n                minDistance: 4,\r\n                maxDistance: 9,\r\n                zoomSpeed: 1,\r\n                rotateSpeed: 1,\r\n                enableDamping: true,\r\n                enablePan: false,\r\n                dampingFactor: 0.1,\r\n                autoRotate: true,\r\n                autoRotateSpeed: 0.5,\r\n                minPolarAngle: .8,\r\n                maxPolarAngle: 1.8,\r\n                target: {\r\n                    x: 0, y: 2.3, z: 0\r\n                } \r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            controls = new THREE.OrbitControls(camera, renderer.domElement);\r\n            controls.minDistance = settings.minDistance;\r\n            controls.maxDistance = settings.maxDistance;\r\n            controls.zoomSpeed = settings.zoomSpeed;\r\n            controls.rotateSpeed = settings.rotateSpeed;\r\n            controls.enableDamping = settings.enableDamping;\r\n            controls.enablePan = settings.enablePan;\r\n            controls.dampingFactor = settings.dampingFactor;\r\n            controls.autoRotate = settings.autoRotate;\r\n            controls.autoRotateSpeed = settings.autoRotateSpeed;\r\n            controls.minPolarAngle = settings.minPolarAngle;\r\n            controls.maxPolarAngle = settings.maxPolarAngle;\r\n    \r\n            controls.target.set(\r\n                settings.target.x,\r\n                settings.target.y,\r\n                settings.target.z\r\n            );\r\n        },\r\n        lights: function(options) {\r\n            var defaults = {\r\n                environment_light: {\r\n                    enable: true,\r\n                    options: {\r\n                        dir: \"assets/hdr/\",\r\n                        hdri_file: \"provence_studio_1k_edit.hdr\", \r\n                        enable_background: false,\r\n                    }\r\n                },\r\n                hemisphere_light: {\r\n                    enable: false,\r\n                    options: {\r\n                        skyColor: 0xffffff,\r\n                        groundColor: 0xffffff,\r\n                        intensity: 1,\r\n                        position: {\r\n                            x: 0, y: 50, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                directional_light: {\r\n                    enable: false,\r\n                    options: {\r\n                    }\r\n                },\r\n                key_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 35,\r\n                        intensity: .85,\r\n                        angle: Math.PI/ 2,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 4, y: 3, z: 4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                fill_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .5,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: -7, y: 3, z: 6\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                back_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .8,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 2, z: -4\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 2, z: 0\r\n                        }\r\n                    }\r\n                },\r\n                top_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .3,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 8, z: 3\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 4, z: 1\r\n                        }\r\n                    }\r\n                },\r\n                bottom_light: {\r\n                    enable: 1,\r\n                    helper: 0,\r\n                    options: {\r\n                        debug_color: 0xff0000,\r\n                        color: 0xffffff,\r\n                        decay: 1,\r\n                        distance: 50,\r\n                        intensity: .1,\r\n                        angle: Math.PI/ 3,\r\n                        penumbra: .8,\r\n                        cast_shadow: true,\r\n                        shadow_map_size_width: 512,\r\n                        shadow_map_size_height: 512,\r\n                        shadow_camera_near: 10,\r\n                        shadow_camera_far: 200,\r\n                        shadow_focus: .2,\r\n                        position: {\r\n                            x: 0, y: 1, z: 3\r\n                        },\r\n                        target: {\r\n                            x: 0, y: 3, z: 0\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.environment_light.enable) {\r\n\r\n                new THREE.RGBELoader()\r\n                    .setPath(settings.environment_light.options.dir)\r\n                    .load(settings.environment_light.options.hdri_file, function (texture) {\r\n                        texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                        if (settings.environment_light.options.enable_background) {\r\n                            scene.background = texture;\r\n                        }\r\n                        scene.environment = texture;\r\n                    });\r\n            } \r\n            \r\n            \r\n            // helper.create_light.environment_light(settings.environment_light.options);\r\n    \r\n            light.key = helper.create_light.spot_light(settings.key_light);\r\n            if (settings.key_light.enable) {\r\n                scene.add( light.key);\r\n                scene.add( light.key.target );\r\n            }\r\n    \r\n            \r\n            light.fill = helper.create_light.spot_light(settings.fill_light);\r\n            if (settings.fill_light.enable) {\r\n                scene.add( light.fill);\r\n                scene.add( light.fill.target );\r\n            }\r\n            \r\n            light.back = helper.create_light.spot_light(settings.back_light);\r\n            if (settings.back_light.enable) {\r\n                scene.add( light.back);\r\n                scene.add( light.back.target );\r\n            }\r\n            \r\n            light.top = helper.create_light.spot_light(settings.top_light);\r\n            if (settings.top_light.enable) {\r\n                scene.add( light.top);\r\n                scene.add( light.top.target );\r\n            }\r\n            \r\n            light.bottom = helper.create_light.spot_light(settings.bottom_light);\r\n            if (settings.bottom_light.enable) {\r\n                scene.add( light.bottom);\r\n                scene.add( light.bottom.target );\r\n            }\r\n\r\n            if (settings.hemisphere_light.enable) {\r\n                light.hemi = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.6);\r\n                light.hemi.color.setHSL(0.6, 1, 0.6);\r\n                light.hemi.groundColor.setHSL(0.095, 1, 0.75);\r\n                light.hemi.position.set(0, 50, 0);\r\n                scene.add(light.hemi);\r\n    \r\n                if (avatar.helper) {\r\n                    const light_hemi_helper = new THREE.HemisphereLightHelper(light.hemi, 10);\r\n                    scene.add(light_hemi_helper);\r\n                }\r\n            }\r\n    \r\n            if (settings.directional_light.enable) {\r\n                light.dir = new THREE.DirectionalLight(0xffffff, .8);\r\n                light.dir.color.setHSL(0.1, 1, 0.95);\r\n                light.dir.position.set(- 1, 1.75, 1);\r\n                light.dir.position.multiplyScalar(100);\r\n                if (settings.light.dir) {\r\n                    scene.add(light.dir);\r\n                }\r\n    \r\n                light.dir.castShadow = true;\r\n    \r\n                light.dir.shadow.mapSize.width = 2048;\r\n                light.dir.shadow.mapSize.height = 2048;\r\n    \r\n                const d = 50;\r\n    \r\n                light.dir.shadow.camera.left = - d;\r\n                light.dir.shadow.camera.right = d;\r\n                light.dir.shadow.camera.top = d;\r\n                light.dir.shadow.camera.bottom = - d;\r\n    \r\n                light.dir.shadow.camera.far = 3500;\r\n                light.dir.shadow.bias = - 0.0001;\r\n    \r\n                if (settings.light.dir && avatar.helper) {\r\n                    const light_dir_helper = new THREE.DirectionalLightHelper(light.dir, 10);\r\n                    scene.add(light_dir_helper);\r\n                }\r\n            }\r\n\r\n        },\r\n        helpers: function(options){\r\n            var defaults = {\r\n                gridHelper: {\r\n                    enable: false,\r\n                    size : 100,\r\n                    divisions : 100,\r\n                    colorCenterLine : 0x0000ff,\r\n                    colorGrid : 0x808080\r\n                }\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n    \r\n            if (settings.gridHelper.enable) {\r\n                const gridHelper = new THREE.GridHelper( \r\n                    settings.gridHelper.size ,  \r\n                    settings.gridHelper.divisions ,  \r\n                    settings.gridHelper.colorCenterLine ,  \r\n                    settings.gridHelper.colorGrid ,  \r\n                );\r\n                scene.add( gridHelper );\r\n            }\r\n        },\r\n        post_renderer: function (options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            avatar.setup.animate();\r\n            controls.addEventListener('change', function () {\r\n                avatar.setup.render();\r\n            });\r\n            controls.update();\r\n        },\r\n        render: function(options) {\r\n            var defaults = {\r\n            }\r\n            var settings = $.extend(defaults, options);\r\n            renderer.render(scene, camera);\r\n        },\r\n        animate: function(options) {\r\n            requestAnimationFrame( avatar.setup.animate );\r\n            const delta = clock.getDelta();\r\n    \r\n            // if (obj_text) {\r\n            //     avatar.lookAtObj();\r\n            // }\r\n            if ( mixer ) mixer.update( delta );\r\n    \r\n            avatar.callback();\r\n            avatar.setup.render();\r\n        }\r\n    },\r\n    callback: function(options){\r\n        var defaults = {\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n    },\r\n\r\n    // ======\r\n\r\n    switch: function(current_status, options) {\r\n        var defaults = {\r\n            asset_dir: avatar.asset_dir,\r\n            texture_options: _DEFAULT.texture_options,\r\n            texture_suffix: _DEFAULT.texture_suffix,\r\n            texture_skin_suffix: _DEFAULT.texture_skin_suffix,\r\n        }\r\n        var settings = $.extend(defaults, options);\r\n    }\r\n}\r\n\r\nvar debug = {\r\n    freeCamera: () => {\r\n        controls.minDistance = 0;\r\n        controls.maxDistance = Infinity;\r\n        controls.zoomSpeed = 1;\r\n        controls.rotateSpeed = 1;\r\n        controls.enableDamping = false;\r\n        controls.enablePan = true;\r\n        controls.autoRotate = true;\r\n        controls.autoRotateSpeed = 1;\r\n        controls.maxPolarAngle = Math.PI;\r\n    },\r\n    getCamera: () => camera,\r\n    getControls: () => controls,\r\n    getObject: (obj_name) => {\r\n        switch (obj_name) {\r\n            case 'smt_background_obj': return smt_background_obj;\r\n            case 'smt_avatar_obj': return smt_avatar_obj;\r\n            case 'starter_background_obj': return starter_background_obj;\r\n            case 'starter_face_obj': return starter_face_obj;\r\n            case 'starter_hair_obj': return starter_hair_obj;\r\n            case 'starter_outfit_obj': return starter_outfit_obj;\r\n            case 'starter_asset_obj': return starter_asset_obj;\r\n            case 'starter_eyewear_obj': return starter_eyewear_obj;\r\n            case 'light.hemi': return light.hemi;\r\n            case 'light.dir': return light.dir;\r\n            case 'light.key': return light.key;\r\n            case 'light.fill': return light.fill;\r\n            case 'light.back': return light.back;\r\n            case 'light.top': return light.top;\r\n            case 'light.bottom': return light.bottom;\r\n        }\r\n    },\r\n    watch: (object_to_watch) => {\r\n        avatar.callback = function() {\r\n            console.log(object_to_watch);\r\n        }\r\n        return \"[ debug watch started ]\"\r\n    },\r\n    endWatch: () => {\r\n        avatar.callback = function() {\r\n        }\r\n        return \"[ debug watch ended ]\"\r\n    }\r\n}\r\n\r\n\r\nexport {avatar, debug};","import config from \"../../setup/config\";\r\nimport bootstrap from 'bootstrap';\r\nimport {avatar, debug} from \"./avatar/main\";\r\n\r\n$(function () {\r\n    avatar.init();\r\n});\r\n\r\nwindow.addEventListener(\"load\", function(){\r\n    // avatar.loadSMT(\"SMT1\");\r\n\r\n    var url = new URL(window.location.href);\r\n    var smt_code = url.searchParams.get(\"load_smt\");\r\n    if (typeof smt_code != \"undefined\" && smt_code != null) {\r\n        if (smt_code.length == 0) smt_code = \"SMT1\";\r\n        avatar.loadDefaultBg();\r\n        avatar.loadSMT(smt_code);\r\n    }\r\n\r\n    var st_code = url.searchParams.get(\"load_st\");\r\n    // console.log(st_code);\r\n    if (typeof st_code != \"undefined\" && st_code != null) {\r\n        if (st_code.length == 0) st_code = \"HM3-EM3-FM3-OM2-A1-T3\";\r\n        avatar.loadDefaultBg();\r\n        avatar.loadST(st_code); \r\n    }\r\n\r\n    var dim = url.searchParams.get(\"dim\");\r\n    // console.log(dim);\r\n    switch (dim) {\r\n        case \"2\": \r\n            if ($(\"#layered_avatar\").length > 0) {\r\n                $(\"#layered_avatar\").addClass(\"active\");\r\n            }\r\n            break;\r\n        case \"3\": default: \r\n            if ($(\"#rendered_avatar\").length > 0) {\r\n                $(\"#rendered_avatar\").addClass(\"active\");\r\n            }\r\n            \r\n            break;\r\n    }\r\n});\r\n\r\n \r\nwindow.debug = debug;","// extracted by mini-css-extract-plugin\nexport {};","var config = {\r\n    widthTriggerScale: 9999,\r\n    widthDesktopSafe: 1620,\r\n    widthDesktop: 2000,\r\n    widthMobile: 768,\r\n    heightDesktop: 1000,\r\n    heightMobile: 1000,\r\n    func: {\r\n        isMobile: function(){\r\n            var device = {\r\n                width: $(window).innerWidth(),\r\n                height: $(window).innerHeight()\r\n            };\r\n\r\n            return ((device.width <= config.widthMobile) || (device.width < device.height));\r\n        }\r\n    }\r\n}\r\n\r\nexport default config;"],"sourceRoot":""}